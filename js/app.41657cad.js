(function(t){function e(e){for(var n,a,s=e[0],c=e[1],l=e[2],u=0,f=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&f.push(r[a][0]),r[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,a=1;a<i.length;a++){var c=i[a];0!==r[c]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},r={app:0},o=[];function a(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"e6b64e38"}[t]+".js"}function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=function(t){var e=[],i=r[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise((function(e,n){i=r[t]=[e,n]}));e.push(i[2]=n);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=a(t);var l=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(u);var i=r[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",l.name="ChunkLoadError",l.type=n,l.request=o,i[1](l)}r[t]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/mri-vuewer.ver2/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;o.push([1,"chunk-vendors"]),i()})({0:function(t,e){},"0bad":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",[i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"indigo"}},[t._v("mdi-file-music")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(t._s(t.audioStream.codec_name))])],1)],1),i("v-list-item",[i("v-list-item-action"),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.audioStream.sample_rate)+" Hz, "+t._s(t.audioStream.channel_layout)+", "+t._s(t.audioStream.sample_fmt)+", "+t._s(t.audioStream.bitrate)+" kb/s ")])],1)],1)],1)},r=[],o={name:"m-audio-stream-list",props:{audioStream:{type:Object}}},a=o,s=i("2877"),c=i("6544"),l=i.n(c),u=i("132d"),d=i("8860"),f=i("da13"),m=i("1800"),h=i("5d23"),v=i("34c3"),p=Object(s["a"])(a,n,r,!1,null,"742ffc3e",null);e["a"]=p.exports;l()(p,{VIcon:u["a"],VList:d["a"],VListItem:f["a"],VListItemAction:m["a"],VListItemContent:h["b"],VListItemIcon:v["a"],VListItemTitle:h["d"]})},1:function(t,e,i){t.exports=i("56d7")},10:function(t,e){},11:function(t,e){},1188:function(t,e,i){"use strict";(function(t){i("99af"),i("d81d"),i("d3b7"),i("ac1f"),i("841c"),i("1276"),i("498a"),i("ddb0");var n=i("9de5"),r=i("27a3"),o=i("21f0"),a=i("edc0");e["a"]={name:"WTextGridTable",components:{MLoadingDialog:n["a"]},mixins:[r["a"]],props:{videoHeight:{default:null},title:{type:String},tier:{type:Object}},data:function(){return{editedIndex:-1,editedItem:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItem:{name:"",calories:0,fat:0,carbs:0,protein:0}}},computed:{headers:function(){var t=[];return this.tier&&("interval"==this.tier.type?(t.push({text:"Start Time (sec)",value:"start"}),t.push({text:"End Time (sec)",value:"end"})):t.push({text:"Time (sec)",value:"time"})),t.push({text:"Text",value:"text"}),t.push({text:"Actions",value:"actions",sortable:!1,align:"end"}),t},items:function(){var t=this;return this.tier?"interval"==this.tier.type?(this.tier.values.map((function(e,i){return e.idx=i,e.start=0==i?0:t.tier.values[i-1].time,e.end=e.time,e})),this.tier.values):this.tier.values.map((function(t,e){var i={idx:e,time:t.time,text:t.text};return i})):[]},keyword:function(){return this.$store.state.search.keyword}},methods:{deleteItem:function(t){var e=this;setTimeout((function(){1==e.items.length?e.deleteTier(e.title):e.deleteTierValue(e.title,t.idx)}),100)},trimVideo:function(e,i){var n=this.$store.state.current.video.source,r=this.$store.state.current.video.filename.split(".")[0],s=String(a["a"].round(e,3))+"-"+String(a["a"].round(i,3)),c="".concat(r,"-").concat(s,".mp4");if(n){var l=o["a"].file.toBuff(n),u=o["a"].video.trim(l,e,i),d=u.MEMFS[0],f=o["a"].video.toBlob(t(d.data));o["a"].file.download(f,c)}},close:function(){var t=this;this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))}}}}).call(this,i("1c35").Buffer)},12:function(t,e){},1685:function(t,e,i){},2:function(t,e){},"209a":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{fullscreen:t.$store.state.current.layout.mini,title:"Setting"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{tile:""}},[i("v-card-text",[i("m-setting-from")],1)],1)],1)},r=[],o=i("9621"),a=i("7c54"),s={name:"m-setting-dialog",components:{MCardDialog:o["a"],MSettingFrom:a["a"]},props:{value:{type:Boolean}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{close:function(){this.dialog=!1}}},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("b0af"),m=i("99d9"),h=Object(l["a"])(c,n,r,!1,null,"09e7e462",null);e["a"]=h.exports;d()(h,{VCard:f["a"],VCardText:m["b"]})},"21f0":function(t,e,i){"use strict";i("99af"),i("4de4"),i("c975"),i("a15b"),i("d81d"),i("b0c0"),i("a9e3"),i("d3b7"),i("ac1f"),i("466d"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7");var n=i("0402"),r=i("fcfb"),o=i.n(r),a=function(t){var e="",i="",n=o()({arguments:["-version"],print:function(t){e+=t+"\n"},printErr:function(t){i+=t+"\n"},onExit:function(n){if(0!=n)throw new Error(i);t(n,e)}});return n},s=function(){return{name:null,source:null,fps:null,duration:null,frames:[],videoStream:{codec_name:null,pix_fmt:null,bitrate:null,fps:null,tbr:null,tbn:null,tbc:null},audioStream:{codec_name:null,sample_rate:null,channel_layout:null,sample_fmt:null,bitrate:null},originSize:{width:null,height:null},errors:{fps:null,duration:null,videoStream:null,audioStream:null,originSize:{width:null,height:null}}}},c=function(t,e){var i=new Uint8Array(t),r="",a=o()({MEMFS:[{name:"data.mp4",data:i}],arguments:["-i","data.mp4"],print:function(t){r+=t+"\n"},printErr:function(t){r+=t+"\n"},onExit:function(){var t=s();if(r){var i,o=Object(n["a"])(r.split("\n"));try{for(o.s();!(i=o.n()).done;){var a=i.value;try{if(~a.indexOf("Duration")){var c=a.split(",")[0].split(": ")[1].split(":").map((function(t){return Number(t)}));t.duration=60*c[0]*60+60*c[1]+c[2]}}catch(m){t.errors.duration="$vuetify.io.video.error.duration"}if(~a.indexOf("Stream")){var l=a.split(": ");if(3==l.length){var u=l[2].split(", ");if("Video"==l[1]){try{var d=u.filter((function(t){return t.match(/^([1-9]\d*|0)(\.\d+)?x([1-9]\d*|0)(\.\d+)?/)}))[0];if(d){var f=d.split(" ")[0].split("x");t.originSize={width:Number(f[0]),height:Number(f[1])}}}catch(h){this.video.errors.originSize.width="$vuetify.io.video.error.originSize.width",this.video.errors.originSize.height="$vuetify.io.video.error.originSize.height"}t.videoStream.codec_name=u[0],t.videoStream.pix_fmt=u[1];try{t.videoStream.bitrate=Number(u.filter((function(t){return t.match(/kb\/s/)}))[0].split(" ")[0])}catch(v){t.videoStream.bitrate=null}try{t.videoStream.fps=Number(u.filter((function(t){return t.match(/fps/)}))[0].split(" ")[0])}catch(p){t.videoStream.fps=null,t.errors.fps="$vuetify.io.video.error.fps"}try{t.videoStream.tbr=Number(u.filter((function(t){return t.match(/tbr/)}))[0].split(" ")[0])}catch(g){t.videoStream.tbr=null}try{t.videoStream.tbn=Number(u.filter((function(t){return t.match(/tbn/)}))[0].split(" ")[0])}catch(x){t.videoStream.tbn=null}try{t.videoStream.tbc=Number(u.filter((function(t){return t.match(/tbc/)}))[0].split(" ")[0])}catch(y){t.videoStream.tbc=null}}else{t.audioStream.codec_name=u[0];try{t.audioStream.sample_rate=Number(u[1].split(" ")[0])}catch(b){t.audioStream.sample_rate=null}t.audioStream.channel_layout=u[2],t.audioStream.sample_fmt=u[3];try{t.audioStream.bitrate=Number(u[4].split(" ")[0])}catch(w){t.audioStream.bitrate=null}}}}}}catch($){o.e($)}finally{o.f()}e(t)}}});return a},l=function(t){var e=new Uint8Array(t),i="-i data.avi -vcodec libx264 -pix_fmt yuv420p output.mp4 -c:a libfdk_aac -threads 4 -loglevel error",n=o()({MEMFS:[{name:"data.avi",data:e}],arguments:i.split(" "),print:function(){},printErr:function(t){return console.error(t)}});return n},u=function(t,e,i,n){var r,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=new Uint8Array(t),c=String(Math.round(n*i)).length,l="-vf trim=start_frame=".concat(e-1,":end_frame=").concat(e);if(a){var u=a.x,d=a.y,f=a.w,m=a.h;r="-i data.mp4 ".concat(l,",crop=").concat(f,":").concat(m,":").concat(u,":").concat(d," -vsync 0 %0").concat(c,"d.png -loglevel error")}else r="-i data.mp4 ".concat(l," %0").concat(c,"d.png -vsync 0 -loglevel error");var h=o()({MEMFS:[{name:"data.mp4",data:s}],arguments:r.split(" "),print:function(){},printErr:function(t){return console.error(t)}});return h},d=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(r,a){setTimeout((function(){var s,c=new Uint8Array(t),l=String(Math.round(i*e)).length;if(n){var u=n.x,d=n.y,f=n.w,m=n.h;s="-i data.mp4 -vf crop=".concat(f,":").concat(m,":").concat(u,":").concat(d," %0").concat(l,"d.png -loglevel error")}else s="-i data.mp4 %0".concat(l,"d.png -loglevel error");var h=o()({MEMFS:[{name:"data.mp4",data:c}],arguments:s.split(" "),print:function(){},printErr:function(t){return a(t)}});r(h)}))}))},f=function(t){return new Promise((function(e,i){var n=new Uint8Array(t),r="-i data.mp4 -vn -ac 2 -ar 48000 -acodec pcm_s16le -f wav output.wav -loglevel error",a=o()({MEMFS:[{name:"data.mp4",data:n}],arguments:r.split(" "),print:function(){},printErr:function(t){return i(t)}});e(a)}))},m=function(t,e,i){var n=new Uint8Array(t),r="-i data.mp4 -af lowpass=".concat(e,",highpass=").concat(i," out.mp4 -loglevel error"),a=o()({MEMFS:[{name:"data.mp4",data:n}],arguments:r.split(" "),print:function(){},printErr:function(t){return console.error(t)}});return a},h=function(t){var e=new Uint8Array(t),i="-i data.mp4 -af anlmdn out.mp4 -loglevel error",n=o()({MEMFS:[{name:"data.mp4",data:e}],arguments:i.split(" "),print:function(){},printErr:function(t){return console.error(t)}});return n},v=function(t){var e=new Uint8Array(t),i="-i data.mp4 -af afftdn out.mp4 -loglevel error",n=o()({MEMFS:[{name:"data.mp4",data:e}],arguments:i.split(" "),print:function(){},printErr:function(t){return console.error(t)}});return n},p=function(t,e,i){var n=new Uint8Array(t),r=i-e,a=o()({MEMFS:[{name:"data.mp4",data:n}],arguments:["-ss",String(e),"-i","data.mp4","-t",String(r),"-c","copy","output.mp4"],print:function(){},printErr:function(){}});return a},g=function(t,e,i){var n=new Uint8Array(t),r=i-e,a=o()({MEMFS:[{name:"data.mp4",data:n}],arguments:["-ss",String(e),"-i","data.mp4","-t",String(r),"-vcodec","png","img_%03d.png"],print:function(){},printErr:function(){}});return a},x=function(t){var e=t.map((function(t,e){var i=new Uint8Array(t);return{name:"v".concat(e,".mp4"),data:i}})),i=e.map((function(t){return t.name})).join("|"),n=o()({MEMFS:e,arguments:'-i "concat:'.concat(i,'" -codec copy output.mp4').split(" "),print:function(t){console.log(t)},printErr:function(t){console.log(t)}});return n},y=function(t){return new Blob([t],{type:"video/mp4"})},b=function(t){var e=new FileReader;return e.readAsDataURL(t),new Promise((function(t){e.onloadend=function(){t(e.result)}}))},w={version:a,info:c,bandpass:m,anlmdn:h,afftdn:v,trim:p,trimPng:g,concat:x,toWav:f,toMp4:l,toPngs:d,toPng:u,toBlob:y,toBase64:b,initObj:s},$=i("9139"),k=(i("c19f"),i("b64b"),i("1146")),_=i.n(k);function S(t){var e=Object.keys(t),i={};for(var n in t)i[n]=_.a.utils.aoa_to_sheet(t[n]);return{SheetNames:e,Sheets:i}}function C(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0;n!=t.length;++n)i[n]=255&t.charCodeAt(n);return e}function T(t){var e={type:"binary"},i=S(t),n=_.a.write(i,e),r=new Blob([C(n)],{type:"application/octet-stream"});return r}function R(t,e){return new Promise((function(i,n){var r=new FileReader;r.onload=function(t){try{var r=new Uint8Array(t.target.result),o=_.a.read(r,{type:"array"}),a=_.a.utils.sheet_to_json(o.Sheets[e],{header:1});i(a)}catch(s){n(s)}},r.onerror=function(t){return n(t)},r.readAsArrayBuffer(t)}))}var V={dump:T,load:R},P=(i("3ca3"),i("ddb0"),i("2b3d"),i("96cf"),i("7580")),I=function(t){return new Promise((function(e,i){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return i(t)}}))},O=function(t){for(var e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),r=new Uint8Array(n),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return new Blob([n],{type:i})},j=function(t){for(var e=atob(t.split(",")[1]),i=new ArrayBuffer(e.length),n=new Uint8Array(i),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return i},E=function(t){return new Promise((function(e,i){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(new Uint8Array(n.result))},n.onerror=function(t){return i(t)}}))},D=function(){var t=Object(P["a"])(regeneratorRuntime.mark((function t(e,i,n){var r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,{mode:"cors",method:"GET"});case 2:if(r=t.sent,200!=r.status){t.next=11;break}return t.next=6,r.blob();case 6:return o=t.sent,a=new File([o],i,n),t.abrupt("return",a);case 11:throw new Error(r.statusText);case 12:case"end":return t.stop()}}),t)})));return function(e,i,n){return t.apply(this,arguments)}}(),M=function(t,e){var i=document.createElement("a");document.body.appendChild(i),i.download=e,i.href=t,i.click(),i.remove(),setTimeout((function(){URL.revokeObjectURL(t)}),1e4)},L=function(t,e){var i=URL.createObjectURL(t);M(i,e)},F={toBase64:I,toBlob:O,toBuff:j,toUnit8Array:E,fetch:D,download:L,downloadURL:M},A={read:function(t){return new Promise((function(e,i){var n=new FileReader;n.onloadend=function(t){var i=t.target.result;e(JSON.parse(i))},n.onerror=function(t){return i(t)},n.readAsText(t)}))},toBlob:function(t){return new Blob([JSON.stringify(t,null,"  ")],{type:"application/json"})},toFile:function(t,e){var i=new Blob([JSON.stringify(e,null,"  ")],{type:"application/json"});return i.name=t,i.lastModifiedDate=new Date,i}},z=i("c4e3"),N=i.n(z);function B(t){return new Promise((function(e,i){try{var r,o=new N.a,a=Object(n["a"])(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;o.file(s.name,s.base64.split(",")[1],{base64:!0})}}catch(c){a.e(c)}finally{a.f()}o.generateAsync({type:"blob"}).then((function(t){e(t)})).catch((function(t){return i(t)}))}catch(l){i(l)}}))}var G={toZip:B},U=function(t){var e=[];if(t.points){var i,r=Object(n["a"])(t.points);try{for(r.s();!(i=r.n()).done;){var o=i.value;(o.data.time||0==o.data.time)&&e.push({time:o.data.time,text:o.attributes.label||""})}}catch(a){r.e(a)}finally{r.f()}}return e},K=function(t,e){var i=[],n=[],r=[];if(t.regions){for(var o in t.regions){var a=t.regions[o];if("left"==e){if(a.start){var s=0==o?"":t.regions[o-1].attributes.label||"";i.push({time:a.start,text:s})}}else if("right"==e)a.end&&i.push({time:a.end,text:a.attributes.label||""});else if("up-down"==e)o%2==0?(i.push({time:a.start,text:""}),i.push({time:a.end,text:a.attributes.label||""})):(n.push({time:a.start,text:""}),n.push({time:a.end,text:a.attributes.label||""}));else if(0!=o){if(a.start<t.regions[o-1].end){var c=t.regions[o];i.push({time:c.start,text:""}),i[i.length-2].text="",i.push({time:c.end,text:""}),r.push([o,i.length])}else if(a.start&&a.end){var l=a.attributes.label||"";i.push({time:a.start,text:""}),i.push({time:a.end,text:l})}}else if(a.start&&a.end){var u=a.attributes.label||"";i.push({time:a.start,text:""}),i.push({time:a.end,text:u})}}for(var d in r){var f=r[d][0],m=r[d][1];m&&i[m-2]&&(i[m-2].text=t.regions[f-1].attributes.label||""),d==r.length-1&&(i[m-1].text=t.regions[f].attributes.label||"")}}return n.length?{regions:i,regionsDown:n}:{regions:i}},q={loadTextGrid:function(t,e){var i={},n=U(t);n.length&&(i["points"]={type:"point",values:n});var r=K(t,e),o=r.regions,a=r.regionsDown;return a.length?(i["region_up"]={type:"interval",values:o},i["region_down"]={type:"interval",values:a}):o.length&&(i["regions"]={type:"interval",values:o}),i}},H={loadTextGrid:function(t){if(t.name&&t.textgrid)return t.textgrid;var e={};for(var i in t){var n=t[i];n.type&&n.values&&("interval"!=n.type&&"point"!=n.type||Array.isArray(n.values)&&(e[i]=n))}return e}},X=function(t){var e=[],i=0;for(var n in t){var r=t[n],o=r.text,a=r.time;a&&(e.push("        points [".concat(i+1,"]:")),e.push("            number = ".concat(a," ")),e.push('            mark = "'.concat(o,'" ')),i++)}return e},J=function(t,e){var i=[],n=0;for(var r in t){var o=t[r],a=o.text,s=o.time;if(s){i.push("        intervals [".concat(n+1,"]:"));try{var c=t[r-1].time;i.push("            xmin = ".concat(c," "))}catch(l){i.push("            xmin = 0 ")}r==t.length-1?i.push("            xmax = ".concat(e," ")):i.push("            xmax = ".concat(s," ")),i.push('            text = "'.concat(a,'" ')),n++}}return i},W=function(t,e){var i=['File type = "ooTextFile"','Object class = "TextGrid"',"","xmin = 0 ","xmax = ".concat(t," "),"tiers? <exists> ","size = ".concat(Object.keys(e).length," "),"item []: "],n=1;for(var r in e){var o=e[r],a=o.type,s=o.values;i.push("    item [".concat(n,"]:")),"interval"==a?i.push('        class = "IntervalTier"'):i.push('        class = "TextTier"'),i.push('        name = "'.concat(r,'" ')),i.push("        xmin = 0 "),i.push("        xmax = ".concat(t," ")),"point"==a?(i.push("        points: size = ".concat(s.length," ")),i=i.concat(X(s))):"interval"==a&&(s[s.length-1].time<t&&s.push({text:"",time:t}),i.push("        intervals: size = ".concat(s.length," ")),i=i.concat(J(s,t))),n++}return i.join("\n")},Y={dump:W},Z=(i("fb6a"),i("498a"),i("81a8")),Q=i("ac84"),tt=i("c20e"),et=i("a007"),it=i("e3fc"),nt=i("0c06"),rt=["frm","tng1x","tng1y","tng2x","tng2y","tng3x","tng3y","tng4x","tng4y","tng5x","tng5y","tng6x","tng6y","tng7x","tng7y","tng8x","tng8y","tng9x","tng9y","tng10x","tng10y","tng11x","tng11y","tng12x","tng12y","tng13x","tng13y","tng14x","tng14y","tng15x","tng15y","tng16x","tng16y","tng17x","tng17y","tng18x","tng18y","tng19x","tng19y","tng20x","tng20y","tng21x","tng21y","tng22x","tng22y","tng23x","tng23y","tng24x","tng24y","tng25x","tng25y","tng26x","tng26y","tng27x","tng27y","tng28x","tng28y","tng29x","tng29y","tng30x","tng30y","tng31x","tng31y","tng32x","tng32y","tng33x","tng33y","tng34x","tng34y","tng35x","tng35y","tng36x","tng36y","tng37x","tng37y","tng38x","tng38y","tng39x","tng39y","tng40x","tng40y","ulp1x","ulp1y","ulp2x","ulp2y","ulp3x","ulp3y","ulp4x","ulp4y","ulp5x","ulp5y","ulp6x","ulp6y","ulp7x","ulp7y","ulp8x","ulp8y","ulp9x","ulp9y","ulp10x","ulp10y","ulp11x","ulp11y","ulp12x","ulp12y","ulp13x","ulp13y","ulp14x","ulp14y","ulp15x","ulp15y","llp1x","llp1y","llp2x","llp2y","llp3x","llp3y","llp4x","llp4y","llp5x","llp5y","llp6x","llp6y","llp7x","llp7y","llp8x","llp8y","llp9x","llp9y","llp10x","llp10y","llp11x","llp11y","llp12x","llp12y","llp13x","llp13y","llp14x","llp14y","llp15x","llp15y","llp16x","llp16y","llp17x","llp17y","llp18x","llp18y","llp19x","llp19y","llp20x","llp20y","llp21x","llp21y","llp22x","llp22y","llp23x","llp23y","llp24x","llp24y","llp25x","llp25y","plt1x","plt1y","plt2x","plt2y","plt3x","plt3y","plt4x","plt4y","plt5x","plt5y","plt6x","plt6y","plt7x","plt7y","plt8x","plt8y","plt9x","plt9y","plt10x","plt10y","plt11x","plt11y","plt12x","plt12y","plt13x","plt13y","plt14x","plt14y","plt15x","plt15y","plt16x","plt16y","plt17x","plt17y","plt18x","plt18y","plt19x","plt19y","plt20x","plt20y","plt21x","plt21y","plt22x","plt22y","plt23x","plt23y","plt24x","plt24y","plt25x","plt25y","plt26x","plt26y","plt27x","plt27y","plt28x","plt28y","plt29x","plt29y","plt30x","plt30y","upw1x","upw1y","upw2x","upw2y","upw3x","upw3y","upw4x","upw4y","upw5x","upw5y","upw6x","upw6y","upw7x","upw7y","upw8x","upw8y","upw9x","upw9y","upw10x","upw10y","upw11x","upw11y","upw12x","upw12y","upw13x","upw13y","upw14x","upw14y","upw15x","upw15y","upw16x","upw16y","upw17x","upw17y","upw18x","upw18y","upw19x","upw19y","upw20x","upw20y","upw21x","upw21y","upw22x","upw22y","upw23x","upw23y","upw24x","upw24y","upw25x","upw25y","upw26x","upw26y","upw27x","upw27y","upw28x","upw28y","atw1x","atw1y","atw2x","atw2y","atw3x","atw3y","atw4x","atw4y","atw5x","atw5y","atw6x","atw6y","atw7x","atw7y","atw8x","atw8y","atw9x","atw9y","atw10x","atw10y","atw11x","atw11y","atw12x","atw12y","atw13x","atw13y","atw14x","atw14y","atw15x","atw15y","atw16x","atw16y","atw17x","atw17y","atw18x","atw18y","atw19x","atw19y","atw20x","atw20y","atw21x","atw21y","atw22x","atw22y","atw23x","atw23y","atw24x","atw24y","atw25x","atw25y","atw26x","atw26y","atw27x","atw27y","atw28x","atw28y","atw29x","atw29y","atw30x","atw30y"],ot=function(t){Object(et["a"])(i,t);var e=Object(it["a"])(i);function i(t){var n;Object(Q["a"])(this,i);for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return n=e.call.apply(e,[this].concat(o)),Error.captureStackTrace&&Error.captureStackTrace(Object(tt["a"])(n),i),n.reason=t,n.name="XYError",n}return i}(Object(nt["a"])(Error));function at(t){var e=rt.filter((function(e){return-1==t.indexOf(e)}));return 0===e.length}function st(t,e,i){return t.slice(e,e+i)}function ct(t){var e=[];for(var i in t)i%2===1&&e.push({x:parseInt(t[i-1]),y:parseInt(t[i])});return e}function lt(t){var e=ct(st(t,1,80)),i=ct(st(t,81,30)),n=ct(st(t,111,50)),r=ct(st(t,161,60)),o=ct(st(t,221,56)),a=ct(st(t,277,30));return{tng:e,ulp:i,llp:n,plt:r,upw:o,atw:a}}function ut(t){var e=t.split("\n").map((function(t){return t.split(",").map((function(t){return t.trim()}))})),i=Object(Z["a"])(e),n=i[0],r=i.slice(1);if(!at(n))throw new ot("invalidHeader");try{var o=r.map((function(t){return lt(t)}));return o}catch(a){throw new ot("invalidBody")}}var dt={read:function(t){return new Promise((function(e,i){var n=new FileReader;n.onloadend=function(t){try{var n=ut(t.target.result);e(n)}catch(r){i(r)}},n.onerror=function(t){return i(t)},n.readAsText(t)}))},getColor:function(t){var e={tng:"#FFFF8D",ulp:"#FF8A80",llp:"#FF80AB",plt:"#B9F6CA",upw:"#82B1FF",atw:"#B388FF"};return e[t]}},ft={ver1:q,ver2:H},mt=F.download;e["a"]={video:w,file:F,json:A,zip:G,obj:ft,xlsx:V,image:$["a"],download:mt,tg:Y,xy:dt}},"27a3":function(t,e,i){"use strict";i("99af"),i("c740"),i("a9e3"),i("b64b");e["a"]={computed:{$ws:function(){return this.$store.state.current.wavesurfer||null},$tg:function(){return this.$store.state.current.textgrid||null}},methods:{getDuration:function(){return this.$ws?this.$ws.getDuration():0},getCurrentTime:function(){return this.$ws?this.$ws.getCurrentTime():0},getProgress:function(){return this.getCurrentTime()/this.getDuration()},play:function(t,e){this.$ws&&this.$ws.play(Number(t),Number(e))},playPause:function(){this.$ws&&this.$ws.playPause()},skipBackward:function(){this.$ws&&this.$ws.skipBackward()},skipForward:function(){this.$ws&&this.$ws.skipForward()},skip:function(t){this.$ws&&this.$ws.skip(t)},zoom:function(t){this.$ws&&this.$ws.zoom(t)},seekAndCenter:function(t){this.$ws&&this.$ws.seekAndCenter(t)},seekTo:function(t){this.$ws&&this.$ws.seekTo(t)},seek:function(t,e){var i=this.getDuration(),n=t||0;n=t<=0?0:t,n=t>i?i:t;var r=0==n?0:n/i;e?this.seekAndCenter(r):this.seekTo(r)},addTier:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$vuewer.console.log("mixin:vuewer","add tier (key = ".concat(t,", type=").concat(e,")")),this.$ws&&this.$ws.addTier(t,e,i)},deleteTier:function(t){this.$ws&&(this.$ws.deleteTier(t),this.$vuewer.console.log("mixin:vuewer","delete tier (key=".concat(t,")")))},copyTier:function(t,e,i,n){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.$ws&&(this.$ws.copyTier(t,e,i,n,r),this.$vuewer.console.log("mixin:vuewer","copy tier (ref=".concat(t,", key=").concat(e,")")))},updateTier:function(t,e){this.$ws&&(this.$ws.updateTier(t,e),this.$vuewer.console.log("mixin:vuewer","update tier (key=".concat(t,", new key=").concat(name,", type=$.type})")))},addTierValue:function(t,e){this.$ws&&this.$ws.addTierValue(t,e)},setTierValue:function(t,e,i){this.$ws&&this.$ws.setTierValue(t,e,i)},deleteTierValue:function(t,e){this.$ws&&this.$ws.deleteTierValue(t,e)},playTextGrid:function(t,e){this.$ws&&this.$ws.playTextGrid(t,e)},loadTextGrid:function(t){this.$ws&&this.$ws.loadTextGrid(t)},downloadTextGrid:function(t){this.$ws&&this.$ws.downloadTextGrid(t)},$fire:function(t){if(this.$ws){var e=this.$ws.wavesurfer;if(e){var i=Object.keys(e.handlers||{}).findIndex((function(e){return e==t}));if(-1!=i)e.fireEvent(t);else{var n=this.$ws.wavesurfer.drawer,r=Object.keys(n.handlers||{}).findIndex((function(e){return e==t}));-1!=r&&n.fireEvent(t)}}}}}}},"2a04":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{titleColor:"green",fullscreen:t.$store.state.current.layout.mini,title:t.$vuetify.lang.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-text",[t.dialog?i("m-tier-edit-form",{ref:"form",attrs:{tiers:t.tiers,current:t.current},on:{validated:t.onValidated,reject:t.onReject}}):t._e()],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validate}},[t._v("Ok")])],1)],1)],1)},r=[],o=i("9621"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-autocomplete",{attrs:{rules:t.nameRule,items:t.tiers,label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.name")},model:{value:t.oldName,callback:function(e){t.oldName=e},expression:"oldName"}}),i("v-text-field",{attrs:{rules:t.newNameRUle,label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.name")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),i("v-autocomplete",{attrs:{items:t.typeChoice,"item-text":"name","item-value":"val",label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.type")},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)},s=[],c=(i("c975"),i("b0c0"),{name:"WTierEditFrom",data:function(){return{valid:!1,oldName:"",name:"",type:""}},watch:{oldName:function(t,e){if(t!==e){var i=this.$store.state.current.textgrid[t];this.name=t,this.type=i.type}},current:function(t,e){t!==e&&(this.oldName=t)}},props:{tiers:{type:Array},current:{type:String}},computed:{typeChoice:function(){return[{name:this.$vuetify.lang.t("$vuetify.textgrid.tier.interval"),val:"interval"},{name:this.$vuetify.lang.t("$vuetify.textgrid.tier.point"),val:"point"}]},nameRule:function(){var t=this,e=[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")},function(e){return t.checkNameNotExist(e)}];return e},newNameRUle:function(){var t=this,e=[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")},function(e){return t.checkName(e)}];return e},required:function(){var t=this;return this.$vuetify?[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")}]:[]}},methods:{checkNameNotExist:function(t){return t?-1!=this.tiers.indexOf(t)||this.$vuetify.lang.t("$vuetify.validations.notExist"):this.$vuetify.lang.t("$vuetify.validations.required")},checkName:function(t){return t?!(this.tiers.indexOf(t)>-1&&t!==this.oldName)||this.$vuetify.lang.t("$vuetify.validations.alreadyExists"):this.$vuetify.lang.t("$vuetify.validations.required")},run:function(){if(this.valid){var t={key:this.oldName,item:{name:this.name,type:this.type}};this.$emit("validated",t)}},validate:function(){this.$refs.form.validate(),this.run()},reset:function(){this.resetValidation()},resetValidation:function(){this.$refs.form.resetValidation()}},mounted:function(){this.current&&(this.oldName=this.current)}}),l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("c6a6"),h=i("4bd4"),v=i("8654"),p=Object(u["a"])(l,a,s,!1,null,"488dcfe5",null),g=p.exports;f()(p,{VAutocomplete:m["a"],VForm:h["a"],VTextField:v["a"]});var x=i("27a3"),y={name:"m-tier-edit-dialog",components:{MCardDialog:o["a"],MTierEditForm:g},mixins:[x["a"]],data:function(){return{title:"$vuetify.forms.tierEdit.title"}},props:{value:{type:Boolean},current:{type:String},tiers:{type:Array}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{dialog:function(t){0==t&&this.$refs.form.reset()}},methods:{close:function(){this.dialog=!1},validate:function(){this.$refs.form.validate()},onValidated:function(t){t.key&&this.updateTier(t.key,t.item),this.dialog=!1},onReject:function(){this.dialog=!1}}},b=y,w=i("8336"),$=i("b0af"),k=i("99d9"),_=i("2fa4"),S=Object(u["a"])(b,n,r,!1,null,"47b9091d",null);e["a"]=S.exports;f()(S,{VBtn:w["a"],VCard:$["a"],VCardActions:k["a"],VCardText:k["b"],VSpacer:_["a"]})},"2d28":function(t,e,i){t.exports=i.p+"img/logo2.e9a10c64.svg"},"2d5d":function(t,e,i){"use strict";i("d3b7"),i("3ca3"),i("ddb0"),i("96cf");var n=i("7580"),r=i("6d61"),o=i.n(r),a=i("9139"),s=function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,i){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=document.createElement("canvas"),n.width=i.width,n.height=i.height,t.next=5,a["a"].load(e);case 5:return r=t.sent,s=n.getContext("2d"),s.drawImage(r,0,0,i.width,i.height),t.abrupt("return",o.a.imread(n));case 9:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),c=function(t){var e=document.createElement("canvas");return o.a.imshow(e,t),e.toDataURL()},l=function(t,e){return new Promise((function(i,n){s(t,e).then((function(t){var e=new o.a.MatVector,r=new o.a.Mat,a=new o.a.Mat,s=new o.a.Mat;try{o.a.cvtColor(t,t,o.a.COLOR_RGBA2GRAY,0),o.a.findContours(t,e,r,o.a.RETR_CCOMP,o.a.CHAIN_APPROX_SIMPLE);for(var c=[],l=0;l<e.size();l++){var u=e.get(l),d=o.a.contourArea(u,!1);if(d>100){o.a.convexHull(u,a,!1,!1),o.a.convexityDefects(u,a,s);for(var f={id:l,area:d,lines:[],fars:[]},m=0;m<s.rows;++m)f.lines.push({start:{x:u.data32S[2*s.data32S[4*m]],y:u.data32S[2*s.data32S[4*m]+1]},end:{x:u.data32S[2*s.data32S[4*m+1]],y:u.data32S[2*s.data32S[4*m+1]+1]}}),f.fars.push({x:u.data32S[2*s.data32S[4*m+2]],y:u.data32S[2*s.data32S[4*m+2]+1]});c.push(f)}}i(c)}catch(h){n(h)}finally{e.delete(),r.delete(),a.delete(),s.delete()}}))}))},u=function(t,e){return new Promise((function(i,n){s(t,e).then((function(t){var e=new o.a.Mat,r=new o.a.MatVector,a=new o.a.Mat,s=new o.a.Mat,c=new o.a.Mat;try{o.a.cvtColor(t,t,o.a.COLOR_RGBA2GRAY,0),o.a.threshold(t,e,0,255,o.a.THRESH_BINARY+o.a.THRESH_OTSU),o.a.findContours(e,r,a,o.a.RETR_CCOMP,o.a.CHAIN_APPROX_SIMPLE);for(var l=[],u=0;u<r.size();u++){var d=r.get(u),f=o.a.contourArea(d,!1);if(f>3e4&&f<5e4){o.a.convexHull(d,s,!1,!1),o.a.convexityDefects(d,s,c);for(var m={id:u,area:f,concavos:[],convexes:[]},h=0;h<c.rows;++h)m.convexes.push({x:d.data32S[2*c.data32S[4*h]],y:d.data32S[2*c.data32S[4*h]+1]}),m.convexes.push({x:d.data32S[2*c.data32S[4*h+1]],y:d.data32S[2*c.data32S[4*h+1]+1]}),m.concavos.push({x:d.data32S[2*c.data32S[4*h+2]],y:d.data32S[2*c.data32S[4*h+2]+1]});l.push(m)}}i(l)}catch(v){n(v)}finally{t.delete(),e.delete(),r.delete(),a.delete(),s.delete(),c.delete()}}))}))},d=function(t,e){return new Promise((function(i,n){var r=o.a.ADAPTIVE_THRESH_GAUSSIAN_C,a=o.a.THRESH_BINARY;s(t,e).then((function(t){var e=new o.a.Mat;try{o.a.cvtColor(t,t,o.a.COLOR_RGBA2GRAY,0),o.a.adaptiveThreshold(t,e,200,r,a,3,2),i(c(e))}catch(s){n(s)}finally{t.delete(),e.delete()}}))}))},f=function(t,e){return new Promise((function(i,n){var r=o.a.THRESH_BINARY+o.a.THRESH_OTSU;s(t,e).then((function(t){var e=new o.a.Mat;try{o.a.cvtColor(t,t,o.a.COLOR_RGBA2GRAY,0),o.a.threshold(t,e,0,255,r),i(c(e))}catch(a){n(a)}finally{t.delete(),e.delete()}}))}))},m=function(t,e){return new Promise((function(i,n){s(t,e).then((function(t){var e=new o.a.Mat;try{o.a.cvtColor(t,t,o.a.COLOR_RGBA2RGB,0),o.a.bilateralFilter(t,e,9,75,75,o.a.BORDER_DEFAULT),i(c(e))}catch(r){n(r)}finally{t.delete(),e.delete()}}))}))},h=function(t,e){return new Promise((function(i,n){s(t,e).then((function(t){var e=new o.a.Mat;try{o.a.cvtColor(t,t,o.a.COLOR_RGB2GRAY,0),o.a.Laplacian(t,e,o.a.CV_8U,1,1,0,o.a.BORDER_DEFAULT),i(c(e))}catch(r){n(r)}finally{t.delete(),e.delete()}}))}))},v=function(t,e){return new Promise((function(i,n){s(t,e).then((function(t){var e=new o.a.Mat;try{o.a.cvtColor(t,t,o.a.COLOR_RGB2GRAY,0),o.a.Canny(t,e,50,100,3,!1),i(c(e))}catch(r){n(r)}finally{t.delete(),e.delete()}}))}))},p=function(t,e){return new Promise((function(i,n){s(t,e).then((function(t){var e=new o.a.Mat,r=new o.a.Mat,a=new o.a.Mat;try{var s=new o.a.Rect(0,50,250,150);o.a.cvtColor(t,t,o.a.COLOR_RGBA2RGB,0),o.a.grabCut(t,e,s,r,a,1,o.a.GC_INIT_WITH_RECT);for(var l=0;l<t.rows;l++)for(var u=0;u<t.cols;u++)0!=e.ucharPtr(l,u)[0]&&2!=e.ucharPtr(l,u)[0]||(t.ucharPtr(l,u)[0]=0,t.ucharPtr(l,u)[1]=0,t.ucharPtr(l,u)[2]=0);var d=new o.a.Scalar(0,0,255),f=new o.a.Point(s.x,s.y),m=new o.a.Point(s.x+s.width,s.y+s.height);o.a.rectangle(t,f,m,d),i(c(t))}catch(h){n(h)}finally{t.delete(),e.delete(),r.delete(),a.delete()}}))}))},g=function(t,e,i){return new Promise((function(n,r){var a=s(t,i),l=s(e,i);Promise.all([a,l]).then((function(t){var e=new o.a.Mat,i=new o.a.Mat,a=new o.a.Mat;try{o.a.cvtColor(t[0],i,o.a.COLOR_RGB2GRAY,0),o.a.cvtColor(t[1],a,o.a.COLOR_RGB2GRAY,0),o.a.absdiff(i,a,e),n(c(e))}catch(s){r(s)}finally{e.delete(),i.delete(),a.delete()}}))}))};e["a"]={findContours:l,convexDefects:u,grabCut:p,bilateralFilter:m,laplacianFilter:h,adaptiveThreshold:d,otsuThreshold:f,canny:v,frameDiff:g}},"2db4":function(t,e,i){"use strict";i("4de4"),i("c975"),i("a15b"),i("d81d"),i("13d5"),i("d3b7"),i("ac1f"),i("3ca3"),i("466d"),i("5319"),i("1276"),i("ddb0"),i("2b3d");var n=i("2fe6"),r=i("b192"),o=i("0bd7"),a=i("b23c"),s=i.n(a),c=i("be7e"),l=i.n(c),u=s.a.builder({dicPath:"/mri-vuewer.ver2/dict/"}),d=function(t){var e=/[\t|\x20\u3000|\s]+/g,i=/[Ａ-Ｚａ-ｚ０-９！＂＃＄％＆＇（）＊＋，－．／：；＜＝＞？＠［＼］＾＿｀｛｜｝]/g;return t.replace(e," ").replace(i,(function(t){return String.fromCharCode(t.charCodeAt(0)-65248)})).replace(/[‐－―]/g,"-").replace(/[～〜]/g,"~")},f=function(t){return d(t).replace(/^\s+|\s+$/g,"")},m=function(t){var e=/\s*[||,|+]\s*/g;return f(t).replace(/\s*[=|:]\s*/g,"=").replace(/\s*!=\s*/g,"!=").replace(e,"+").replace(/\s/g,"&")},h=function(t){return Object(o["a"])(new URLSearchParams(t).entries()).reduce((function(t,e){var i=e[1].indexOf(" ")>-1?e[1].split(" "):e[1];return Object(r["a"])(Object(r["a"])({},t),{},Object(n["a"])({},e[0],i||!0))}),{})},v=function(t){return h(m(t))},p={isSafe:function(t){return!!t.match(/^[0-9a-zA-Z|\s]*$/)}},g=function(t){return new Promise((function(e,i){try{u.build((function(n,r){n&&i(n);try{var o=r.tokenize(t);e(o)}catch(a){i(a)}}))}catch(n){i(n)}}))},x=function(t){return new Promise((function(e,i){g(t).then((function(t){t&&e(t.map((function(t){return t.surface_form||""}))),e([])})).catch((function(t){return i(t)}))}))},y=function(t){return new Promise((function(e,i){g(t).then((function(t){t&&e(t.map((function(t){return t.reading||t.surface_form}))),e([])})).catch((function(t){return i(t)}))}))},b=function(t){return new Promise((function(e,i){g(t).then((function(t){t&&e(t.map((function(t){return t.pronunciation||t.surface_form}))),e([])})).catch((function(t){return i(t)}))}))},w=function(t){return new Promise((function(e,i){g(t).then((function(t){t&&e(t.map((function(t){return t.basic_form||""}))),e([])})).catch((function(t){return i(t)}))}))},$=function(t){return new Promise((function(e,i){g(t).then((function(t){var i=t.map((function(t){var e=[t.pos,t.pos_detail_1,t.pos_detail_2,t.pos_detail_3].filter((function(t){return!!t&&"*"!=t}));return e.join("-")}));e(i)})).catch((function(t){return i(t)}))}))},k=function(t){return l.a.toHiragana(t)},_=function(t){var e=l.a.toHiragana(t);return l.a.toHebon(e).toLowerCase()};e["a"]={clean:d,trim:f,toParam:m,toQuery:h,query:v,checker:p,tokenize:g,owakati:x,oyomi:y,opronunciation:b,obasic:w,toHiragana:k,toHebon:_,opos:$}},3:function(t,e){},3377:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{persistent:"",title:"Complate Dict Upload Dialog"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-text",[i("v-form",[i("m-completes-file-input")],1)],1),i("v-list",t._l(t.complates,(function(e,n){return i("v-list-group",{key:n,scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(n)+" "),e.length>0?i("v-chip",{staticClass:"ml-2",attrs:{small:"",color:"info"}},[t._v(" "+t._s(e.length)+" ")]):t._e()],1)],1)]},proxy:!0}],null,!0)},t._l(e,(function(e){return i("v-list-item",{key:e.name},[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(e.name)+": "+t._s(e.rubi)+" ")])],1)],1)})),1)})),1)],1)],1)},r=[],o=i("9621"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-file-input",{attrs:{label:t.$vuetify.lang.t("$vuetify.io.completes.title")+"*",multiple:"",chips:"",accept:".dic,.text,.DIC,.TEXT"},on:{change:t.onChange},scopedSlots:t._u([{key:"selection",fn:function(e){e.index;var n=e.text;return[i("v-chip",{attrs:{color:"deep-purple accent-4",dark:"",label:"",small:""}},[t._v(" "+t._s(n)+" ")])]}}])})},s=[],c=(i("4de4"),i("a15b"),i("d81d"),i("b0c0"),i("d3b7"),i("ac1f"),i("3ca3"),i("5319"),i("1276"),i("498a"),i("ddb0"),i("0402")),l=(i("96cf"),i("7580")),u={name:"m-completes-file-input",methods:{onChange:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,o,a,s,l=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i={},n=Object(c["a"])(e),t.prev=2,n.s();case 4:if((r=n.n()).done){t.next=20;break}return o=r.value,a=o.name.split(".")[0],t.prev=7,t.next=10,this.readFile(o);case 10:if(s=t.sent,!s){t.next=13;break}return t.delegateYield(regeneratorRuntime.mark((function t(){var e,n,r,o,c,u,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=s.replace(/\r\n?/g,"\n").split("\n").filter((function(t){return""!==t})),n=l.$vuewer.text,r=n.checker.isSafe(e.join("")),!r){t.next=8;break}o=e.map((function(t){var e=n.trim(t);return{name:e,val:e,rubi:e}})),i[a]=o,t.next=15;break;case 8:return c=e.map((function(t){return n.trim(t)})),t.next=11,n.oyomi(c.join("&"));case 11:u=t.sent,d=n.clean(u.join(" ")).replace(/\s/g,"").split("&"),f=c.map((function(t,e){var i=d[e]?n.toHebon(d[e]):n.toHebon(t);return{name:t,val:t,rubi:i}})),i[a]=f;case 15:case"end":return t.stop()}}),t)}))(),"t0",13);case 13:t.next=18;break;case 15:t.prev=15,t.t1=t["catch"](7),console.log(t.t1);case 18:t.next=4;break;case 20:t.next=25;break;case 22:t.prev=22,t.t2=t["catch"](2),n.e(t.t2);case 25:return t.prev=25,n.f(),t.finish(25);case 28:this.$store.commit("current/complates/complates",i);case 29:case"end":return t.stop()}}),t,this,[[2,22,25,28],[7,15]])})));function e(e){return t.apply(this,arguments)}return e}(),readFile:function(t){return new Promise((function(e,i){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=i,n.readAsText(t)}))}}},d=u,f=i("2877"),m=i("6544"),h=i.n(m),v=i("cc20"),p=i("23a7"),g=Object(f["a"])(d,a,s,!1,null,"7c6ff1af",null),x=g.exports;h()(g,{VChip:v["a"],VFileInput:p["a"]});var y={name:"m-complates-dialog",components:{MCardDialog:o["a"],MCompletesFileInput:x},props:{value:{type:Boolean,default:!1}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},complates:function(){var t=this.$store.getters["current/complates/list"];return t}},methods:{close:function(){this.dialog=!1}}},b=y,w=i("8336"),$=i("b0af"),k=i("99d9"),_=i("4bd4"),S=i("132d"),C=i("8860"),T=i("56b0"),R=i("da13"),V=i("5d23"),P=Object(f["a"])(b,n,r,!1,null,"59e18e0c",null);e["a"]=P.exports;h()(P,{VBtn:w["a"],VCard:$["a"],VCardText:k["b"],VChip:v["a"],VForm:_["a"],VIcon:S["a"],VList:C["a"],VListGroup:T["a"],VListItem:R["a"],VListItemContent:V["b"],VListItemTitle:V["d"]})},3591:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text-center"},[i("v-progress-circular",{attrs:{size:100,width:10,color:"primary",indeterminate:""}}),i("div",{staticClass:"font-weight-light subtitle-1"},[t._v(" "+t._s(t.$vuetify.lang.t(t.text))+" ")])],1)},r=[],o={name:"m-loading",props:{text:{type:String,required:!0}}},a=o,s=i("2877"),c=i("6544"),l=i.n(c),u=i("490a"),d=Object(s["a"])(a,n,r,!1,null,"132098a9",null);e["a"]=d.exports;l()(d,{VProgressCircular:u["a"]})},"3aaa":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"pa-0 transparent",attrs:{fluid:""},on:{mouseover:function(e){return t.$emit("mouseover")}}},[i("m-key-context",{on:{keyup:function(e){return t.$emit("keyup",e)}}},[i("v-tabs",{attrs:{dark:"",grow:"","show-arrows":"","center-active":"","background-color":t.color},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t._l(t.tabs,(function(e,n){return i("v-tab",{key:n},[t._v(" "+t._s(e.text)+" "),e.icon?i("v-icon",{staticClass:"ml-2",attrs:{small:""}},[t._v(t._s(e.icon))]):t._e()],1)})),i("v-tabs-slider",{attrs:{color:"yellow"}})],2),i("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab-item",[i("m-frame-table",{attrs:{"video-height":t.videoHeight,frames:t.frames},on:{"click-image-edit":function(e){return t.$emit("click-image-edit",e)},"click-ruler":function(e){return t.$emit("click-ruler",e)}}})],1),t._l(t.tiers,(function(e){return i("v-tab-item",{key:e},[i("m-text-grid-table",{attrs:{"video-height":t.videoHeight,title:e,tier:t.textgrid[e]},on:{"click-image-edit":function(e){return t.$emit("click-image-edit",e)}}})],1)}))],2)],1)],1)},r=[],o=(i("c740"),i("b64b"),i("0402")),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{staticClass:"overflow-y-auto",style:"max-height: "+(t.videoHeight-64||0)+"px",attrs:{headers:t.headers,items:t.items,"items-per-page":-1,search:t.keyword,"hide-default-footer":"","sort-by":"time"},scopedSlots:t._u([{key:"item.time",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.time)+" ")])]}},{key:"item.start",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.start)+" ")])]}},{key:"item.end",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.end)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("m-loading-dialog",{ref:"loading"},[i("p",[t._v(t._s(t.$vuetify.lang.t("$vuetify.loading")))])]),t.tier&&"point"==t.tier.type?i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.seek(n.time)}}},[i("v-icon",[t._v(" mdi-format-horizontal-align-right ")])],1):t._e(),t.tier&&"point"==t.tier.type?i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":"",color:"orange"},on:{click:function(e){return t.$emit("click-image-edit",n.time)}}},[i("v-icon",[t._v("mdi-selection-drag")])],1):t._e(),t.tier&&"interval"==t.tier.type?i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.play(n.start,n.end)}}},[i("v-icon",[t._v(" mdi-play ")])],1):t._e(),t.tier&&"interval"==t.tier.type?i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.trimVideo(n.start,n.end)}}},[i("v-icon",[t._v(" mdi-scissors-cutting ")])],1):t._e(),i("v-btn",{attrs:{color:"error",fab:"",dark:"","x-small":""},on:{click:function(e){return t.deleteItem(n)}}},[i("v-icon",[t._v(" mdi-delete ")])],1)]}},{key:"no-data",fn:function(){return[i("v-alert",{attrs:{type:"warning"}},[t._v(" No Data ")])]},proxy:!0}])})},s=[],c=i("1188"),l=c["a"],u=i("2877"),d=i("6544"),f=i.n(d),m=i("0798"),h=i("8336"),v=i("8fea"),p=i("132d"),g=Object(u["a"])(l,a,s,!1,null,"2cd73998",null),x=g.exports;f()(g,{VAlert:m["a"],VBtn:h["a"],VDataTable:v["a"],VIcon:p["a"]});var y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{staticClass:"overflow-y-auto",style:"max-height: "+(t.videoHeight-64||0)+"px",attrs:{headers:t.headers,items:t.frames,"items-per-page":-1,"sort-by":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.time",fn:function(e){var n=e.item;return[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[i("span",t._g(t._b({staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"45px"}},"span",o,!1),r),[t._v(" "+t._s(n.time)+" ")])]}}],null,!0)},[i("span",[t._v(t._s(n.time))])])]}},{key:"item.points",fn:function(e){var n=e.item;return[n.points?i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.points.length)+" ")]):i("span",[t._v("0")])]}},{key:"item.rects",fn:function(e){var n=e.item;return[n.rects?i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.rects.length)+" ")]):i("span",[t._v("0")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.seek(n.time)}}},[i("v-icon",[t._v(" mdi-format-horizontal-align-right ")])],1),i("v-btn",{staticClass:"mr-1",attrs:{fab:"",dark:"","x-small":"",color:"orange"},on:{click:function(e){return t.$emit("click-image-edit",n.time)}}},[i("v-icon",[t._v("mdi-selection-drag")])],1)]}},{key:"no-data",fn:function(){return[i("v-alert",{attrs:{type:"warning"}},[t._v(" No Data ")])]},proxy:!0}])})},b=[],w=i("27a3"),$={name:"m-frame-table",mixins:[w["a"]],props:{videoHeight:{default:null},frames:{type:Array,default:function(){return[]}}},data:function(){return{rulerDialog:!1,headers:[{text:"id",value:"idx"},{text:"time",value:"time"},{text:"points",value:"points"},{text:"rects",value:"rects"},{text:"Actions",value:"actions",sortable:!1,align:"end"}]}},methods:{onClickRuler:function(t){this.$emit("click-ruler",t.time)}}},k=$,_=i("3a2f"),S=Object(u["a"])(k,y,b,!1,null,"476c9b36",null),C=S.exports;f()(S,{VAlert:m["a"],VBtn:h["a"],VDataTable:v["a"],VIcon:p["a"],VTooltip:_["a"]});var T=i("6b13"),R={name:"WTextGrid",mixins:{MWavesurferMixin:w["a"]},components:{MKeyContext:T["a"],MTextGridTable:x,MFrameTable:C},props:{color:{type:String,default:"primary"},videoHeight:{default:null},textgrid:{type:Object,default:function(){return{}}},frames:{type:Array,default:function(){return[]}}},computed:{tab:{get:function(){return this.$store.state.current.tab},set:function(t){this.$store.commit("current/tab",t)}},parents:function(){var t=[];if(this.textgrid)for(var e in this.textgrid)this.textgrid[e].parent&&t.push(this.textgrid[e].parent);return this.$vuewer.math.uniq(t)},children:function(){var t=[];if(this.textgrid)for(var e in this.textgrid)this.textgrid[e].parent&&t.push(e);return this.$vuewer.math.uniq(t)},tiers:function(){return this.textgrid?Object.keys(this.textgrid):[]},tabs:function(){var t,e=this,i=[{text:"FRAMES"}],n=Object(o["a"])(this.tiers);try{var r=function(){var n=t.value,r=-1!=e.parents.findIndex((function(t){return t==n})),o=-1!=e.children.findIndex((function(t){return t==n})),a=r?"mdi-link-lock":o?"mdi-link":"";i.push({text:n,icon:a})};for(n.s();!(t=n.n()).done;)r()}catch(a){n.e(a)}finally{n.f()}return i}}},V=R,P=i("a523"),I=i("71a3"),O=i("c671"),j=i("fe57"),E=i("aac8"),D=i("9a96"),M=Object(u["a"])(V,n,r,!1,null,"03b4ef54",null);e["a"]=M.exports;f()(M,{VContainer:P["a"],VIcon:p["a"],VTab:I["a"],VTabItem:O["a"],VTabs:j["a"],VTabsItems:E["a"],VTabsSlider:D["a"]})},"3b4d":function(t,e,i){"use strict";i("d3b7"),i("ac1f"),i("1276");var n=i("0032"),r=i("d623"),o={key:Object({NODE_ENV:"production",VUE_APP_KUROMOJI_DICT:"/mri-vuewer.ver2/dict/",VUE_APP_DROPBOX_REDIRECT:"https://kikuchiken-waseda.github.io/mri-vuewer.ver2",BASE_URL:"/mri-vuewer.ver2/"}).VUE_APP_DROPBOX_KEY,redirect:"https://kikuchiken-waseda.github.io/mri-vuewer.ver2",token:r["a"].dropbox.get("token")},a=new n["Dropbox"]({fetch:fetch,clientId:o.key,accessToken:o.token}),s=function(){var t=a.getAuthenticationUrl("https://kikuchiken-waseda.github.io/mri-vuewer.ver2");window.location.href=t},c=function(t){var e=t.split("&")[0].split("=");if("#access_token"==e[0]){var i=t.split("&")[0].split("=")[1];o.token=i,r["a"].dropbox.set("token",i),a=new n["Dropbox"]({clientId:o.key,accessToken:o.token})}},l=function(t){return new Promise((function(e,i){a.filesListFolder({path:t}).then((function(t){return e(t)})).catch((function(t){return i(t)}))}))},u=function(t,e){return new Promise((function(i,n){a.filesUpload({path:"/"+t,contents:e,mode:"overwrite"}).then((function(t){return i(t)})).catch((function(t){return n(t)}))}))},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(i,n){a.filesDownload({path:t}).then((function(t){if(t.fileBlob)if(e)i(t.fileBlob);else{var r=new FileReader;r.onerror=function(){r.abort();var t=new Error("LOAD ERROR");n({status:500,error:t})},r.onload=function(){i(r.result)},r.readAsText(t.fileBlob)}else{var o=new Error("API ERROR");n({status:500,error:o})}})).catch((function(t){return n(t)}))}))};e["a"]={auth:s,hasToken:function(){return!!r["a"].dropbox.get("token")},setToken:c,write:u,read:d,get:l}},4:function(t,e){},4009:function(t,e,i){"use strict";e["a"]={computed:{videoName:{get:function(){return this.$store.state.current.video.filename}},videoSource:{get:function(){return this.$store.state.current.video.source}},fps:{get:function(){return this.$store.state.current.video.fps}},duration:{get:function(){return this.$store.state.current.video.duration}},videoStream:{get:function(){return this.$store.state.current.video.videoStream}},audioStream:{get:function(){return this.$store.state.current.video.audioStream}},originSize:{get:function(){return this.$store.state.current.video.originSize}}}}},"41e7":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{attrs:{bottom:"",left:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",icon:""}},"v-btn",r,!1),n),[i("v-icon",[t._v("mdi-upload")])],1)]}}])},[i("m-video-upload-list",{on:{click:function(e){return t.$emit("click",e)}}})],1)},r=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",{attrs:{dense:""}},[i("input",{ref:"input",staticStyle:{display:"none"},attrs:{accept:t.clicked.accept,type:"file"},on:{change:t.onChange}}),i("v-list-group",{on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.textgrid.name"))+" ")])],1)]},proxy:!0}]),model:{value:t.showTextGrid,callback:function(e){t.showTextGrid=e},expression:"showTextGrid"}},t._l(t.textgrid,(function(e,n){return i("v-list-item",{key:n,on:{click:function(i){return t.onClick(e)}}},[i("v-list-item-title",[t._v(t._s(e.text))])],1)})),1),i("v-list-group",{on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.ver1"))+" ")])],1)]},proxy:!0}]),model:{value:t.showVer1,callback:function(e){t.showVer1=e},expression:"showVer1"}},t._l(t.ver1,(function(e,n){return i("v-list-item",{key:n,on:{click:function(i){return t.onClick(e)}}},[i("v-list-item-title",[t._v(t._s(e.text))])],1)})),1),i("v-list-group",{on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.frame.name"))+" ")])],1)]},proxy:!0}]),model:{value:t.showPoint,callback:function(e){t.showPoint=e},expression:"showPoint"}},t._l(t.point,(function(e,n){return i("v-list-item",{key:n,on:{click:function(i){return t.onClick(e)}}},[i("v-list-item-title",[t._v(t._s(e.text))])],1)})),1)],1)},a=[],s={name:"m-video-upload-list",data:function(){return{showTextGrid:!0,showVer1:!1,showPoint:!1,clicked:{text:"",val:"",accept:""},ver1:[{text:"JSON (VER1)",val:"TEXTGRID/JSON/VER1",accept:"application/json"},{text:"JSON (VER1: LEFT)",val:"TEXTGRID/JSON/VER1/LEFT",accept:"application/json"},{text:"JSON (VER1: RIGHT)",val:"TEXTGRID/JSON/VER1/RIGHT",accept:"application/json"},{text:"JSON (VER1: UP-DOWN)",val:"TEXTGRID/JSON/VER1/UP-DOWN",accept:"application/json"}],textgrid:[{text:"TEXTGRID",val:"TEXTGRID/TEXTGRID",accept:".TextGrid"},{text:"JSON",val:"TEXTGRID/JSON",accept:"application/json"}],point:[{text:"XLSX (点群データ)",val:"POINTS/XLSX",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{text:"XY",val:"POINTS/XY",accept:".xy,.XY"}]}},methods:{onClick:function(t){var e=this;this.clicked=t,this.$nextTick((function(){e.$refs.input.click()}))},onChange:function(){var t={click:this.clicked.val,files:this.$refs.input.files};this.$emit("click",t)}}},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("8860"),m=i("56b0"),h=i("da13"),v=i("5d23"),p=Object(l["a"])(c,o,a,!1,null,null,null),g=p.exports;d()(p,{VList:f["a"],VListGroup:m["a"],VListItem:h["a"],VListItemContent:v["b"],VListItemTitle:v["d"]});var x={name:"m-video-upload-menu",components:{MVideoUploadList:g}},y=x,b=i("8336"),w=i("132d"),$=i("e449"),k=Object(l["a"])(y,n,r,!1,null,null,null);e["a"]=k.exports;d()(k,{VBtn:b["a"],VIcon:w["a"],VMenu:$["a"]})},4678:function(t,e,i){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=o(t);return i(e)}function o(t){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}r.keys=function(){return Object.keys(n)},r.resolve=o,t.exports=r,r.id="4678"},"4a48":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-autocomplete",{ref:"text",attrs:{dense:"","hide-no-data":"","hide-details":"",outlined:"",solo:"",disabled:t.disabled,filter:t.autocomplete,items:t.choices,"item-text":"name","item-value":"val"},on:{keydown:[function(t){t.stopPropagation()},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void 0)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),e.altKey?t.onNext(e):null)},function(e){return(e.type.indexOf("key")||219===e.keyCode)&&e.ctrlKey?t.$emit("esc"):null},function(e){return e.type.indexOf("key")||27===e.keyCode?(e.preventDefault(),t.$emit("esc")):null}]},scopedSlots:t._u([{key:"item",fn:function(e){return[i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(e.item.name)}}),i("v-list-item-subtitle",{domProps:{textContent:t._s(e.item.rubi)}})],1)]}}]),model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})},r=[],o=(i("4de4"),i("c740"),i("a15b"),i("d81d"),i("d3b7"),i("6062"),i("3ca3"),i("2ca0"),i("ddb0"),i("0bd7")),a={name:"m-record-text-field",props:{value:{validator:function(t){return"string"===typeof t||null===t},required:!0},complateKey:{validator:function(t){return"string"===typeof t||null===t},default:""},disabled:{type:Boolean,default:!1}},computed:{text:{get:function(){return this.value},set:function(t){t?this.$emit("input",t):this.$emit("input","")}},choices:function(){var t=this,e=[],i=this.complateKey,n=this.$store.state.current.complates.complates;n[i]&&e.push.apply(e,Object(o["a"])(n[i]));var r=this.$store.state.current.textgrid;if(null!=r&&i in r){var a=Object(o["a"])(new Set(this.$store.state.current.textgrid[i].values.map((function(t){return t.text})).filter((function(t){var i=e.findIndex((function(e){return e.val==t}));return-1===i}))));e.push.apply(e,Object(o["a"])(a.map((function(e){return{name:e,val:e,rubi:e?t.$vuewer.text.toHebon(e):""}}))))}return e}},methods:{autocomplete:function(t,e){var i=t.rubi.toLowerCase(),n=t.val.toLowerCase(),r=e.toLowerCase();return i.startsWith(r)||n.startsWith(r)},setText:function(){var t=Object(o["a"])(this.$refs.text.$el.getElementsByTagName("input")).filter((function(t){return"text"==t.type})),e=this.$vuewer.text.clean(t.map((function(t){return t.value})).join(""));this.text=e||""},onNext:function(){this.setText(),this.$emit("next")},onEnter:function(){this.setText(),this.$emit("enter")},blur:function(){this.$refs.text.blur()},focus:function(){this.$refs.text.focus()}}},s=a,c=i("2877"),l=i("6544"),u=i.n(l),d=i("c6a6"),f=i("5d23"),m=Object(c["a"])(s,n,r,!1,null,"f75c19a8",null);e["a"]=m.exports;u()(m,{VAutocomplete:d["a"],VListItemContent:f["b"],VListItemSubtitle:f["c"],VListItemTitle:f["d"]})},5:function(t,e){},"531d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"mx-auto",attrs:{color:t.color,flat:t.flat,tile:t.tile}},[t.accordion?i("v-system-bar",{attrs:{color:t.titleColor+" darken-2",window:"",dark:""}},[i("v-spacer"),t.isCloseing?i("v-icon",{on:{click:function(e){return e.preventDefault(),t.open(e)}}},[t._v(" mdi-window-maximize ")]):i("v-icon",{on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v(" mdi-window-minimize ")])],1):t._e(),t.title?i("v-toolbar",{attrs:{dense:t.dense,color:t.titleColor,dark:""}},[t.prependIcon?i("v-icon",{staticClass:"mr-2",attrs:{color:t.prependIconColor}},[t._v(" "+t._s(t.prependIcon)+" ")]):t._e(),i("v-toolbar-title",[t._v(t._s(t.title))]),i("v-spacer"),t._t("toolbar-actions",t._l(t.toolbarActions,(function(e,n){return i("v-btn",{key:n,attrs:{icon:""},on:{click:e.action}},[i("v-icon",[t._v(t._s(e.icon))])],1)})))],2):t._e(),i("v-expand-transition",[t.isCloseing?t._e():t._t("default")],2)],1)},r=[],o=(i("a623"),i("d81d"),{name:"MTCard",data:function(){return{isCloseing:!1}},methods:{close:function(){this.isCloseing=!0},open:function(){this.isCloseing=!1}},props:{title:{type:String},tile:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},accordion:{type:Boolean,default:!1},prependIcon:{type:String,default:""},color:{type:String,default:"white"},titleColor:{type:String,default:"primary"},prependIconColor:{type:String,default:""},toolbarActions:{type:Array,validator:function(t){if(0==t.length)return!0;var e=t.map((function(t){return"icon"in t&&"action"in t}));return e.every((function(t){return t}))},default:function(){return[]}}}}),a=o,s=i("2877"),c=i("6544"),l=i.n(c),u=i("8336"),d=i("b0af"),f=i("0789"),m=i("132d"),h=i("2fa4"),v=i("afd9"),p=i("71d9"),g=i("2a7f"),x=Object(s["a"])(a,n,r,!1,null,"0a5950fe",null);e["a"]=x.exports;l()(x,{VBtn:u["a"],VCard:d["a"],VExpandTransition:f["a"],VIcon:m["a"],VSpacer:h["a"],VSystemBar:v["a"],VToolbar:p["a"],VToolbarTitle:g["a"]})},"548c":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{titleColor:"grey darken-4",title:t.$vuetify.lang.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("m-video-upload-menu",{on:{click:function(e){return t.$emit("upload-click",e)}}}),i("m-video-download-menu",{on:{click:function(e){return t.$emit("download-click",e)}}})]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{tile:""}},[t.src?i("v-img",{staticClass:"white--text align-end",attrs:{src:t.src,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"200px"}},[i("v-card-title",{staticClass:"py-0"},[t._v(t._s(t.videoName))]),i("v-card-title",{staticClass:"py-0"},[t._v(" "+t._s(t.duration)+" sec: "+t._s(t.fps)+" fps ["+t._s(t.originSize.width)+" x "+t._s(t.originSize.height)+"] ")])],1):t._e(),i("m-video-stream-list",{attrs:{"video-stream":t.videoStream}}),i("v-divider",{attrs:{inset:""}}),i("m-audio-stream-list",{attrs:{"audio-stream":t.audioStream}}),i("v-divider",{attrs:{inset:""}}),i("v-list",{attrs:{subheader:""}},[i("v-subheader",[t._v("MetaData")]),t._l(t.metaData,(function(e){return i("v-list-item",{key:e.key},[i("v-list-item-avatar",[i("v-icon")],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(e.key.toUpperCase())+": ")])],1),i("v-list-item-action",[t._v(" "+t._s(e.val)+" ")])],1)})),i("v-divider",{attrs:{inset:""}})],2)],1)],1)},r=[],o=(i("d81d"),i("b64b"),i("9621")),a=i("5c65"),s=i("41e7"),c=i("94d2"),l=i("0bad"),u=i("4009"),d={name:"m-detail-dialog",mixins:[u["a"]],components:{MCardDialog:o["a"],MVideoDownloadMenu:a["a"],MVideoUploadMenu:s["a"],MVideoStreamList:c["a"],MAudioStreamList:l["a"]},data:function(){return{title:"$vuetify.forms.detail.title"}},props:{value:{type:Boolean,required:!0}},computed:{metaData:function(){var t=this.$store.state.current.metaData;return t?Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]},src:function(){return this.$store.state.current.frame.src},dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},f=d,m=i("2877"),h=i("6544"),v=i.n(h),p=i("b0af"),g=i("99d9"),x=i("ce7e"),y=i("132d"),b=i("adda"),w=i("8860"),$=i("da13"),k=i("1800"),_=i("8270"),S=i("5d23"),C=i("e0c7"),T=Object(m["a"])(f,n,r,!1,null,"afb11cf0",null);e["a"]=T.exports;v()(T,{VCard:p["a"],VCardTitle:g["c"],VDivider:x["a"],VIcon:y["a"],VImg:b["a"],VList:w["a"],VListItem:$["a"],VListItemAction:k["a"],VListItemAvatar:_["a"],VListItemContent:S["b"],VListItemTitle:S["d"],VSubheader:C["a"]})},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("m-app-bar"),i("m-navigation-drawer"),i("v-main",[i("router-view"),i("m-logging-seet"),i("m-app-snackbar"),i("m-app-loading-dialog")],1)],1)},o=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app-bar",{staticStyle:{"z-index":"99"},attrs:{app:"",color:"primary",dark:""}},[i("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),t.$vuetify.breakpoint.smAndUp?i("v-toolbar-title",[t._v(" "+t._s(t.title)+" ")]):t._e(),i("v-spacer"),t.isSearch?i("v-text-field",{attrs:{flat:"",rounded:"",solo:"","hide-details":"",label:"Search","background-color":"primary lighten-1","prepend-inner-icon":"mdi-magnify","append-icon":t.recIcon},on:{"click:append":t.rec},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}):t._e(),t.$vuetify.breakpoint.smAndUp?i("v-spacer"):t._e(),t.$store.state.current.layout.mini?t._e():i("v-toolbar-title",{staticClass:"mr-3"},[t._v(" "+t._s(t.fileInfo)+" ")]),t.$vuetify.breakpoint.smAndUp?i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.to({name:"Home"})}}},[i("v-icon",[t._v("mdi-home")])],1):t._e(),t.$vuetify.breakpoint.smAndUp?i("v-btn",{attrs:{icon:"",target:"_blank",rel:"noopener noreferrer",href:t.$store.state.github}},[i("v-icon",[t._v("mdi-github")])],1):t._e(),t.$vuetify.breakpoint.smAndUp?i("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",icon:""}},"v-btn",r,!1),n),[i("v-icon",[t._v("mdi-translate")])],1)]}}],null,!1,2812120649)},[i("v-list",[i("v-list-item",{on:{click:function(e){t.$vuetify.lang.current="en"}}},[i("v-list-item-title",[t._v("English")])],1),i("v-list-item",{on:{click:function(e){t.$vuetify.lang.current="ja"}}},[i("v-list-item-title",[t._v("日本語")])],1)],1)],1):t._e()],1)},s=[],c=(i("99af"),i("b0c0"),i("b680"),i("ac1f"),i("841c"),i("1276"),{name:"MAppBar",computed:{name:{get:function(){return this.$store.state.appName}},version:{get:function(){return this.$store.state.appVersion}},title:function(){return"".concat(this.name," ver ").concat(this.version)},isSearch:function(){return this.$store.state.search.show},keyword:{get:function(){return this.$store.state.search.input},set:function(t){this.$store.commit("search/input",t)}},fileInfo:function(){var t=this.$store.state.current.name;if(t){var e=t.split(".")[0],i=this.$store.state.current.fps,n=this.$store.state.current.frame.time,r=n?": ".concat(n.toFixed(4)," sec"):"";return"".concat(e,": ").concat(i," fps ").concat(r)}return null},drawer:{get:function(){return this.$store.state.drawer},set:function(t){this.$store.commit("drawer",t)}},recog:function(){return window.webkitSpeechRecognition||window.SpeechRecognition||null},recIcon:function(){return this.recog?"mdi-microphone":null}},methods:{rec:function(){var t=this;if(this.recog){this.keyword="";var e=new this.recog;e.lang="ja"==this.$vuetify.lang.current?"ja-JP":"en-US",e.onresult=function(e){e.results[0].isFinal&&(t.keyword=e.results[0][0].transcript)},e.start()}else this.$vuewer.snackbar.warn(this.$vuetify.lang.t("$vuetify.contexts.browserError"))},to:function(t){t.name&&this.$route.name!==t.name&&this.$router.push(t)}}}),l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("40dc"),h=i("5bc1"),v=i("8336"),p=i("132d"),g=i("8860"),x=i("da13"),y=i("5d23"),b=i("e449"),w=i("2fa4"),$=i("8654"),k=i("2a7f"),_=Object(u["a"])(l,a,s,!1,null,"5bead7cd",null),S=_.exports;f()(_,{VAppBar:m["a"],VAppBarNavIcon:h["a"],VBtn:v["a"],VIcon:p["a"],VList:g["a"],VListItem:x["a"],VListItemTitle:y["d"],VMenu:b["a"],VSpacer:w["a"],VTextField:$["a"],VToolbarTitle:k["a"]});var C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{staticClass:"py-0",attrs:{app:"",temporary:"",width:"400px"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",{attrs:{dense:"",nav:"",color:"blue-grey",dark:""}},[n("v-list-item")],1),n("v-list",{attrs:{dense:"",nav:"",color:"blue-grey",dark:""}},[n("v-list-item",{attrs:{"two-line":""}},[n("v-list-item-avatar",[n("v-img",{attrs:{src:i("2d28")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.$store.state.appName))]),n("v-list-item-subtitle",[t._v(" Copyright © "+t._s(t.$store.state.devYear)+" by "+t._s(t.$store.state.author)+" ")])],1)],1),t.files.length?n("v-list-item",{staticClass:"ma-0 py-0"},[n("v-list-item-content",[n("v-text-field",{attrs:{"single-line":"",rounded:"","solo-inverted":"",dense:"","hide-details":"",label:"File Name","prepend-inner-icon":"mdi-magnify"},on:{focus:function(e){t.open.files=!0}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1):t._e()],1),n("v-divider"),n("v-list",{staticClass:"pa-0",attrs:{dense:"",nav:""}},[n("v-list-group",{attrs:{"prepend-icon":"mdi-view-list","sub-group":"",value:"true"},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("PAGES")])]},proxy:!0}]),model:{value:t.open.pages,callback:function(e){t.$set(t.open,"pages",e)},expression:"open.pages"}},[n("v-divider"),t._l(t.pages,(function(e){return n("v-list-item",{key:e.title,attrs:{link:""},on:{click:e.to}},[n("v-list-item-icon",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),n("v-list",{staticClass:"pa-0",attrs:{dense:"",nav:""}},[n("v-list-item",{attrs:{link:""},on:{click:function(e){return t.$store.commit("logging/show",!0)}}},[n("v-list-item-icon",[n("v-icon",[t._v(" mdi-console ")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.logger"))+" ")])],1)],1)],1)],2),n("v-divider"),t.isLoading?n("v-list-item",{attrs:{"sub-group":""}},[n("v-list-item-icon"),n("v-list-item-title",[t._v(" Loading files... ")]),n("v-list-item-action",[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1)],1):t.files.length?n("v-list-group",{attrs:{"sub-group":"","prepend-icon":"mdi-menu-open"},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v(" FILES "),t.open.files?t._e():n("v-chip",{staticClass:"ml-2",attrs:{small:"",color:"info"}},[t._v(" "+t._s(t.files.length)+" ")])],1)]},proxy:!0}]),model:{value:t.open.files,callback:function(e){t.$set(t.open,"files",e)},expression:"open.files"}},[n("v-divider"),t._l(t.files,(function(e){return n("v-list-item",{key:e.id,class:t.activeFile==e.id?"highlight":"",attrs:{"two-line":""},on:{click:function(i){return t.to({id:e.id})}}},[n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(e.name)+" "),Object.keys(e.textgrid).length>0?n("v-chip",{staticClass:"ml-2",attrs:{"x-small":"",color:"success"}},[t._v(" "+t._s(Object.keys(e.textgrid).length)+" Tiers ")]):t._e()],1),n("v-list-item-subtitle",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.lastModifiedAt"))+": "+t._s(e.lastModifiedText)+" ")])],1),n("v-list-item-action",[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(i){return i.stopPropagation(),t.fileDestroy(e)}}},[n("v-icon",{attrs:{small:"",color:"error"}},[t._v("mdi-delete")])],1)],1)],1)}))],2):t._e(),n("v-divider"),t.isLoading?t._e():n("v-list-group",{attrs:{"prepend-icon":"mdi-dropbox","sub-group":"",value:!1},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("DROPBOX")])]},proxy:!0}],null,!1,2035268283),model:{value:t.open.dropboxes,callback:function(e){t.$set(t.open,"dropboxes",e)},expression:"open.dropboxes"}},[n("v-list-item",{attrs:{link:""},on:{click:t.dropboxAuth}},[n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.dropbox.auth"))+" ")])],1),n("v-list-item-action",[t.hasToken?n("v-chip",{attrs:{small:"",color:"success"}},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.dropbox.connected"))+" ")]):t._e()],1)],1),t.hasToken?n("v-list-item",{attrs:{link:""},on:{click:t.loadDropbox}},[n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.dropbox.load"))+" ")])],1),n("v-list-item-action",[this.diff.length?n("v-chip",{attrs:{small:"",color:"success"}},[t._v(" + "+t._s(this.diff.length)+" ")]):t._e()],1)],1):t._e()],1),n("v-list-group",{attrs:{"prepend-icon":"mdi-database","sub-group":"",value:!1},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("DATABASE")])]},proxy:!0}]),model:{value:t.open.databases,callback:function(e){t.$set(t.open,"databases",e)},expression:"open.databases"}},[n("v-list-item",{attrs:{link:""},on:{click:t.dbAdd}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-database-plus")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.db.add"))+" ")])],1)],1),n("v-list-item",{attrs:{link:""},on:{click:t.dbDump}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-database-export")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.db.dump"))+" ")])],1)],1),n("v-list-item",{attrs:{link:""},on:{click:t.dbLoad}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-database-import")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.db.load"))+" ")])],1)],1),n("v-list-item",{attrs:{link:""},on:{click:t.dbClear}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"error"}},[t._v("mdi-database-remove")])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"error--text"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.pages.db.clear"))+" ")])],1)],1)],1),n("v-divider"),n("v-list-group",{attrs:{"prepend-icon":"mdi-file-swap","sub-group":"",value:!1},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("CONVERTER")])]},proxy:!0}]),model:{value:t.open.convarters,callback:function(e){t.$set(t.open,"convarters",e)},expression:"open.convarters"}},t._l(t.converters,(function(e){return n("v-list-item",{key:e.text,attrs:{link:""},on:{click:e.function}},[n("v-list-item-icon",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.text))])],1)],1)})),1),n("v-divider"),t.$showDev?n("v-list-group",{attrs:{"prepend-icon":"mdi-flask","sub-group":"",value:!1},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("DEVELOP")])]},proxy:!0}],null,!1,1812153606),model:{value:t.open.depelops,callback:function(e){t.$set(t.open,"depelops",e)},expression:"open.depelops"}},t._l(t.developPages,(function(e){return n("v-list-item",{key:e.title,attrs:{link:""},on:{click:e.to}},[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.title))])],1)],1)})),1):t._e(),n("v-divider"),n("v-list-group",{attrs:{"prepend-icon":"mdi-library","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-title",[t._v("Docs")])]},proxy:!0}]),model:{value:t.open.docs,callback:function(e){t.$set(t.open,"docs",e)},expression:"open.docs"}},[n("v-divider"),t._l(t.docs,(function(e){return n("v-list-item",{key:e.title,attrs:{href:e.link,target:"_blank",rel:"noopener noreferrer",link:""}},[n("v-list-item-content",[n("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t(e.title))+" ")])],1)],1)}))],2)],1),n("m-file-upload-dialog",{model:{value:t.uploadDialog,callback:function(e){t.uploadDialog=e},expression:"uploadDialog"}}),n("m-db-import-dialog",{model:{value:t.dbImportDialog,callback:function(e){t.dbImportDialog=e},expression:"dbImportDialog"}}),n("m-dropbox-dialog",{model:{value:t.dropboxDialog,callback:function(e){t.dropboxDialog=e},expression:"dropboxDialog"}})],1)},T=[],R=(i("4de4"),i("c975"),i("d81d"),i("a9e3"),i("b64b"),i("d3b7"),i("498a"),i("0402")),V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{persistent:"",title:t.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.dialog?i("m-video-regist-from",{on:{loaded:t.onLoaded,error:t.onError}}):t._e()],1)},P=[],I=i("9621"),O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stepper",{model:{value:t.e1,callback:function(e){t.e1=e},expression:"e1"}},[i("v-stepper-header",[t._l(t.nSteps,(function(e){return[i("v-stepper-step",{key:e+"-step",attrs:{step:e}}),e!==t.nSteps?i("v-divider",{key:e}):t._e()]}))],2),i("v-stepper-items",[i("v-stepper-content",{staticClass:"pb-0",attrs:{step:"1"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"ml-2"},[t._v(t._s(t.stepName))]),i("m-help",{attrs:{text:"$vuetify.forms.video.desc.select"}})],1),i("v-card-text",[1==t.e1?i("m-video-file-form",{on:{validated:t.onValidateVideo}}):t._e()],1)],1)],1),i("v-stepper-content",{attrs:{step:"2"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"ml-2"},[t._v(t._s(t.stepName))]),i("m-help",{attrs:{text:"$vuetify.forms.video.desc.confirmation"}})],1),i("v-card-text",[2==t.e1?i("m-video-codec-form",{ref:"codecForm",attrs:{value:t.video},on:{validated:t.onValidateCodec}}):t._e()],1),i("v-card-actions",[i("v-btn",{attrs:{text:""},on:{click:t.prevStep}},[t._v(" "+t._s(t.t("$vuetify.prev"))+" ")]),i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.resetCodecForm}},[t._v("reset")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validateCodecForm}},[t._v("ok")])],1)],1)],1),i("v-stepper-content",{attrs:{step:"3"}},[t.isFinishEditMeta?i("v-card",[t.isSaved?i("v-card-text",[i("v-alert",{attrs:{type:"success"}},[t._v(" "+t._s(t.t("$vuetify.forms.video.finish"))+" ")])],1):i("m-loading-card",{attrs:{value:t.progress}},[t._v(" "+t._s(t.converting.status)+" ("+t._s(t.converting.step)+" / "+t._s(t.converting.total)+") ")]),t.isSaved&&0==t.movePage?i("v-card-actions",[t._t("finishedActions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary"},on:{click:t.restart}},[t._v(" "+t._s(t.t("$vuetify.forms.video.restart"))+" ")])])],2):t._e()],1):i("v-card",[i("v-card-title",[i("span",{staticClass:"ml-2"},[t._v(t._s(t.stepName))]),i("m-help",{attrs:{text:"$vuetify.forms.video.desc.meta"}})],1),i("v-card-text",[t.video.name?i("m-video-meta-data-form",{ref:"metaForm",attrs:{currentItem:t.metadata},on:{validated:t.onValidateMetaData}}):t._e()],1),i("v-card-actions",[i("v-btn",{attrs:{text:""},on:{click:t.prevStep}},[t._v(" "+t._s(t.t("$vuetify.prev"))+" ")]),i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.resetMetaDataForm}},[t._v("reset")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validateMetaDataForm}},[t._v("ok")])],1)],1)],1)],1)],1)},j=[],E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-icon",t._g(t._b({},"v-icon",r,!1),n),[t._v("mdi-help-circle")])]}}])},[i("div",{domProps:{innerHTML:t._s(t.contents)}})])},D=[],M={name:"m-help",props:{text:{type:String,required:!0}},computed:{contents:function(){return this.$vuetify.lang.t(this.text)}}},L=M,F=i("3a2f"),A=Object(u["a"])(L,E,D,!1,null,"45a3d79a",null),z=A.exports;f()(A,{VIcon:p["a"],VTooltip:F["a"]});var N=i("84c5"),B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",[i("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:t.t("$vuetify.setting.form.loading.shouldGetVideoInfo.label")},model:{value:t.$shouldGetVideoInfo,callback:function(e){t.$shouldGetVideoInfo=e},expression:"$shouldGetVideoInfo"}}),i("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:t.t("$vuetify.setting.form.loading.nameFormat.show")},model:{value:t.showNameFormat,callback:function(e){t.showNameFormat=e},expression:"showNameFormat"}}),t.showNameFormat?i("v-text-field",{attrs:{suffix:"sep = '"+t.$nameSep+"'",label:t.t("$vuetify.setting.form.loading.nameFormat.label"),hint:t.t("$vuetify.setting.form.loading.nameFormat.hint")},model:{value:t.$nameFormat,callback:function(e){t.$nameFormat=e},expression:"$nameFormat"}}):t._e(),t.$shouldGetVideoInfo?i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}}):i("v-file-input",{attrs:{label:t.t("$vuetify.io.mVideoInput.title")+"*",rules:t.videoRules,accept:"video/mp4, video/webm","show-size":""},on:{change:t.onChange}})],1)},G=[],U=(i("96cf"),i("7580")),K=i("643d"),q=i("ee5b"),H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-file-input",{attrs:{label:t.$vuetify.lang.t("$vuetify.io.mVideoInput.title")+"*",accept:"video/mp4,video/webm",rules:t.videoRules,"show-size":""},on:{change:t.onChange}})},X=[],J=i("b192"),W=i("21f0"),Y={name:"MVideoInput",mixins:[K["a"]],data:function(){return{video:W["a"].video.initObj()}},methods:{onChange:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.clearVideo(),!e){t.next=13;break}if(!(e.size<this.maxVideoSize)){t.next=13;break}return this.$emit("loading"),this.video.name=e.name,t.next=7,W["a"].file.toBase64(e);case 7:if(this.video.source=t.sent,!e.arrayBuffer){t.next=13;break}return t.next=11,e.arrayBuffer();case 11:i=t.sent;try{W["a"].video.info(i,(function(t){n.video.videoStream=t.videoStream,n.video.audioStream=t.audioStream,n.video.originSize=t.originSize,n.video.fps=t.videoStream.fps,n.video.duration=t.duration,n.video.errors=Object(J["a"])({},t.errors),n.$emit("loaded",n.video)}))}catch(e){this.video.errors.fps="$vuetify.io.video.error.fps",this.video.errors.duration="$vuetify.io.video.error.duration",this.video.errors.originSize.width="$vuetify.io.video.error.originSize.width",this.video.errors.originSize.height="$vuetify.io.video.error.originSize.height",this.$emit("loaded",this.video)}case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),clearVideo:function(){this.video=W["a"].video.initObj()}},computed:{maxVideoSize:function(){return 1e6*this.$store.state.setting.maxVideoSize}}},Z=Y,Q=i("23a7"),tt=Object(u["a"])(Z,H,X,!1,null,null,null),et=tt.exports;f()(tt,{VFileInput:Q["a"]});var it={name:"m-video-file-form",mixins:[K["a"],q["a"]],components:{MVideoInput:et},data:function(){return{showNameFormat:!1,video:W["a"].video.initObj()}},methods:{t:function(t){return this.$vuetify.lang.t(t)},onChange:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}if(!(e.size<this.maxVideoSize)){t.next=7;break}return this.video.name=e.name,t.next=5,W["a"].file.toBase64(e);case 5:this.video.source=t.sent,this.$emit("validated",this.video);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onLoading:function(){this.$emit("valideting")},onLoaded:function(t){t&&(this.video=t,this.$emit("validated",this.video))}},computed:{maxVideoSize:function(){return 1e6*this.$store.state.setting.maxVideoSize}}},nt=it,rt=i("ac7c"),ot=i("4bd4"),at=Object(u["a"])(nt,B,G,!1,null,"7ae79de5",null),st=at.exports;f()(at,{VCheckbox:rt["a"],VFileInput:Q["a"],VForm:ot["a"],VTextField:$["a"]});var ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{required:"",label:t.t("$vuetify.io.mVideoCodec.name")},model:{value:t.video.name,callback:function(e){t.$set(t.video,"name",e)},expression:"video.name"}}),i("v-text-field",{attrs:{required:"",rules:t.rules.positiveFloatRules,label:t.t("$vuetify.io.mVideoCodec.fps"),hint:t.video.errors.fps?t.t(t.video.errors.fps):"","persistent-hint":!!t.video.errors.fps&&!Boolean(t.video.fps),suffix:"fps"},model:{value:t.video.fps,callback:function(e){t.$set(t.video,"fps",e)},expression:"video.fps"}}),i("v-text-field",{attrs:{required:"",rules:t.rules.positiveFloatRules,label:t.t("$vuetify.io.mVideoCodec.duration"),hint:t.video.errors.duration?t.t(t.video.errors.duration):"","persistent-hint":!!t.video.errors.duration&&!Boolean(t.video.duration),suffix:"sec"},model:{value:t.video.duration,callback:function(e){t.$set(t.video,"duration",e)},expression:"video.duration"}}),i("v-text-field",{attrs:{required:"",rules:t.rules.positiveFloatRules,label:t.t("$vuetify.io.mVideoCodec.originSize.width"),hint:t.video.errors.originSize.width?t.t(t.video.errors.originSize.width):"","persistent-hint":!!t.video.errors.originSize.width&&!Boolean(t.video.originSize.width),suffix:"pixel"},model:{value:t.video.originSize.width,callback:function(e){t.$set(t.video.originSize,"width",e)},expression:"video.originSize.width"}}),i("v-text-field",{attrs:{required:"",rules:t.rules.positiveFloatRules,label:t.t("$vuetify.io.mVideoCodec.originSize.height"),hint:t.video.errors.originSize.height?t.t(t.video.errors.originSize.height):"","persistent-hint":!!t.video.errors.originSize.height&&!Boolean(t.video.originSize.height),suffix:"pixel"},model:{value:t.video.originSize.height,callback:function(e){t.$set(t.video.originSize,"height",e)},expression:"video.originSize.height"}})],1)},lt=[],ut={name:"m-video-codec-form",mixins:[K["a"]],data:function(){return{video:W["a"].video.initObj(),valid:!1}},props:{value:{type:Object,default:function(){return W["a"].video.initObj()}}},methods:{t:function(t){return this.$vuetify.lang.t(t)},validate:function(){if(this.$refs.form.validate(),this.valid){var t={name:this.video.name,fps:Number(this.video.fps),duration:Number(this.video.duration),originSize:{width:Number(this.video.originSize.width),height:Number(this.video.originSize.height)}};this.$emit("validated",t)}},reset:function(){this.resetValidation(),this.video=JSON.parse(JSON.stringify(this.value))},resetValidation:function(){this.$refs.form.resetValidation()}},mounted:function(){this.video=JSON.parse(JSON.stringify(this.value))}},dt=ut,ft=Object(u["a"])(dt,ct,lt,!1,null,"e035c826",null),mt=ft.exports;f()(ft,{VForm:ot["a"],VTextField:$["a"]});var ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-row",[i("v-col",[i("v-card",[i("v-card-text",{staticClass:"py-0"},[i("m-meta-field-form",{ref:"newForm",on:{validated:t.onAddField}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(e){return e.preventDefault(),t.$refs.newForm.validate()}}},[t._v(" ADD ")])],1)],1),t.fields.length>0?i("v-card",{staticClass:"mt-4"},[i("v-card-text",[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},t._l(t.fields,(function(e){return i("v-text-field",{key:e,attrs:{rules:t.valueRules,counter:50,required:"",label:e},model:{value:t.item[e],callback:function(i){t.$set(t.item,e,i)},expression:"item[field]"}})})),1)],1)],1):t._e()],1)],1)},vt=[],pt=(i("c740"),i("a434"),i("ddb0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{rules:t.keyRules,counter:10,required:"",label:"New field"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.validate(e))}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)}),gt=[],xt={name:"m-meta-field-form",data:function(){return{valid:!1,name:""}},methods:{checkName:function(t){return!!t&&(!(this.fields.indexOf(t)>-1)||this.$vuetify.lang.t("$vuetify.validations.alreadyExists"))},validate:function(){this.$refs.form&&(this.$refs.form.validate(),this.valid&&(this.$store.commit("metadata/add",this.name),this.$emit("validated",this.name)))},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}},computed:{fields:function(){return this.$store.getters["files/fields"]},keyRules:function(){var t=this,e="$vuetify.validations";return[function(i){return!!i||t.$vuetify.lang.t("".concat(e,".required"))},function(i){return!!i||i.length<=10||t.$vuetify.lang.t("".concat(e,".shorter"),10)},function(e){return t.checkName(e)}]}}},yt=xt,bt=Object(u["a"])(yt,pt,gt,!1,null,"61eb5097",null),wt=bt.exports;f()(bt,{VForm:ot["a"],VTextField:$["a"]});var $t={name:"m-video-meta-data-form",components:{MMetaFieldForm:wt},props:{vname:{type:String,default:""},currentItem:{type:Object,default:function(){return{}}}},data:function(){return{valid:!1,fields:[],item:{}}},computed:{valueRules:function(){var t=this,e="$vuetify.validations";return[function(i){return 0==i.length||i&&i.length<=50||t.$vuetify.lang.t("".concat(e,".shorter"),50)}]}},methods:{onAddField:function(t){this.fields.push(t),this.item[t]=this.currentItem[t]||""},destroy:function(t,e){var i=this.keys.findIndex((function(t){return t==e}));this.keys.splice(i,1)},validate:function(){this.$refs.form?(this.$refs.form.validate(),this.valid&&this.$emit("validated",this.item)):this.$emit("validated",this.item)},reset:function(){for(var t in this.item)this.item[t]=this.currentItem[t]||""}},mounted:function(){this.fields=this.$store.getters["files/fields"];var t,e=Object(R["a"])(this.fields);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.item[i]=this.currentItem[i]||""}}catch(n){e.e(n)}finally{e.f()}}},kt=$t,_t=i("b0af"),St=i("99d9"),Ct=i("62ad"),Tt=i("0fd9"),Rt=Object(u["a"])(kt,ht,vt,!1,null,"b33599a0",null),Vt=Rt.exports;f()(Rt,{VBtn:v["a"],VCard:_t["a"],VCardActions:St["a"],VCardText:St["b"],VCol:Ct["a"],VForm:ot["a"],VRow:Tt["a"],VSpacer:w["a"],VTextField:$["a"]});var Pt={name:"m-video-regist-from",mixins:[q["a"]],components:{MHelp:z,MLoadingCard:N["a"],MVideoFileForm:st,MVideoCodecForm:mt,MVideoMetaDataForm:Vt},data:function(){return{e1:1,loading:{show:!1,status:""},converting:{src:"",status:"",doing:!1,step:0,total:0},isFinishEditMeta:!1,isSaved:!1,steps:["select","confirmation","meta"],video:W["a"].video.initObj()}},computed:{movePage:function(){return this.$store.state.setting.shouldMovePageAferAddingFile},shouldGetFrameInfo:function(){return this.$store.state.setting.shouldGetFrameInfo},canvasStyle:function(){return this.video.originSize?{width:"".concat(this.video.originSize.width,"px"),height:"".concat(this.video.originSize.height,"px")}:{width:"0px",height:"0px"}},progress:function(){return this.converting.total?this.converting.step/this.converting.total*100:0},stepName:function(){return this.t("$vuetify.forms.video.steps.".concat(this.steps[this.e1-1]))},nSteps:function(){return this.steps.length},metadata:function(){if(this.video.name){var t=this.$store.getters["setting/fname2meta"](this.video.name);if(t)return t}return{}}},methods:{t:function(t){return this.$vuetify.lang.t(t)},pushFile:function(){var t=this;this.$store.dispatch("files/push",this.video).then((function(e){t.isSaved=!0,t.$emit("loaded",e)})).catch((function(e){t.$emit("error",e)}))},restart:function(){this.e1=1,this.loading={show:!1,status:""},this.converting={src:"",status:"",doing:!1,step:0,total:0},this.isFinishEditMeta=!1,this.isSaved=!1,this.steps=["select","confirmation","meta"],this.video=W["a"].video.initObj()},startConvert:function(){this.converting.doing=!0,this.converting.status="converting video to images...",this.video.frames=[],this.converting.step=0,this.converting.total=Math.floor(this.video.duration*this.video.fps);var t=1/this.video.fps,e=0;while(this.converting.step<this.converting.total)this.converting.step++,e+=t,this.video.frames.push({idx:this.converting.step,time:e});this.converting.doing=!1,this.isFinishEditMeta&&this.pushFile()},prevStep:function(){2==this.e1&&(this.video=W["a"].video.initObj(),this.e1=1),3==this.e1&&(this.video.frames=[],this.isFinishEditMeta=!1,this.converting={src:"",status:"",doing:!1,step:0,total:0},this.e1=2)},nextStep:function(t){t===this.steps?this.e1=1:this.e1=t+1},resetCodecForm:function(){this.$refs.codecForm.reset()},validateCodecForm:function(){this.$refs.codecForm.validate()},resetMetaDataForm:function(){this.$refs.metaForm.reset()},validateMetaDataForm:function(){this.$refs.metaForm.validate()},onLoading:function(){},onValidateVideo:function(t){t&&(this.video=t,this.nextStep(1))},onValidateCodec:function(t){this.video.name=t.name,this.video.fps=t.fps,this.video.duration=t.duration,this.video.originSize.width=t.originSize.width,this.video.originSize.height=t.originSize.height,this.shouldGetFrameInfo&&this.video.source&&this.startConvert(),this.nextStep(2)},onValidateMetaData:function(t){t?(this.video.metaData=t,this.video.textgrid={},this.isFinishEditMeta=!0,this.converting.doing||this.video&&this.pushFile()):this.video.metaData={}}},beforeDestroy:function(){this.video=null}},It=Pt,Ot=i("0798"),jt=i("ce7e"),Et=i("7e85"),Dt=i("e516"),Mt=i("9c54"),Lt=i("56a4"),Ft=Object(u["a"])(It,O,j,!1,null,"7ebc6512",null),At=Ft.exports;f()(Ft,{VAlert:Ot["a"],VBtn:v["a"],VCard:_t["a"],VCardActions:St["a"],VCardText:St["b"],VCardTitle:St["c"],VDivider:jt["a"],VSpacer:w["a"],VStepper:Et["a"],VStepperContent:Dt["a"],VStepperHeader:Mt["a"],VStepperItems:Mt["b"],VStepperStep:Lt["a"]});var zt={name:"m-file-upload-dialog",components:{MCardDialog:I["a"],MVideoRegistFrom:At},props:{value:{type:Boolean,default:!1}},data:function(){return{title:"$vuetify.forms.video.title",loaded:!1}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{t:function(t){return this.$vuetify.lang.t(t)},close:function(){this.dialog=!1,this.loaded||this.$vuewer.snackbar.warning("$vuetify.forms.video.messages.stop")},onLoaded:function(t){this.loaded=!0,this.$vuewer.snackbar.success("$vuetify.forms.video.messages.success"),this.$store.state.setting.shouldMovePageAferAddingFile&&(this.dialog=!1,this.$router.push({path:"/files/".concat(t)}))},onError:function(t){~t.message.indexOf("out of memory")?this.$vuewer.snackbar.error("$vuetify.forms.video.messages.outofmemory"):this.$vuewer.snackbar.error(t),this.dialog=!1}}},Nt=zt,Bt=Object(u["a"])(Nt,V,P,!1,null,"3205aa42",null),Gt=Bt.exports;f()(Bt,{VBtn:v["a"],VIcon:p["a"]});var Ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{titleColor:"green",fullscreen:t.$store.state.current.layout.mini,title:t.$vuetify.lang.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-text",[i("v-autocomplete",{attrs:{items:t.files,loading:t.isLoading,"item-text":"name",label:"target files","return-object":""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.loadData}},[t._v("Ok")])],1)],1)],1)},Kt=[],qt={name:"m-dropbox-dialog",components:{MCardDialog:I["a"]},data:function(){return{tag:"component:m-dropbox-dialog",title:"$vuetify.pages.dropbox.load",isLoading:!1,selected:null}},props:{value:{type:Boolean}},computed:{files:function(){return this.$store.state.files.chaches||[]},dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{dialog:function(t){0==t&&(this.selected=[])}},methods:{close:function(){this.dialog=!1},loadData:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.selected){t.next=14;break}return this.$vuewer.loading.start("sync db"),t.next=4,this.$vuewer.dropbox.read(this.selected.path_display);case 4:return e=t.sent,i=JSON.parse(e),t.next=8,this.$vuewer.db.put(i);case 8:return t.next=10,this.$vuewer.db.gets();case 10:n=t.sent,this.$store.commit("files/files",n),this.$vuewer.loading.end(),this.dialog=!1;case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},Ht=qt,Xt=i("c6a6"),Jt=Object(u["a"])(Ht,Ut,Kt,!1,null,"815a7394",null),Wt=Jt.exports;f()(Jt,{VAutocomplete:Xt["a"],VBtn:v["a"],VCard:_t["a"],VCardActions:St["a"],VCardText:St["b"],VSpacer:w["a"]});var Yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{persistent:"",title:t.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card-text",[t.dialog?i("m-db-import-form",{on:{reject:t.onRejected,loaded:t.onLoaded,error:t.onError}}):t._e()],1)],1)},Zt=[],Qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[null===t.json?i("v-file-input",{attrs:{label:t.$vuetify.lang.t("$vuetify.io.db.json.title")+"*",accept:"application/json"},on:{change:t.onChange}}):t.loading?i("div",{staticClass:"text-center ma-5"},[i("v-progress-circular",{attrs:{size:70,width:7,color:"primary",indeterminate:""}}),i("span",{staticClass:"ma-5"},[t._v("Updateing db...")])],1):i("v-alert",{staticClass:"mt-4",attrs:{prominent:"",type:"error"}},[i("v-row",{attrs:{align:"center"}},[i("v-col",{staticClass:"grow"},[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.forms.db.warning"))+" ")]),i("v-col",{staticClass:"shrink pa-1"},[i("v-btn",{attrs:{color:"error darken-2"},on:{click:t.dbLoad}},[t._v("YES")]),i("v-btn",{staticClass:"mt-4",attrs:{color:"error darken-3"},on:{click:function(e){return t.$emit("reject")}}},[t._v(" NO ")])],1)],1)],1)],1)},te=[],ee={name:"m-db-import-form",data:function(){return{valid:!1,loading:!1,json:null}},methods:{dbLoad:function(){var t=this;this.loading=!0,this.$store.dispatch("files/load",this.json).then((function(){t.loading=!1,t.$emit("loaded")})).catch((function(e){return t.$emit("error",e)}))},onChange:function(t){var e=this;if(t&&t.name){this.$emit("loading");var i=new FileReader;i.readAsText(t),i.onload=function(){e.json=i.result}}}}},ie=ee,ne=i("490a"),re=Object(u["a"])(ie,Qt,te,!1,null,"5a6a0da4",null),oe=re.exports;f()(re,{VAlert:Ot["a"],VBtn:v["a"],VCol:Ct["a"],VFileInput:Q["a"],VForm:ot["a"],VProgressCircular:ne["a"],VRow:Tt["a"]});var ae={name:"m-db-import-dialog",components:{MCardDialog:I["a"],MDbImportForm:oe},props:{value:{type:Boolean,default:!1}},data:function(){return{title:"$vuetify.forms.db.title",loaded:!1}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{t:function(t){return this.$vuetify.lang.t(t)},close:function(){this.dialog=!1,this.loaded||this.$vuewer.snackbar.warning("$vuetify.forms.db.messages.stop"),"Home"!==this.$route.name&&this.$router.push({name:"Home"})},onRejected:function(){this.loaded=!1,this.close()},onLoaded:function(){this.loaded=!0,this.close(),this.$vuewer.snackbar.success("$vuetify.forms.db.messages.success")},onError:function(t){this.loaded=!0,this.close(),~t.message.indexOf("out of memory")?this.$vuewer.snackbar.error("$vuetify.forms.db.messages.outofmemory"):this.$vuewer.snackbar.error(t)}}},se=ae,ce=Object(u["a"])(se,Yt,Zt,!1,null,"0e610b41",null),le=ce.exports;f()(ce,{VBtn:v["a"],VCardText:St["b"],VIcon:p["a"]});var ue=i("c1df"),de=i.n(ue),fe={name:"MNavigationDrawer",components:{MFileUploadDialog:Gt,MDbImportDialog:le,MDropboxDialog:Wt},data:function(){return{keyword:"",current:null,open:{pages:!0,files:!1,dropboxes:!1,databases:!1,convarters:!1,depelops:!1,docs:!1},dropboxDialog:!1,uploadDialog:!1,dbImportDialog:!1,updateToken:!1}},computed:{query:function(){var t=this.$vuewer.text,e=t.toQuery(t.toParam(t.trim(this.keyword))),i=Object.keys(e).filter((function(t){return!0===e[t]}));return i},$showDev:function(){return this.$store.state.setting.showDev},isVuewer:function(){var t=this.$route.fullPath.split("/");return t.length>0&&"files"==t[1]},activeFile:function(){return this.isVuewer?Number(this.$route.params.id):null},isLoading:function(){return this.$store.state.files.isLoading},files:function(){var t=this.$store.state.setting.filesOrderKey,e="dddd, MMMM Do YYYY, h:mm:ss a";"ja"==this.$vuetify.lang.current&&(de.a.locale("ja"),e="YYYY 年 MM 月 DD 日(ddd) a h:mm:ss");var i=this.$store.state.files.files||[];if("default"!=t&&(i=i.sort((function(e,i){return e[t]<i[t]?-1:e[t]>i[t]?1:0}))),i=i.map((function(t){return t.lastModifiedText=de()(t.lastModifiedAt).format(e),t})),this.query.length){var n,r=i,o=Object(R["a"])(this.query);try{var a=function(){var t=n.value;r=r.filter((function(e){return-1!=e.name.indexOf(t)}))};for(o.s();!(n=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}r.length&&(i=r)}return i},chaches:function(){return this.$store.state.files.chaches||[]},diff:function(){var t=this.chaches.map((function(t){return t.name.split(".")[0]})),e=this.files.map((function(t){return t.name?t.name.split(".")[0]:""}));return t.filter((function(t){return-1==e.indexOf(t)}))},drawer:{get:function(){return this.$store.state.drawer},set:function(t){this.$store.commit("drawer",t)}},converters:function(){var t=this,e=function(e){t.$route.path!==e&&t.$router.push({path:e})};return[{text:"video2png",icon:"mdi-filmstrip-box-multiple",function:function(){return e("/convarters/video2png")}},{text:"video2wav",icon:"mdi-file-music",function:function(){return e("/convarters/video2wav")}}]},developPages:function(){var t=this;return this.$router.options.routes.filter((function(t){return!!t.develop})).map((function(e,i){return e.name==t.$route.name&&(t.current=i,e.current=!0),e.title=e.name,e.to=function(){t.to({name:e.name})},e}))},pages:function(){var t=this;return this.$router.options.routes.filter((function(t){return!t.develop&&t.name})).map((function(e,i){return e.name==t.$route.name&&(t.current=i,e.current=!0),e.title=t.$vuetify.lang.t("$vuetify.pages.".concat(e.name.toLowerCase())),e.to=function(){t.to({name:e.name})},e}))},docs:function(){return[{title:"$vuetify.docs.fileRegistration",link:"https://github.com/kikuchiken-waseda/mri-vuewer.ver2/wiki/%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E7%99%BB%E9%8C%B2"},{title:"$vuetify.docs.textgrid",link:"https://github.com/kikuchiken-waseda/mri-vuewer.ver2/wiki/%E6%99%82%E7%B3%BB%E5%88%97%E8%BB%A2%E8%A8%98"},{title:"$vuetify.docs.frameEdit",link:"https://github.com/kikuchiken-waseda/mri-vuewer.ver2/wiki/%E3%83%95%E3%83%AC%E3%83%BC%E3%83%A0%E8%BB%A2%E8%A8%98"},{title:"$vuetify.docs.dropbox",link:"https://github.com/kikuchiken-waseda/mri-vuewer.ver2/wiki/Dropbox%E9%80%A3%E6%90%BA"},{title:"$vuetify.docs.search",link:"https://github.com/kikuchiken-waseda/mri-vuewer.ver2/wiki/%E6%A4%9C%E7%B4%A2"},{title:"Release notes",link:"https://github.com/kikuchiken-waseda/mri-vuewer.ver2/blob/master/release.md"}]},hasToken:function(){return!!this.updateToken||this.$vuewer.dropbox.hasToken()}},methods:{moment:function(t){return de()(t)},allClose:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(var e in this.open)this.open[e]=null!==t&&e==t},to:function(t){t.name&&this.$route.name!==t.name&&this.$router.push(t),t.id&&Number(this.$route.params.id)!==Number(t.id)&&this.$router.push({path:"/files/".concat(t.id)})},loadDropbox:function(){var t=this,e=this.$store.getters["current/video/dropboxPath"];e?(this.$vuewer.loading.start("$vuetify.loading"),this.$vuewer.dropbox.read(e).then((function(e){var i=JSON.parse(e);t.$store.dispatch("current/loadObj",i),t.$vuewer.snackbar.success("$vuetify.loaded")})).catch((function(e){var i="DROPBOX ERROR: ".concat(e.status," :").concat(e.error.error_summary);t.$vuewer.snackbar.error(i)})).finally((function(){t.$vuewer.loading.end(),t.drawer=!1}))):this.dropboxDialog=!0},dropboxAuth:function(){this.$vuewer.dropbox.auth()},dbAdd:function(){this.uploadDialog=!0,this.drawer=!1},dbLoad:function(){this.dbImportDialog=!0,this.drawer=!1},dbDump:function(){var t=this;this.$store.dispatch("files/dump").then((function(){var e=t.$vuetify.lang.t("$vuetify.pages.on.dump");t.$store.dispatch("snackbar/success",e)})).catch((function(e){t.$store.dispatch("snackbar/error",e.message)})).finally((function(){t.drawer=!1}))},dbClear:function(){var t=this;this.$store.dispatch("files/clear").then((function(){var e=t.$vuetify.lang.t("$vuetify.pages.on.clear");t.$store.dispatch("snackbar/success",e),t.drawer=!1,t.to({name:"Home"})})).catch((function(e){t.$store.dispatch("snackbar/error",e.message)}))},fileDestroy:function(t){var e=this;this.$store.dispatch("files/destroy",t.id).then((function(t){var i=e.$vuetify.lang.t("$vuetify.pages.on.destroy","file id = ".concat(t));e.$store.dispatch("snackbar/success",i),t==e.$route.params.id&&e.$router.push({name:"Home"})})).catch((function(t){e.$store.dispatch("snackbar/error",t.message),e.drawer=!1}))}},watch:{isVuewer:function(t,e){t!==e&&(1==t?this.allClose("files"):this.allClose("pages"))}},mounted:function(){window.location.hash?(this.$vuewer.dropbox.setToken(window.location.hash),this.updateToken=!0):this.isVuewer&&this.allClose("files"),this.$store.dispatch("files/dropbox")}},me=fe,he=(i("9c92"),i("cc20")),ve=i("adda"),pe=i("56b0"),ge=i("1800"),xe=i("8270"),ye=i("34c3"),be=i("f774"),we=Object(u["a"])(me,C,T,!1,null,"48bc3788",null),$e=we.exports;f()(we,{VBtn:v["a"],VChip:he["a"],VDivider:jt["a"],VIcon:p["a"],VImg:ve["a"],VList:g["a"],VListGroup:pe["a"],VListItem:x["a"],VListItemAction:ge["a"],VListItemAvatar:xe["a"],VListItemContent:y["b"],VListItemIcon:ye["a"],VListItemSubtitle:y["c"],VListItemTitle:y["d"],VNavigationDrawer:be["a"],VProgressCircular:ne["a"],VTextField:$["a"]});var ke=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-bottom-sheet",{model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[i("v-card",[i("v-toolbar",{attrs:{color:"purple",dark:"",flat:""},scopedSlots:t._u([{key:"extension",fn:function(){return[i("v-tabs",{attrs:{centered:""},model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},t._l(t.items.length,(function(e){return i("v-tab",{key:e},[t._v(" "+t._s(t.items[e-1])+" ")])})),1)]},proxy:!0}])},[i("v-text-field",{staticClass:"mx-4",attrs:{flat:"",rounded:"","hide-details":"",label:"Search","prepend-inner-icon":"mdi-magnify","solo-inverted":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),i("v-tabs-items",{model:{value:t.tabs,callback:function(e){t.tabs=e},expression:"tabs"}},[i("v-tab-item",[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticClass:"headline"},[t._v("LOG")]),i("v-data-table",{attrs:{headers:t.headers,items:t.logs,search:t.search}})],1)],1),i("v-tab-item",[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticClass:"headline"},[t._v("DB LOG")]),i("v-data-table",{attrs:{headers:t.headers,items:t.dblogs,search:t.search}})],1)],1),i("v-tab-item",[i("v-card",{attrs:{flat:""}},[i("v-card-title",{staticClass:"headline"},[t._v("ERRORS")]),i("v-data-table",{attrs:{headers:t.headers,items:t.errors,search:t.search}})],1)],1)],1)],1)],1)},_e=[],Se={name:"m-logging-seet",data:function(){return{search:"",tabs:null,items:["SYSTEM","DATABASE","ERROR"]}},computed:{headers:function(){return 1==this.tabs?[{text:"TIME",value:"time"},{text:"CRUD",value:"tag"},{text:"TABLE",value:"table"},{text:"DETAIL",value:"msg"}]:[{text:"TIME",value:"time"},{text:"TAG",value:"tag"},{text:"DETAIL",value:"msg"}]},sheet:{get:function(){return this.$store.state.logging.show},set:function(t){this.$store.commit("logging/show",t)}},dblogs:function(){return this.$store.state.logging.dbLogs},logs:function(){return this.$store.state.logging.logs},errors:function(){return this.$store.state.logging.errors}}},Ce=Se,Te=i("288c"),Re=i("8fea"),Ve=i("71a3"),Pe=i("c671"),Ie=i("fe57"),Oe=i("aac8"),je=i("71d9"),Ee=Object(u["a"])(Ce,ke,_e,!1,null,"392fa86e",null),De=Ee.exports;f()(Ee,{VBottomSheet:Te["a"],VCard:_t["a"],VCardTitle:St["c"],VDataTable:Re["a"],VTab:Ve["a"],VTabItem:Pe["a"],VTabs:Ie["a"],VTabsItems:Oe["a"],VTextField:$["a"],VToolbar:je["a"]});var Me=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-snackbar",{attrs:{color:t.color,timeout:t.timeout,top:"",right:"",absolute:"",shaped:""},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[i("v-btn",t._b({attrs:{icon:"",color:"white"},on:{click:function(e){t.show=!1}}},"v-btn",n,!1),[i("v-icon",[t._v("mdi-close-circle")])],1)]}}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},["error"==t.type?i("v-icon",{staticClass:"mr-1"},[t._v("mdi-alert-octagram")]):t._e(),"warning"==t.type?i("v-icon",{staticClass:"mr-1"},[t._v("mdi-alert")]):t._e(),"info"==t.type?i("v-icon",{staticClass:"mr-1"},[t._v("mdi-information")]):t._e(),"success"==t.type?i("v-icon",{staticClass:"mr-1"},[t._v("mdi-check-circle")]):t._e(),i("span",{staticClass:"subtitle"},[t._v(" "+t._s(t.$vuetify.lang.t(t.message))+" ")])],1)},Le=[],Fe={name:"m-app-snackbar",computed:{show:{get:function(){return this.$store.state.snackbar.show},set:function(t){this.$store.commit("snackbar/show",t)}},type:function(){return this.$store.state.snackbar.type},color:function(){return this.$store.state.snackbar.color},message:function(){return this.$store.state.snackbar.message||"THIS IS DEBUG MASSAGE"},timeout:function(){return this.$store.state.snackbar.timeout}}},Ae=Fe,ze=i("2db45"),Ne=Object(u["a"])(Ae,Me,Le,!1,null,"44525666",null),Be=Ne.exports;f()(Ne,{VBtn:v["a"],VIcon:p["a"],VSnackbar:ze["a"]});var Ge=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-loading-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "+t._s(t.$vuetify.lang.t(t.text))+" ")])},Ue=[],Ke=i("9de5"),qe={name:"m-app-loading-dialog",components:{MLoadingDialog:Ke["a"]},computed:{dialog:{get:function(){return this.$store.state.loading.show},set:function(t){this.$store.commit("loading/show",t)}},text:function(){return this.$store.state.loading.message},color:function(){return"primary"},progressColor:function(){return"white"}}},He=qe,Xe=Object(u["a"])(He,Ge,Ue,!1,null,"a3a98428",null),Je=Xe.exports,We={name:"App",components:{MAppBar:S,MAppSnackbar:Be,MNavigationDrawer:$e,MLoggingSeet:De,MAppLoadingDialog:Je},data:function(){return{}},watch:{"$route.hash":function(t,e){t!=e&&this.$store.dispatch("hash/text",this.$route.hash)}},mounted:function(){this.$store.commit("lang",this.$vuetify.lang),this.$store.dispatch("hash/text",this.$route.hash),this.$store.dispatch("files/init")}},Ye=We,Ze=i("7496"),Qe=i("f6c4"),ti=Object(u["a"])(Ye,r,o,!1,null,null,null),ei=ti.exports;f()(ti,{VApp:Ze["a"],VMain:Qe["a"]});var ii,ni,ri=i("8c4f"),oi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-drag-context",[i("m-view-layout",{ref:"layout",attrs:{heading:t.heading,desc:t.desc}},[i("v-row",[t._l(t.navs,(function(e,n){return i("v-col",{key:n,attrs:{cols:"12",md:t.cardCols}},[i("m-h-card",{class:t.mhClass,attrs:{color:e.color,icon:e.icon,title:e.title,"sub-icon":"mdi-information","sub-text":e.subText,actions:e.actions}})],1)})),i("v-col",{attrs:{cols:"12"}})],2),i("m-file-upload-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})],1)],1)},ai=[],si=(i("5319"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card",t._g(t._b({directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],ref:"card",staticClass:"v-card--material-stats",attrs:{icon:t.icon},scopedSlots:t._u([{key:"after-heading",fn:function(){return[i("div",{staticClass:"ml-auto text-right"},[i("div",{staticClass:"body-3 font-weight-light",domProps:{textContent:t._s(t.title)}}),i("h3",{staticClass:"display-2 font-weight-light text--primary"},[t._v(" "+t._s(t.value)+" "),i("small",[t._v(t._s(t.smallValue))])])])]},proxy:!0}])},"m-card",t.$attrs,!1),t.$listeners),[i("v-col",{staticClass:"px-0",attrs:{cols:"12"}},[i("v-divider")],1),i("v-icon",{attrs:{color:t.subIconColor}},[t._v(" "+t._s(t.subIcon)+" ")]),i("span",{ref:"subText",staticClass:"caption font-weight-light mt-1 d-inline-block text-truncate",style:t.subTextStyle,domProps:{textContent:t._s(t.subText)}}),i("v-spacer"),t._l(t.actions,(function(e,n){return i("v-btn",{key:n,attrs:{icon:"",small:""},on:{click:e.function}},[i("v-icon",[t._v(t._s(e.icon))])],1)}))],2)}),ci=[],li={name:"Card",extends:_t["a"]},ui=li,di=Object(u["a"])(ui,ii,ni,!1,null,null,null),fi=di.exports,mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",t._b({staticClass:"v-card--material pa-3",class:t.classes},"v-card",t.$attrs,!1),[i("div",{staticClass:"d-flex grow flex-wrap"},[t.avatar?i("v-avatar",{staticClass:"mx-auto v-card--material__avatar elevation-6",attrs:{size:"128",color:"grey"}},[i("v-img",{attrs:{src:t.avatar}})],1):i("v-sheet",{staticClass:"text-start v-card--material__heading mb-n6",class:{"pa-7":!t.$slots.image},attrs:{color:t.color,"max-height":t.icon?90:void 0,width:t.icon?"auto":"100%",elevation:"6",dark:""}},[t.$slots.heading?t._t("heading"):t.$slots.image?t._t("image"):t.title&&!t.icon?i("div",{staticClass:"display-1 font-weight-light",domProps:{textContent:t._s(t.title)}}):t.icon?i("v-icon",{attrs:{size:"32"},domProps:{textContent:t._s(t.icon)}}):t._e(),t.text?i("div",{staticClass:"headline font-weight-thin",domProps:{textContent:t._s(t.text)}}):t._e()],2),t.$slots["after-heading"]?i("div",{staticClass:"ml-6"},[t._t("after-heading")],2):t.icon&&t.title?i("div",{staticClass:"ml-4"},[i("div",{staticClass:"card-title font-weight-light",domProps:{textContent:t._s(t.title)}})]):t._e()],1),t._t("default"),t.$slots.actions?[i("v-divider",{staticClass:"mt-2"}),i("v-card-actions",{staticClass:"pb-0"},[t._t("actions")],2)]:t._e()],2)},hi=[],vi={name:"MaterialCard",props:{avatar:{type:String,default:""},color:{type:String,default:"success"},icon:{type:String,default:void 0},image:{type:Boolean,default:!1},text:{type:String,default:""},title:{type:String,default:""}},computed:{classes:function(){return{"v-card--material--has-heading":this.hasHeading}},hasHeading:function(){return Boolean(this.$slots.heading||this.title||this.icon)},hasAltHeading:function(){return Boolean(this.$slots.heading||this.title&&this.icon)}}},pi=vi,gi=(i("56ee"),i("8212")),xi=i("8dd9"),yi=Object(u["a"])(pi,mi,hi,!1,null,null,null),bi=yi.exports;f()(yi,{VAvatar:gi["a"],VCard:_t["a"],VCardActions:St["a"],VDivider:jt["a"],VIcon:p["a"],VImg:ve["a"],VSheet:xi["a"]});var wi={name:"MHCard",inheritAttrs:!1,components:{MCard:bi},props:Object(J["a"])(Object(J["a"])({},fi.props),{},{icon:{type:String,required:!0},subIcon:{type:String,default:void 0},subIconColor:{type:String,default:void 0},subText:{type:String,default:void 0},title:{type:String,default:void 0},value:{type:String,default:void 0},smallValue:{type:String,default:void 0},actions:{type:Array,default:function(){return[]}}}),data:function(){return{subTextMaxWidth:150}},computed:{subTextStyle:function(){return"max-width: ".concat(this.subTextMaxWidth,"px;")}},methods:{onResize:function(){var t=this;this.$nextTick((function(){var e=50*(t.actions.length+1);if(t.$refs.card&&t.$refs.card.$el){var i=t.$refs.card.$el.clientWidth-e;t.subTextMaxWidth=i}}))}},mounted:function(){this.onResize()}},$i=wi,ki=(i("7987"),i("269a")),_i=i.n(ki),Si=i("dc22"),Ci=Object(u["a"])($i,si,ci,!1,null,null,null),Ti=Ci.exports;f()(Ci,{VBtn:v["a"],VCol:Ct["a"],VDivider:jt["a"],VIcon:p["a"],VSpacer:w["a"]}),_i()(Ci,{Resize:Si["a"]});var Ri=i("8e30"),Vi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"fill-height",on:{dragenter:t.onDragEnter,dragleave:t.onDragLeave}},[t.overlay?i("div",{ref:"overlay",staticClass:"fill-height drop-area",on:{dragenter:t.onDragEnter,dragover:function(t){t.preventDefault()},dragleave:t.onDragLeave,drop:function(e){return e.preventDefault(),t.onDroped(e)}}},[i("span",{staticClass:"headline"},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-file-upload")]),t._v(" Drop files here to uplod ")],1)]):t._t("default")],2)},Pi=[],Ii=(i("4160"),i("159b"),i("0bd7")),Oi={name:"m-drag-context",data:function(){return{overlay:!1}},methods:{onDragEnter:function(){this.overlay=!0},onDragLeave:function(t){null==t.fromElement&&(this.overlay=!1)},onDroped:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.overlay=!1,e.dataTransfer&&(i=Object(Ii["a"])(e.dataTransfer.files),n=i.filter((function(t){return"video/mp4"==t.type|"video/webm"==t.type})),n.forEach(function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e,i){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 0==i&&r.$vuewer.loading.start("downloading video files ..."),o=r.$vuewer.io.video.initObj(),t.next=4,e.arrayBuffer();case 4:a=t.sent,r.$vuewer.io.video.info(a,function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(a){var s,c,l,u,d,f,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o.fps=a.videoStream.fps,o.duration=a.duration,o.originSize=a.originSize,o.videoStream=a.videoStream,o.audioStream=a.audioStream,t.next=7,r.$vuewer.io.file.toBase64(e);case 7:s=t.sent,o.source=s,o.name=e.name,o.frames=[],c=Math.floor(o.duration*o.fps),l=1/o.fps,u=0,d=0;while(d<c)d++,u+=l,o.frames.push({idx:d,time:u});return f=r.$store.getters["setting/fname2meta"](e.name),f&&(o.metaData=f),t.next=20,r.$store.dispatch("files/push",o);case 20:m=t.sent,i==n.length-1&&(r.$vuewer.loading.end(),r.$store.state.setting.shouldMovePageAferAddingFile&&r.$router.push({path:"/files/".concat(m)}));case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},ji=Oi,Ei=(i("6ac2"),Object(u["a"])(ji,Vi,Pi,!1,null,"45bee3f0",null)),Di=Ei.exports;f()(Ei,{VIcon:p["a"]});var Mi={name:"Home",components:{MDragContext:Di,MViewLayout:Ri["a"],MHCard:Ti,MFileUploadDialog:Gt},data:function(){return{fileRegistDialog:!1}},computed:{mhClass:function(){return this.$vuetify.breakpoint.smAndUp?"":"mt-5"},dialog:{get:function(){return!!this.$store.state.hash.info["file-update"]||this.fileRegistDialog},set:function(t){0==t&&this.$store.state.hash.info["file-update"]&&(this.$store.state.hash.info["file-update"]=!1),this.fileRegistDialog=t}},name:function(){return this.$store.state.appName},version:function(){return this.$store.state.appVersion},heading:function(){return"".concat(this.name," ver.").concat(this.version)},desc:function(){return"".concat(this.$vuewer.t("$vuetify.home.disc"))},navs:function(){var t=this,e=this;return{upload:{icon:"mdi-file-upload",color:"primary",title:this.$vuetify.lang.t("$vuetify.home.upload.title"),subText:this.$vuetify.lang.t("$vuetify.home.upload.hint"),actions:[{icon:"mdi-plus",function:function(){t.fileRegistDialog=!0}}]},manage:{color:"primary",icon:"mdi-database-search",title:this.$vuetify.lang.t("$vuetify.home.manage.title"),subText:this.$vuetify.lang.t("$vuetify.home.manage.hint"),actions:[{icon:"mdi-dots-vertical",function:function(){e.$router.push({name:"Meta"})}}]},demo:{color:"primary",icon:"mdi-code-brackets",title:this.$vuetify.lang.t("$vuetify.home.demo.title"),subText:this.$vuetify.lang.t("$vuetify.home.demo.hint"),actions:[{icon:"mdi-dots-vertical",function:function(){e.$router.push({name:"Demo"})}}]}}},cardCols:function(){var t=Object.keys(this.navs).length;return Math.round(12/t)}},mounted:function(){var t=this;this.$nextTick((function(){if(t.$route.query.nextpage){var e="/"+t.$route.query.nextpage.replace("-","/");t.$router.push({path:e})}t.$store.state.hash.info["drawer"]&&t.$store.commit("drawer",!0)}))}},Li=Mi,Fi=Object(u["a"])(Li,oi,ai,!1,null,"3f15dd1e",null),Ai=Fi.exports;f()(Fi,{VCol:Ct["a"],VRow:Tt["a"]});var zi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-drag-context",[i("v-container",{attrs:{fluid:""}},[!t.isLoading&&t.id?i("m-vuewer",{ref:"video",attrs:{id:t.id},on:{"run-noise-reduction":t.onNoiseReduction,"data-updated":t.onDataUpdated,"download-json":t.downloadJson}}):t._e()],1)],1)},Ni=[],Bi=i("4dec"),Gi=i("a669"),Ui=i.n(Gi),Ki=new Bi["default"]("mri_vuewer",{addons:[Ui.a]});Ki.version(6).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,metaData,textgrid,lastModifiedAt",frames:"++id, idx, time, fileId -> files.id",points:"++id, x, y, size, color, label, frameId -> frames.id",rects:"++id, x, y, width, height, rotation, scaleX, scaleY, size, color, label, frameId -> frames.id",polygons:"++id, points, size, color, label, frameId -> frames.id"}).upgrade((function(t){var e=Date.now();return t.files.toCollection().modify((function(t){t.lastModifiedAt=e}))})),Ki.version(5).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,metaData,textgrid,lastModifiedAt",frames:"++id, idx, time, fileId -> files.id",points:"++id, x, y, size, color, label, frameId -> frames.id",rects:"++id, x, y, width, height, rotation, scaleX, scaleY, size, color, label, frameId -> frames.id"}).upgrade((function(t){var e=Date.now();return t.files.toCollection().modify((function(t){t.lastModifiedAt=e}))})),Ki.version(4).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,metaData,textgrid",frames:"++id, idx, time, fileId -> files.id",points:"++id, x, y, size, color, label, frameId -> frames.id",rects:"++id, x, y, width, height, rotation, scaleX, scaleY, size, color, label, frameId -> frames.id"}),Ki.version(3).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,metaData,textgrid",frames:"++id, idx, time, fileId -> files.id",points:"++id, x, y, size, color, frameId -> frames.id",rects:"++id, x, y, width, height, rotation, scaleX, scaleY, size, color, frameId -> frames.id"}),Ki.version(2).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,metaData,frames,textgrid"}),Ki.version(1).stores({files:"++id,name,source,fps,duration,originSize,videoStream,audioStream,meta,frames,textgrid"});var qi=function(){return new Promise((function(t,e){Ki.files.toArray().then((function(e){var i=JSON.stringify(e),n=new Blob([i],{type:"application/json"});W["a"].file.download(n,"corpora.json"),t(!0)})).catch((function(t){return e(t)}))}))},Hi=function(t){return new Promise((function(e,i){try{var n=JSON.parse(t);Ki.files.clear().then((function(){Ki.files.bulkPut(n).then((function(){Ki.files.toArray().then((function(t){e(t)})).catch((function(t){return i(t)}))})).catch((function(t){return i(t)}))})).catch((function(t){return i(t)}))}catch(r){i(r)}}))},Xi=function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ki.files.get(Number(e));case 2:return i=t.sent,t.next=5,Ki.frames.where({fileId:i.id}).with({points:"points",rects:"rects"});case 5:return i.frames=t.sent,i.bname=i.name.split(".")[0],t.abrupt("return",i);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ji=function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.map((function(t){var e=t.data,i=t.frameId;return{x:e.x,y:e.y,size:e.size,color:e.color,frameId:i}})),t.next=3,Ki.points.bulkPut(i);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Wi=function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.map((function(t){var e=t.data,i=t.frameId;return{x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation,scaleX:e.scaleX,scaleY:e.scaleY,size:e.size,color:e.color,frameId:i}})),t.next=3,Ki.points.bulkPut(i);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Yi=function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e,i){var n,r,o,a,s,c,l,u,d,f,m,h,v,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=[],!i.frames){t.next=17;break}r=[],o=[],a=0,s=Object(R["a"])(i.frames);try{for(s.s();!(c=s.n()).done;)l=c.value,l.idx&&l.time&&(i.points&&r.push({data:i.points,idx:a}),i.rects&&o.push({data:i.rects,idx:a}),n.push({idx:l.idx,time:l.time,fileId:e}),a++)}catch(g){s.e(g)}finally{s.f()}if(!(o.length>0||r.length>0)){t.next=15;break}return t.next=10,Ki.frames.where({fileId:e}).toArray();case 10:u=t.sent,d=r.map((function(t){return{data:t.data,frameId:u[t.idx].id}})),f=o.map((function(t){return{data:t.data,frameId:u[t.idx].id}})),Ji(d),Wi(f);case 15:t.next=22;break;case 17:m=0,h=0,v=Math.floor(i.duration*i.fps),p=1/i.fps;while(m<v)m++,h+=p,n.push({idx:m,time:h,fileId:e});case 22:return t.next=24,Ki.frames.bulkPut(n);case 24:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),Zi=function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.lastModifiedAt=Date.now(),n=Object.keys(e),!e.name||!e.source){t.next=20;break}if(r=!1,-1===n.indexOf("fps")&&(r=!0),-1===n.indexOf("duration")&&(r=!0),-1===n.indexOf("originSize")&&(r=!0),-1===n.indexOf("videoStream")&&(r=!0),-1===n.indexOf("audioStream")&&(r=!0),!r){t.next=14;break}o=W["a"].file.toBuff(e.source),W["a"].video.info(o,function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={name:e.name,source:e.source,metaData:e.metaData||{},textgrid:e.textgrid||{},fps:n.videoStream.fps,duration:n.duration,originSize:n.originSize,videoStream:n.videoStream,audioStream:n.audioStream},t.next=3,Ki.files.put(r);case 3:i=t.sent,Yi(i,{frames:e.frames,fps:r.fps,duration:r.duration});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=20;break;case 14:return a={name:e.name,source:e.source,metaData:e.metaData||{},textgrid:e.textgrid||{},fps:e.fps,duration:e.duration,originSize:e.originSize,videoStream:e.videoStream,audioStream:e.audioStream},t.next=17,Ki.files.put(a);case 17:return i=t.sent,t.next=20,Yi(i,{frames:e.frames,fps:a.fps,duration:a.duration});case 20:return t.abrupt("return",i);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Qi=function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ki.frames.where({fileId:e}).toArray();case 2:i=t.sent,t.t0=regeneratorRuntime.keys(i);case 4:if((t.t1=t.t0()).done){t.next=20;break}return n=t.t1.value,t.next=8,Ki.points.where({frameId:n.id}).toArray();case 8:return r=t.sent,t.next=11,Ki.rects.where({frameId:n.id}).toArray();case 11:if(o=t.sent,!(r.length>0)){t.next=15;break}return t.next=15,Ki.points.bulkDelete(r.map((function(t){return t.id})));case 15:if(!(o.length>0)){t.next=18;break}return t.next=18,Ki.rects.bulkDelete(o.map((function(t){return t.id})));case 18:t.next=4;break;case 20:return t.next=22,Ki.frames.bulkDelete(i.map((function(t){return t.id})));case 22:return t.next=24,Ki.files.delete(e);case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tn=function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ki.files.where({name:e.name}).toArray();case 2:if(i=t.sent,!(i.length>0)){t.next=6;break}return t.next=6,Qi(i[0].id);case 6:return t.next=8,Zi(e);case 8:return n=t.sent,t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),en=function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ki.files.toArray();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),nn={files:Ki.files,frames:Ki.frames,points:Ki.points,rects:Ki.rects,polygons:Ki.polygons,dump:qi,load:Hi,get:Xi,gets:en,destory:Qi,put:tn,add:Zi},rn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-w-context-menu",{on:{"click-setting":t.onClickSetting,"click-save":t.fireUpdateData,"click-load-dropbox":t.onClickLoadDropbox,"click-image-edit":t.onClickImageEdit,"click-tier-add":t.onClickTierAdd,"click-tier-edit":t.onClickTierEdit,"click-tier-delete":t.onClickTierDelete,"click-upload":t.onUploadClick,"click-download":t.onDownloadClick,"click-window":t.onWindowClick,"click-noise-reduction":t.onClickNoiseReduction,"click-complate":t.onClickComplate,"click-record":t.onClickRecordContextMenu,"click-interval":t.onClickIntervalContextMenu}},[t.$store.state.loading.show?t._e():i("m-vuwer-layout",{ref:"layout",on:{resize:t.onResize},scopedSlots:t._u([{key:"video",fn:function(){return[t.$source?i("m-video-array",{ref:"videoArray",attrs:{src:t.$source,fps:t.$fps,frameOffset:t.frameOffset},on:{loadeddata:t.onLoadeddata,"frame-updated":t.onFrameUpdated,mouseover:function(e){return t.onMouseover("video-array")},keyup:t.onVideoArrayKeyup}}):t._e(),t.wavesurfer?i("m-vuwer-actions",{attrs:{fps:t.$fps},on:{"download-click":t.onDownloadClick,"upload-click":t.onUploadClick,mouseover:function(e){return t.onMouseover("actions")}}}):t._e()]},proxy:!0},{key:"table",fn:function(){return[i("m-text-grid",{ref:"tables",attrs:{frames:t.$frames,textgrid:t.$textgrid,"video-height":t.videoHeight},on:{"click-image-edit":t.onClickImageEdit,keyup:t.onTableKeyup,mouseover:function(e){return t.onMouseover("tables")}}})]},proxy:!0},{key:"bottom",fn:function(){return[i("m-diff-card",{ref:"diffCard",attrs:{hide:""}}),i("m-speed-dial",{on:{"click-save":t.fireUpdateData,"click-save-dropbox":t.fireUpdateData,"click-setting":t.onClickSetting,"click-detail":t.onClickDetail,"click-image-edit":t.onClickImageEdit,"click-tier-add":t.onClickTierAdd,"click-tier-edit":t.onClickTierEdit,"click-tier-delete":t.onClickTierDelete},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}}),i("m-detail-dialog",{on:{"download-click":t.onDownloadClick,"upload-click":t.onUploadClick},model:{value:t.dialog.detail.show,callback:function(e){t.$set(t.dialog.detail,"show",e)},expression:"dialog.detail.show"}}),t.$store.state.current.layout.mini?i("m-textgrid-dialog",{attrs:{frames:t.$frames,textgrid:t.$textgrid},on:{"click-image-edit":t.onClickImageEdit},model:{value:t.dialog.textgrid.show,callback:function(e){t.$set(t.dialog.textgrid,"show",e)},expression:"dialog.textgrid.show"}}):t._e(),i("m-setting-dialog",{model:{value:t.dialog.setting.show,callback:function(e){t.$set(t.dialog.setting,"show",e)},expression:"dialog.setting.show"}}),i("m-tier-dialog",{attrs:{tiers:t.tiers,current:t.current.tier.key},model:{value:t.dialog.tier.show,callback:function(e){t.$set(t.dialog.tier,"show",e)},expression:"dialog.tier.show"}}),i("m-tier-edit-dialog",{attrs:{tiers:t.tiers,current:t.current.tier.key},model:{value:t.dialog.tierEdit.show,callback:function(e){t.$set(t.dialog.tierEdit,"show",e)},expression:"dialog.tierEdit.show"}}),i("m-tier-delete-dialog",{attrs:{tiers:t.tiers,current:t.current.tier.key},model:{value:t.dialog.tierDelete.show,callback:function(e){t.$set(t.dialog.tierDelete,"show",e)},expression:"dialog.tierDelete.show"}}),i("m-image-edit-dialog",{model:{value:t.dialog.imageEdit.show,callback:function(e){t.$set(t.dialog.imageEdit,"show",e)},expression:"dialog.imageEdit.show"}}),i("m-complates-dialog",{model:{value:t.dialog.complates.show,callback:function(e){t.$set(t.dialog.complates,"show",e)},expression:"dialog.complates.show"}})]},proxy:!0}],null,!1,221568462)},[i("v-card",{attrs:{flat:""},on:{mouseover:function(e){return t.onMouseover("wave-surfer")}}},[i("wave-surfer",{ref:"wavesurfer",attrs:{normalize:"",responsive:"",scrollParent:"",showTextGrid:"",splitChannels:"",backend:"MediaElement","textgrid-max-height":"100px",source:t.videoElm,skipLength:t.skipLength,minPxPerSec:t.$minPxPerSec,drawingContextAttributes:t.drawingContextAttributes,cursorColor:t.$store.state.setting.cursorColor,freqRate:t.$store.state.setting.freqRate,showFreqLabel:t.$store.state.setting.showFreqLabel,showSpectrogram:t.$store.state.setting.showSpectrogram,showTimeLine:t.$store.state.setting.showTimeLine,spectrogramHeight:t.$store.state.setting.spectrogramHeight,targetChannel:t.$store.state.setting.targetChannel,waveColor:t.$store.state.setting.waveColor,progressColor:t.$store.state.setting.progressColor},on:{"spectrogram-render-end":t.onSpectrogramRenderEnd,"spectrogram-render-start":t.onSpectrogramRenderStart,"spectrogram-keyup":t.onWaveSurferKeyup,"waveform-keyup":t.onWaveSurferKeyup,"textgrid-click":t.onTextGridClick,"textgrid-current-update":t.onRecordUpdated,"textgrid-dblclick":t.onTextGridDblClick,"textgrid-keydown":t.onTextGridKeydown,"textgrid-update":t.onTextGridUpdate,"tier-add":t.onTextGridUpdate,"tier-delete":t.onTextGridUpdate,"tier-update":t.onTextGridUpdate},scopedSlots:t._u([{key:"textform",fn:function(){return[t.showTextField?i("m-record-text-field",{ref:"input",attrs:{"complate-key":t.current.key,disabled:null==t.current.tier.key},on:{enter:t.onUpdateRecordText,next:function(e){return t.onUpdateRecordText("next")},esc:t.onEscTextField},model:{value:t.current.tier.record.text,callback:function(e){t.$set(t.current.tier.record,"text",e)},expression:"current.tier.record.text"}}):t._e()]},proxy:!0}],null,!1,2733012415)},[t.isLoading?i("m-loading",{attrs:{text:"$vuetify.loading"}}):t._e()],1)],1)],1)],1)},on=[],an=i("de69"),sn=an["a"],cn=Object(u["a"])(sn,rn,on,!1,null,null,null),ln=cn.exports;f()(cn,{VCard:_t["a"]});var un={computed:{$name:{get:function(){return this.$store.state.current.video.filename},set:function(t){this.$store.commit("current/video/fileName",t)}},$source:{get:function(){return this.$store.state.current.video.source},set:function(t){this.$store.commit("current/video/source",t)}},$fps:{get:function(){return this.$store.state.current.video.fps},set:function(t){this.$store.commit("current/video/fps",t)}},$duration:{get:function(){return this.$store.state.current.video.duration},set:function(t){this.$store.commit("current/video/duration",t)}},$videoStream:{get:function(){return this.$store.state.current.video.videoStream},set:function(t){this.$store.commit("current/video/videoStream",t)}},$audioStream:{get:function(){return this.$store.state.current.video.audioStream},set:function(t){this.$store.commit("current/video/audioStream",t)}},$originSize:{get:function(){return this.$store.state.current.video.originSize},set:function(t){this.$store.commit("current/video/originSize",t)}}},methods:{$initVideo:function(){this.$store.dispatch("current/video/init")}}},dn={name:"vuewer",mixins:[un],components:{MVuewer:ln,MDragContext:Di},data:function(){return{id:null,item:{},textgrid:{},isLoading:!1,isChange:!1}},computed:{tag:function(){return"views:vuewer"},syncDropbox:function(){return this.$store.state.setting.syncDropbox},metaData:{get:function(){return this.$store.state.current.metaData},set:function(t){this.$store.commit("current/metaData",t)}},source:{get:function(){return this.$store.state.current.video.source},set:function(t){this.$store.commit("current/video/source",t)}},fps:{get:function(){return this.$store.state.current.video.fps},set:function(t){this.$store.commit("current/video/fps",t)}}},methods:{downloadJson:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$vuewer.db.get(Number(this.id));case 3:e=t.sent,i=this.$vuewer.io.json.toFile("".concat(e.bname,".json"),e),W["a"].file.download(i,i.name),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),"DataError"==t.t0.name?this.onError(t.t0,"The file does not exist.","Home"):this.onError(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),saveDropbox:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e,i,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$vuewer.dropbox.hasToken()){t.next=10;break}return this.$vuewer.loading.start("$vuetify.sending"),t.next=4,this.$vuewer.db.get(Number(this.id));case 4:e=t.sent,i="".concat(e.name.split(".")[0],".json"),n=this.$vuewer.io.json.toFile(i,e),this.$vuewer.dropbox.write("data/"+i,n).then((function(){r.$vuewer.snackbar.success("$vuetify.sended"),r.isChange=!1})).catch((function(t){var e="DROPBOX ERROR: ".concat(t.status," :").concat(t.error.error_summary);r.onError(t.error,e)})).finally((function(){r.$vuewer.loading.end()})),t.next=11;break;case 10:this.$vuewer.dropbox.auth();case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onError:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e?this.$vuewer.snackbar.error(e):this.$vuewer.snackbar.error(t),this.$vuewer.console.error(this.tag,t),i&&this.$router.push({name:i})},onIdChanged:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e?this.id=Number(e):(this.$vuewer.snackbar.error("There is no id."),this.$vuewer.console.error(this.tag,"NO ID ACCESS"),this.$router.push({name:"Home"}));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onNoiseReduction:function(t){var e=this;this.isLoading=!0,this.$vuewer.loading.start("$vuetify.loading"),setTimeout((function(){var i=e.$vuewer.io.file.toBuff(e.$source),n=null;if("afftdn"==t.type?n=e.$vuewer.io.video.afftdn(i):"anlmdn"==t.type?n=e.$vuewer.io.video.anlmdn(i):"bandpass"==t.type&&(n=e.$vuewer.io.video.bandpass(i,t.low,t.heigh)),null!==n&&n.MEMFS.length){var r=n.MEMFS[0],o=new Blob([r.data],{type:"video/mp4"});e.$source=null,e.$vuewer.io.video.toBase64(o).then((function(t){e.$source=t,e.isLoading=!1,e.$vuewer.loading.end()}))}else e.isLoading=!1,e.$vuewer.loading.end()}),1e3)},onDataUpdated:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i in this.item.textgrid=Object.assign({},e.textgrid),this.item.textgrid)this.item.textgrid[i]={values:this.item.textgrid[i].values,type:this.item.textgrid[i].type,parent:this.item.textgrid[i].parent};return this.item.lastModifiedAt=Date.now(),t.next=5,nn.files.put(this.item);case 5:this.saveDropbox();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onUnload:function(t){if(this.isChange&&this.syncDropbox&&this.$vuewer.dropbox.hasToken()){var e="Data you've inputted won't be synced in dropbox.";t.returnValue=e}}},watch:{"$route.params.id":function(t,e){var i=this;t!==e&&t&&(this.syncDropbox&&this.isChange?this.saveDropbox().then((function(){i.onIdChanged(t)})).catch((function(e){i.$vuewer.snackbar.error(e),i.onIdChanged(t)})):this.onIdChanged(t))}},created:function(){window.addEventListener("beforeunload",this.onUnload)},destroyed:function(){window.removeEventListener("beforeunload",this.onUnload)},mounted:function(){var t=this.$route.params.id;this.onIdChanged(t)},beforeRouteLeave:function(t,e,i){this.$initVideo(),this.isChange,this.syncDropbox&&this.$vuewer.dropbox.hasToken()?this.saveDropbox().then((function(){return i()})).catch((function(){return i(!1)})):i()}},fn=dn,mn=i("a523"),hn=Object(u["a"])(fn,zi,Ni,!1,null,"2b18482b",null),vn=hn.exports;f()(hn,{VContainer:mn["a"]});var pn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-drag-context",[i("m-view-layout",{attrs:{heading:t.heading,desc:t.$vuetify.lang.t(t.desc)}},[i("v-col",{class:t.colClass},[i("v-card",{staticClass:"mt-6"},[i("v-tabs",{attrs:{"fixed-tabs":"","background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab",[t._v("File")]),i("v-tab",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.textgrid.tier.interval"))+" ")]),i("v-tab",[t._v(" "+t._s(this.$vuetify.lang.t("$vuetify.textgrid.tier.point"))+" ")])],1),i("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab-item",[i("m-file-table")],1),i("v-tab-item",[i("m-file-interval-table",{attrs:{items:t.intervals}})],1),i("v-tab-item",[i("m-file-point-table",{attrs:{items:t.points}})],1)],1)],1),i("v-btn",{attrs:{dark:"",fab:"",fixed:"",bottom:"",right:"",color:"primary"},on:{click:t.fileAdd}},[i("v-icon",[t._v("mdi-plus")])],1),i("m-file-upload-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})],1)],1)],1)},gn=[],xn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{"show-expand":"","show-select":"","loading-text":"Loading... Please wait",headers:t.headers,items:t.files,loading:t.isLoading,expanded:t.expanded,"item-key":"name"},on:{"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"item.name",fn:function(e){var n=e.item;return[i("v-row",{attrs:{"align-content":"center"}},[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"100px"}},[t._v(" "+t._s(n.name)+" ")]),Object.keys(n.textgrid).length>0?i("v-chip",{attrs:{small:"",color:"success"}},[t._v(" "+t._s(Object.keys(n.textgrid).length)+" Tiers ")]):t._e()],1)]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-row",[i("v-col",{staticClass:"px-0",attrs:{cols:"3"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.playVideo(n)}}},[i("v-icon",[t._v("mdi-play")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"3"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.openItem(n)}}},[i("v-icon",[t._v(" mdi-import ")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"3"}},[i("v-btn",{attrs:{color:"green",fab:"",dark:"","x-small":""},on:{click:function(e){return t.editItem(n)}}},[i("v-icon",[t._v(" mdi-pencil ")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"3"}},[i("v-btn",{attrs:{color:"error",fab:"",dark:"","x-small":""},on:{click:function(e){return t.deleteItem(n)}}},[i("v-icon",[t._v(" mdi-delete ")])],1)],1)],1)]}},{key:"expanded-item",fn:function(t){var e=t.headers,n=t.item;return[i("td",{staticClass:"px-0",attrs:{colspan:e.length}},[i("m-video-stream-list",{attrs:{"video-stream":n.videoStream}}),i("v-divider",{attrs:{inset:""}}),i("m-audio-stream-list",{attrs:{"audio-stream":n.audioStream}})],1)]}},{key:"footer",fn:function(){return[i("v-card",{attrs:{flat:""}},[i("m-video-dialog",{attrs:{src:t.src},model:{value:t.dialogs.video,callback:function(e){t.$set(t.dialogs,"video",e)},expression:"dialogs.video"}}),i("m-video-meta-data-dialog",{attrs:{"current-item":t.metaData},on:{validated:function(e){return t.onValidated(e)}},model:{value:t.dialogs.meta,callback:function(e){t.$set(t.dialogs,"meta",e)},expression:"dialogs.meta"}}),t.isSelected?i("v-card-text",[i("v-text-field",{attrs:{filled:"",type:"text","append-icon":"mdi-send",label:t.$vuetify.lang.t("$vuetify.table.file.forms.setTier.label"),hint:t.$vuetify.lang.t("$vuetify.table.file.forms.setTier.hint")},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onClickAddTiers(e)},"click:append":t.onClickAddTiers},model:{value:t.tierTemplate,callback:function(e){t.tierTemplate=e},expression:"tierTemplate"}})],1):t._e(),t.isSelected?i("v-card-actions",[i("v-spacer")],1):t._e()],1)]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})},yn=[],bn=(i("a623"),i("45fc"),i("07ac"),i("2ca0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{title:t.$vuetify.lang.t(t.title),titleColor:"green"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{color:"grey lighten-2"}},[i("v-card-text",[t.dialog?i("m-video-meta-data-form",{ref:"form",attrs:{"current-item":t.currentItem},on:{validated:t.onValidated}}):t._e()],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validate}},[t._v("ok")])],1)],1)],1)}),wn=[],$n={name:"m-video-meta-data-dialog",components:{MCardDialog:I["a"],MVideoMetaDataForm:Vt},data:function(){return{title:"$vuetify.forms.video.steps.meta"}},props:{value:{type:Boolean},currentItem:{type:Object,default:function(){return{}}}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{dialog:function(t){0==t&&this.$refs.form.reset()}},methods:{close:function(){this.dialog=!1},validate:function(){this.$refs.form.validate()},onValidated:function(t){this.$emit("validated",t),this.close()}}},kn=$n,_n=Object(u["a"])(kn,bn,wn,!1,null,"00316d5f",null),Sn=_n.exports;f()(_n,{VBtn:v["a"],VCard:_t["a"],VCardActions:St["a"],VCardText:St["b"],VSpacer:w["a"]});var Cn=i("ea1e"),Tn=i("0bad"),Rn=i("94d2"),Vn={name:"m-file-table",components:{MVideoDialog:Cn["a"],MVideoMetaDataDialog:Sn,MVideoStreamList:Rn["a"],MAudioStreamList:Tn["a"]},data:function(){return{tierTemplate:"",dialogs:{video:!1,meta:!1},id:null,src:"",metaData:{},selected:[],expanded:[]}},computed:{isSelected:function(){return this.selected.length>0},query:function(){return{args:this.$store.getters["search/args"],kwargs:this.$store.getters["search/kwargs"],norargs:this.$store.getters["search/norargs"]}},dformat:function(){var t="dddd, MMMM Do YYYY, h:mm:ss a";return"ja"==this.$vuetify.lang.current&&(de.a.locale("ja"),t="YYYY/MM/DD h:mm:ss"),t},files:function(){var t=this,e=this.$store.state.files.files||[];return e=e.map((function(e){return e.size="".concat(e.originSize.width," * ").concat(e.originSize.height),e.lastModifiedText=de()(e.lastModifiedAt).format(t.dformat),e.search=Object(J["a"])({name:e.name,fps:String(e.fps),duration:String(e.duration),size:e.size,lastModifiedAt:e.lastModifiedText},e.metaData),e})),e=this.argFilter(this.query.args,e),e=this.kwargFilter(this.query.kwargs,e),e=this.norFilter(this.query.norargs,e),e},isLoading:function(){return this.$store.state.files.isLoading},fields:function(){return this.$store.getters["files/fields"]},headers:function(){var t="$vuetify.table.file",e=[{text:this.$vuetify.lang.t("".concat(t,".name")),value:"name"},{text:this.$vuetify.lang.t("".concat(t,".lastModifiedAt")),value:"lastModifiedText"},{text:this.$vuetify.lang.t("".concat(t,".fps")),value:"fps"},{text:this.$vuetify.lang.t("".concat(t,".duration")),value:"duration"},{text:this.$vuetify.lang.t("".concat(t,".size")),value:"size"}];if(this.fields){var i,n=Object(R["a"])(this.fields);try{for(n.s();!(i=n.n()).done;){var r=i.value;e.push({text:r,class:"text-truncate",value:"metaData.".concat(r)})}}catch(o){n.e(o)}finally{n.f()}}return e.push({text:this.$vuetify.lang.t("".concat(t,".actions")),value:"actions",width:"150px",sortable:!1,align:"end"}),e}},methods:{norFilter:function(t,e){var i=e;return Object.keys(t).length&&(i=e.filter((function(e){return Object.keys(t).map((function(i){return i in e.search&&-1==e.search[i].indexOf(t[i])})).every((function(t){return!0===t}))}))),i.length?i:e},kwargFilter:function(t,e){var i=e;return Object.keys(t).length&&(i=e.filter((function(e){return Object.keys(t).map((function(i){return i in e.search&&String(e.search[i]).startsWith(t[i])})).every((function(t){return!0===t}))}))),i.length?i:e},argFilter:function(t,e){var i=e;return t.length&&(i=e.filter((function(e){var i=Object.values(e.search);return t.map((function(t){return i.some((function(e){return String(e).startsWith(t)}))})).every((function(t){return!0===t}))}))),i.length?i:e},onClickAddTiers:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(){var e,i,n,r,o,a,s,c,l,u,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$vuewer.text.query(this.tierTemplate),i=Object.keys(e).filter((function(t){return"interval"==String(e[t]).toLowerCase()||"point"==String(e[t]).toLowerCase()})).map((function(t){return{key:t,type:e[t]}})),!i.length){t.next=41;break}this.$vuewer.loading.start("set tiers ..."),n=Object(R["a"])(this.selected),t.prev=5,n.s();case 7:if((r=n.n()).done){t.next=32;break}o=r.value,a=o.textgrid||{},s=Object(R["a"])(i);try{for(l=function(){var t=c.value;-1==Object.keys(a).findIndex((function(e){return e==t.key}))&&(a[t.key]={type:t.type,parent:null,values:[]})},s.s();!(c=s.n()).done;)l()}catch(m){s.e(m)}finally{s.f()}return t.prev=12,t.next=15,nn.files.get(o.id);case 15:return u=t.sent,u.lastModifiedAt=Date.now(),u.textgrid=a,t.next=20,nn.files.put(u);case 20:d=t.sent,f="update the textgrid of a file (id=".concat(d,")"),this.$vuewer.db.log("textgrid","PUT",f),this.$vuewer.console.log("textgrid",f),t.next=30;break;case 26:t.prev=26,t.t0=t["catch"](12),this.$vuewer.console.error("meta:textgrid:put",t.t0),this.$vuewer.snackbar.error(t.t0);case 30:t.next=7;break;case 32:t.next=37;break;case 34:t.prev=34,t.t1=t["catch"](5),n.e(t.t1);case 37:return t.prev=37,n.f(),t.finish(37);case 40:this.$vuewer.loading.end();case 41:case"end":return t.stop()}}),t,this,[[5,34,37,40],[12,26]])})));function e(){return t.apply(this,arguments)}return e}(),playVideo:function(t){this.src=t.source,this.dialogs.video=!0},openItem:function(t){this.$router.push({path:"/files/".concat(t.id)})},editItem:function(t){this.metaData=t.metaData,this.id=t.id,this.dialogs.meta=!0},deleteItem:function(t){var e=this,i=t.name,n=this;this.$store.dispatch("files/destroy",t.id).then((function(){var t=e.$vuetify.lang.t("$vuetify.pages.on.destroy",i);n.$vuewer.snackbar.warning(t)})).catch((function(t){n.$vuewer.console.error(t),n.$vuewer.snackbar.error(t)}))},onValidated:function(t){var e=this,i=this.files.findIndex((function(t){return t.id==e.id}));if(i>-1){var n=this.files[i];n.metaData=t,nn.files.put(n).then((function(t){nn.files.get(t).then((function(t){var r="update the metadata of a file (id=".concat(t.id,")");e.$vuewer.snackbar.success(r),e.files.splice(i,1,n)}))})).catch((function(t){e.$vuewer.snackbar.error(t),e.$vuewer.console.error(t)}))}}}},Pn=Vn,In=Object(u["a"])(Pn,xn,yn,!1,null,"9e71a48e",null),On=In.exports;f()(In,{VBtn:v["a"],VCard:_t["a"],VCardActions:St["a"],VCardText:St["b"],VChip:he["a"],VCol:Ct["a"],VDataTable:Re["a"],VDivider:jt["a"],VIcon:p["a"],VRow:Tt["a"],VSpacer:w["a"],VTextField:$["a"]});var jn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{headers:t.headers,items:t.$items,"item-key":"id","show-select":""},scopedSlots:t._u([{key:"item.start",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.start)+" ")])]}},{key:"item.end",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.end)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-row",[i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.playItem(n)}}},[i("v-icon",[t._v("mdi-play")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.trimItem(n)}}},[i("v-icon",[t._v("mdi-scissors-cutting")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.openItem(n)}}},[i("v-icon",[t._v("mdi-import")])],1)],1)],1)]}},{key:"footer",fn:function(){return[i("v-card",{attrs:{flat:""}},[i("m-video-dialog",{attrs:{src:t.src,start:t.start,end:t.end},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}}),t.selected.length>1?i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary"},on:{click:t.resynthesis}},[t._v(" Download (MP4 ZIP) ")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.resynthesisPng}},[t._v(" Download (PNG ZIP) ")])],1):t._e()],1)]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})},En=[],Dn=i("84bd"),Mn=Dn["a"],Ln=Object(u["a"])(Mn,jn,En,!1,null,"77c62893",null),Fn=Ln.exports;f()(Ln,{VBtn:v["a"],VCard:_t["a"],VCardActions:St["a"],VCol:Ct["a"],VDataTable:Re["a"],VIcon:p["a"],VRow:Tt["a"],VSpacer:w["a"]});var An=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{search:t.$keyword,headers:t.headers,items:t.items,"item-key":"id"},scopedSlots:t._u([{key:"item.time",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.time)+" ")])]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-row",[i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.playItem(n)}}},[i("v-icon",[t._v("mdi-play")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.trimItem(n)}}},[i("v-icon",[t._v("mdi-scissors-cutting")])],1)],1),i("v-col",{staticClass:"px-0",attrs:{cols:"4"}},[i("v-btn",{attrs:{fab:"",dark:"","x-small":""},on:{click:function(e){return t.openItem(n)}}},[i("v-icon",[t._v("mdi-import")])],1)],1)],1)]}},{key:"footer",fn:function(){return[i("m-video-dialog",{attrs:{src:t.src,start:t.start,end:t.end},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})]},proxy:!0}])})},zn=[],Nn=i("6854"),Bn=Nn["a"],Gn=Object(u["a"])(Bn,An,zn,!1,null,"1400b72e",null),Un=Gn.exports;f()(Gn,{VBtn:v["a"],VCol:Ct["a"],VDataTable:Re["a"],VIcon:p["a"],VRow:Tt["a"]});var Kn={name:"MetaManager",components:{MDragContext:Di,MViewLayout:Ri["a"],MFileUploadDialog:Gt,MFileTable:On,MFileIntervalTable:Fn,MFilePointTable:Un},data:function(){return{heading:"Data Manager",desc:"$vuetify.meta.disc",dialog:!1,tab:null}},methods:{fileAdd:function(){this.dialog=!0}},computed:{colClass:function(){return this.$vuetify.breakpoint.smAndUp?"":"ma-0 pa-0"},keyword:function(){return this.$store.state.search.keyword},records:function(){return this.$store.getters["files/records"]},intervals:function(){return this.records?this.records.filter((function(t){return"interval"==t.type})):[]},points:function(){return this.records?this.records.filter((function(t){return"point"==t.type})):[]}},mounted:function(){this.$store.dispatch("search/show")},beforeDestroy:function(){this.$store.dispatch("search/init")}},qn=Kn,Hn=Object(u["a"])(qn,pn,gn,!1,null,"3477bf20",null),Xn=Hn.exports;f()(Hn,{VBtn:v["a"],VCard:_t["a"],VCol:Ct["a"],VIcon:p["a"],VTab:Ve["a"],VTabItem:Pe["a"],VTabs:Ie["a"],VTabsItems:Oe["a"]});var Jn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-col",[i("m-t-card",{attrs:{dense:"",accordion:"",title:"SYSTEM SETTING"}},[i("v-card-text",[i("m-app-setting-from")],1)],1),i("m-t-card",{staticClass:"mt-5",attrs:{dense:"",accordion:"",title:"VUEWER SETTING"}},[i("v-card-text",[i("m-setting-from")],1)],1),i("v-btn",{staticClass:"my-5",attrs:{block:"",color:"error"},on:{click:t.setDefaultSetting}},[t._v(" Reset setting ")])],1)],1)},Wn=[],Yn=i("531d"),Zn=i("7c54"),Qn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form"},[i("label",[t._v(t._s(t.t(t.locale+".loading.label")))]),i("div",{staticClass:"mb-4"},[i("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:t.t(t.locale+".loading.shouldGetVideoInfo.label")},model:{value:t.$shouldGetVideoInfo,callback:function(e){t.$shouldGetVideoInfo=e},expression:"$shouldGetVideoInfo"}}),i("span",{staticClass:"caption ml-1"},[i("v-icon",{attrs:{small:""}},[t._v("mdi-information")]),t._v(" "+t._s(t.t(t.locale+".loading.shouldGetVideoInfo.hint"))+" ")],1)],1),i("v-checkbox",{attrs:{label:t.t(t.locale+".loading.shouldMovePageAferAddingFile.label")},model:{value:t.$shouldMovePageAferAddingFile,callback:function(e){t.$shouldMovePageAferAddingFile=e},expression:"$shouldMovePageAferAddingFile"}}),i("v-text-field",{attrs:{suffix:"sep = '"+t.$nameSep+"'",label:t.t(t.locale+".loading.nameFormat.label"),hint:t.t(t.locale+".loading.nameFormat.hint")},model:{value:t.$nameFormat,callback:function(e){t.$nameFormat=e},expression:"$nameFormat"}}),i("v-text-field",{attrs:{suffix:"MB",rules:t.rules.positiveIntegerRules,label:t.t(t.locale+".loading.maxVideoSize.label"),hint:t.t(t.locale+".loading.maxVideoSize.hint")},model:{value:t.$maxVideoSize,callback:function(e){t.$maxVideoSize=e},expression:"$maxVideoSize"}}),i("label",[t._v(t._s(t.t(t.locale+".app.label")))]),i("v-text-field",{staticClass:"mb-5",attrs:{label:t.t(t.locale+".app.timeout.label"),hint:t.t(t.locale+".app.timeout.hint"),rules:t.rules.positiveIntegerOrErrorRules,"persistent-hint":"",suffix:"Milli Sec"},model:{value:t.timeout,callback:function(e){t.timeout=e},expression:"timeout"}}),i("v-select",{staticClass:"mb-5",attrs:{items:t.filesOrderKeyChoices,"item-text":"text","item-value":"val",label:t.t(t.locale+".app.filesOrderKey.label")},model:{value:t.$filesOrderKey,callback:function(e){t.$filesOrderKey=e},expression:"$filesOrderKey"}}),i("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:t.t(t.locale+".app.showDev.label")},model:{value:t.$showDev,callback:function(e){t.$showDev=e},expression:"$showDev"}}),i("v-checkbox",{staticClass:"mt-0",attrs:{"hide-details":"",label:t.t(t.locale+".app.syncDropbox.label")},model:{value:t.$syncDropbox,callback:function(e){t.$syncDropbox=e},expression:"$syncDropbox"}})],1)},tr=[],er=i("90a6"),ir={name:"m-app-setting-form",mixins:[q["a"],K["a"]],data:function(){return{locale:"$vuetify.setting.form"}},computed:{filesOrderKeyChoices:function(){return[{text:this.t("".concat(this.locale,".app.filesOrderKey.choices.default")),val:"default"},{text:this.t("".concat(this.locale,".app.filesOrderKey.choices.name")),val:"name"},{text:this.t("".concat(this.locale,".app.filesOrderKey.choices.lastModifiedAt")),val:"lastModifiedAt"}]},timeout:{get:function(){return this.$store.state.snackbar.timeout},set:function(t){var e=Object(er["a"])(t);"number"==e?this.$store.commit("snackbar/timeout",t):"string"==e&&Number(t)&&this.$store.commit("snackbar/timeout",Number(t))}}},methods:{t:function(t){return this.$vuetify.lang.t(t)}}},nr=ir,rr=i("b974"),or=Object(u["a"])(nr,Qn,tr,!1,null,"4e3c3570",null),ar=or.exports;f()(or,{VCheckbox:rt["a"],VForm:ot["a"],VIcon:p["a"],VSelect:rr["a"],VTextField:$["a"]});var sr={name:"Setting",components:{MViewLayout:Ri["a"],MTCard:Yn["a"],MSettingFrom:Zn["a"],MAppSettingFrom:ar},data:function(){return{heading:"Setting"}},methods:{setDefaultSetting:function(){this.$store.dispatch("setting/setDefault")}},computed:{desc:function(){return"".concat(this.$vuetify.lang.t("$vuetify.setting.disc"))}}},cr=sr,lr=Object(u["a"])(cr,Jn,Wn,!1,null,"ca8b9e40",null),ur=lr.exports;f()(lr,{VBtn:v["a"],VCardText:St["b"],VCol:Ct["a"]});var dr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-col",{attrs:{cols:"12"}},[i("m-t-card",{attrs:{title:"Sample Videos"}},[i("v-list",{attrs:{flat:""}},[i("v-subheader",[t._v("Select one item for the live demo.")]),i("v-list-item-group",{attrs:{color:"primary"},model:{value:t.sample,callback:function(e){t.sample=e},expression:"sample"}},t._l(t.samples,(function(e,n){return i("v-list-item",{key:n},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-account")])],1),i("v-list-item-content",[i("v-list-item-title",{domProps:{textContent:t._s(e)}})],1)],1)})),1)],1)],1)],1)],1)},fr=[],mr={name:"Demo",components:{MViewLayout:Ri["a"],MTCard:Yn["a"]},data:function(){return{sample:null}},computed:{heading:function(){return"Live Demo"},samples:function(){return["sample1.mp4","sample2.mp4","sample3.mp4"]},desc:function(){return"".concat(this.$vuetify.lang.t("$vuetify.demo.disc"))}},watch:{sample:function(t,e){null!==t&&t!=e&&this.fetchVideo(this.samples[t])}},methods:{fetchVideo:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,o,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$vuewer.loading.start("downloading a demo file ..."),i=this.toUrl(e),t.prev=2,t.next=5,W["a"].file.fetch(i,e,{type:"video/mp4"});case 5:if(n=t.sent,!n){t.next=16;break}if(!n.arrayBuffer){t.next=15;break}return r=W["a"].video.initObj(),t.next=11,n.arrayBuffer();case 11:o=t.sent,W["a"].video.info(o,(function(t){r.fps=t.videoStream.fps,r.duration=t.duration,r.originSize=t.originSize,r.videoStream=t.videoStream,r.audioStream=t.audioStream,r.metaData={demo:!0},W["a"].file.toBase64(n).then((function(t){r.source=t,r.name="DEMO: ".concat(e),r.frames=[];var i=0,n=0,o=Math.floor(r.duration*r.fps),s=1/r.fps;while(i<o)i++,n+=s,r.frames.push({idx:i,time:n});a.$store.dispatch("files/push",r).then((function(t){a.$vuewer.snackbar.success("$vuetify.forms.video.messages.success"),a.$router.push({path:"/files/".concat(t)})})).catch((function(t){console.error(t)})).finally((function(){a.$vuewer.loading.end()}))}))})),t.next=16;break;case 15:this.$vuewer.loading.end();case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t["catch"](2),this.$vuewer.loading.end(),t.abrupt("return",null);case 22:case"end":return t.stop()}}),t,this,[[2,18]])})));function e(e){return t.apply(this,arguments)}return e}(),toUrl:function(t){return"https://raw.githubusercontent.com/qh73xe/mri-vuewer.dev/master/misc/".concat(t)}}},hr=mr,vr=i("1baa"),pr=i("e0c7"),gr=Object(u["a"])(hr,dr,fr,!1,null,"65635133",null),xr=gr.exports;f()(gr,{VCol:Ct["a"],VIcon:p["a"],VList:g["a"],VListItem:x["a"],VListItemContent:y["b"],VListItemGroup:vr["a"],VListItemIcon:ye["a"],VListItemTitle:y["d"],VSubheader:pr["a"]});var yr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("v-switch",{attrs:{label:"croping pngs"},model:{value:t.crop.show,callback:function(e){t.$set(t.crop,"show",e)},expression:"crop.show"}}),t.crop.show?i("v-row",[i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{type:"number",label:"x"},model:{value:t.crop.x,callback:function(e){t.$set(t.crop,"x",e)},expression:"crop.x"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{type:"number",label:"y"},model:{value:t.crop.y,callback:function(e){t.$set(t.crop,"y",e)},expression:"crop.y"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{type:"number",label:"width"},model:{value:t.crop.w,callback:function(e){t.$set(t.crop,"w",e)},expression:"crop.w"}})],1),i("v-col",{attrs:{cols:"12",md:"3"}},[i("v-text-field",{attrs:{type:"number",label:"height"},model:{value:t.crop.h,callback:function(e){t.$set(t.crop,"h",e)},expression:"crop.h"}})],1)],1):t._e(),i("v-text-field",{attrs:{type:"number",label:"frame"},model:{value:t.frame,callback:function(e){t.frame=e},expression:"frame"}}),i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}})],1)],1)],1)},br=[],wr={name:"video-png-converter",components:{MViewLayout:Ri["a"],MVideoInput:et},data:function(){return{frame:1,crop:{show:!1,x:0,y:0,w:0,h:0}}},computed:{heading:function(){return"Converter: mp4 to pngs"},desc:function(){return"mp4 ファイルを受け取り各フレーム毎の PNG ファイルを取得するデモです."}},methods:{onLoading:function(){this.$vuewer.loading.start("$vuetify.converting")},onLoaded:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,o,a,s,c,l,u,d,f,m,h,v,p,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.source){t.next=45;break}if(i=this.$vuewer.io.file.toBuff(e.source),this.crop=Object.assign({},this.crop,{x:Math.round(this.crop.x),y:Math.round(this.crop.y),w:Math.round(this.crop.w),h:Math.round(this.crop.h)}),n=this.crop.show?this.crop:null,r=e.name.split(".")[0],-1!=this.frame){t.next=38;break}return t.next=8,this.$vuewer.io.video.toPngs(i,e.fps,e.duration,n);case 8:if(o=t.sent,!o.MEMFS){t.next=36;break}a=[],s=Object(R["a"])(o.MEMFS),t.prev=12,s.s();case 14:if((c=s.n()).done){t.next=23;break}return l=c.value,u=new Blob([l.data],{type:l.type}),t.next=19,this.$vuewer.io.file.toBase64(u);case 19:d=t.sent,a.push({name:l.name,base64:d});case 21:t.next=14;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t["catch"](12),s.e(t.t0);case 28:return t.prev=28,s.f(),t.finish(28);case 31:return t.next=33,this.$vuewer.io.zip.toZip(a);case 33:f=t.sent,m="".concat(r,".zip"),this.$vuewer.io.file.download(f,m);case 36:t.next=45;break;case 38:return h=(this.frame+1)/Number(e.fps),t.next=41,this.$vuewer.video.toPng(e.source,e.originSize,h);case 41:v=t.sent,p=this.$vuewer.io.file.toBlob(v),g="".concat(r,"-").concat(this.frame,".png"),this.$vuewer.io.file.download(p,g);case 45:this.$vuewer.loading.end();case 46:case"end":return t.stop()}}),t,this,[[12,25,28,31]])})));function e(e){return t.apply(this,arguments)}return e}()}},$r=wr,kr=i("b73d"),_r=Object(u["a"])($r,yr,br,!1,null,"886b9792",null),Sr=_r.exports;f()(_r,{VCard:_t["a"],VCardText:St["b"],VCol:Ct["a"],VRow:Tt["a"],VSwitch:kr["a"],VTextField:$["a"]});var Cr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}})],1)],1)],1)},Tr=[],Rr={name:"video-wav-converter",components:{MViewLayout:Ri["a"],MVideoInput:et},computed:{heading:function(){return"Converter: mp4 to wav"},desc:function(){return"mp4 ファイルを受け取り wav ファイルに変換します"}},methods:{onLoading:function(){this.$vuewer.loading.start("$vuetify.converting")},onLoaded:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.source&&(i=this.$vuewer.io.file.toBuff(e.source),this.$vuewer.io.video.toWav(i).then((function(t){if(t.MEMFS.length){var i=t.MEMFS[0],r=new Blob([i.data],{type:i.type}),o=e.name.split(".")[0]+".wav";n.$vuewer.io.file.download(r,o)}})).catch((function(t){return n.$vuewer.snackbar.error(t)})).finally((function(){n.$vuewer.loading.end()})));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},Vr=Rr,Pr=Object(u["a"])(Vr,Cr,Tr,!1,null,"25084551",null),Ir=Pr.exports;f()(Pr,{VCard:_t["a"],VCardText:St["b"]});var Or=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("v-file-input",{attrs:{label:t.$vuetify.lang.t("$vuetify.io.mVideoInput.title")+"*",accept:".avi,.AVI,video/x-msvideo"},on:{change:t.onChange}})],1)],1)],1)},jr=[],Er={name:"avi-wav-converter",components:{MViewLayout:Ri["a"]},computed:{heading:function(){return"Converter: avi to mp4"},desc:function(){return"avi ファイルを受け取り mp4 ファイルに変換します"}},methods:{onChange:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,o,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$vuewer.loading.start("$vuetify.converting"),i=e.name,t.next=4,this.$vuewer.io.file.toBase64(e);case 4:if(this.source=t.sent,!e.arrayBuffer){t.next=11;break}return t.next=8,e.arrayBuffer();case 8:n=t.sent,r=this.$vuewer.io.video.toMp4(n),r.MEMFS.length&&(o=r.MEMFS[0],a=new Blob([o.data],{type:o.type}),s=i.split(".")[0]+".mp4",this.$vuewer.io.file.download(a,s),this.$vuewer.loading.end());case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},Dr=Er,Mr=Object(u["a"])(Dr,Or,jr,!1,null,"ced97b2a",null),Lr=Mr.exports;f()(Mr,{VCard:_t["a"],VCardText:St["b"],VFileInput:Q["a"]});var Fr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}})],1),t.video.source?i("video",{attrs:{src:t.video.source,controls:""}}):t._e(),t.baseInfo?i("o-list",{attrs:{obj:t.baseInfo,caption:"基本情報"}}):t._e(),t.video.originSize?i("o-list",{attrs:{obj:t.video.originSize,caption:"画像サイズ"}}):t._e(),t.video.videoStream?i("o-list",{attrs:{obj:t.video.videoStream,caption:"動画コーディック"}}):t._e(),t.video.audioStream?i("o-list",{attrs:{obj:t.video.audioStream,caption:"音声コーディック"}}):t._e()],1),i("m-loading-dialog",{model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t._v(" "+t._s(t.status)+" ")])],1)},Ar=[],zr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",[i("v-subheader",[t._v(t._s(t.caption))]),t._l(t.obj,(function(e,n){return i("v-list-item",{key:n},[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(n)+": "+t._s(e)+" ")])],1)],1)}))],2)},Nr=[],Br={name:"o-list",props:{obj:{type:Object},caption:{type:String}}},Gr=Br,Ur=Object(u["a"])(Gr,zr,Nr,!1,null,"29613f83",null),Kr=Ur.exports;f()(Ur,{VList:g["a"],VListItem:x["a"],VListItemContent:y["b"],VListItemTitle:y["d"],VSubheader:pr["a"]});var qr={name:"get-video-info-input",components:{MViewLayout:Ri["a"],MLoadingDialog:Ke["a"],MVideoInput:et,OList:Kr},data:function(){return{heading:"Example: Get Video Info",desc:"mp4 ファイルを受け取りファイル情報を取得するデモです",isLoading:!1,video:{},status:""}},computed:{baseInfo:function(){return this.video.name?{name:this.video.name,fps:this.video.fps,duration:this.video.duration}:null}},methods:{onLoading:function(){this.isLoading=!0,this.status="ファイル情報を取得中..."},onLoaded:function(t){this.isLoading=!1,this.video=t||{}}}},Hr=qr,Xr=Object(u["a"])(Hr,Fr,Ar,!1,null,"4d046c4c",null),Jr=Xr.exports;f()(Xr,{VCard:_t["a"],VCardText:St["b"]});var Wr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-title",[t._v(" MRI-VUEWER で使用するファイルオブジェクト ")]),i("v-divider"),i("pre",[t._v('      {\n        name: String,   // ファイル名\n        source: String, // Base64 形式で文字列化された動画ファイル\n        fps: Number,    // 動画ファイルの FPS\n        duration: Number, // 動画ファイルの長さ\n\n        // 動画サイズ\n        originSize: {\n          width: Number,\n          height: Number\n        },\n\n        // 動画コーディック\n        videoStream: {\n          codec_name: String // h264 (High) (avc1 / 0x31637661)\n          pix_fmt: String    // yuv420p\n          bitrate: Number    // 265\n          fps: Number        // 13.79\n          tbr: Number        // 13.79\n          tbn: Number        // 13792\n          tbc: Number        // 27.58\n        },\n\n        // 音声コーディック\n        audioStream: {\n          codec_name: String     // aac (LC) (mp4a / 0x6134706D)\n          sample_rate: Number    // 44100\n          channel_layout: String // mono\n          sample_fmt: String     // fltp\n          bitrate: Number        // 69\n        },\n\n        // メタ情報\n        meta: {\n          key: String,\n          ...\n        },\n\n        // 画像アノテーション情報\n        frames: [\n          {\n            idx: null,       // フレーム番号\n            time: float,     // 時間\n            points: [\n              {\n                label: String,\n                color: String,\n                x: Number,\n                y: Number\n              },\n              ...\n            ],\n            rects: [\n              {\n                label: String,\n                color: String,\n                width: Number,\n                height: Number,\n                angle: Number\n              },\n              ...\n            ]\n          },\n          ...\n        ],\n\n        // 時間アノテーション情報\n        textgrid: {\n          key: {\n            type: "interval" || "point",\n            values: [ \n              { time: Number, text: String },\n              ...\n            ]\n          },\n          ...\n        }\n      }\n    ')]),i("v-divider")],1)],1)},Yr=[],Zr={name:"current",components:{MViewLayout:Ri["a"]},data:function(){return{heading:"Example: Current",desc:"Vuewer が参照するデータの基本形に関して説明をします"}}},Qr=Zr,to=Object(u["a"])(Qr,Wr,Yr,!1,null,"b8c660fa",null),eo=to.exports;f()(to,{VCard:_t["a"],VCardTitle:St["c"],VDivider:jt["a"]});var io=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}})],1),i("v-card-text",[i("pre",[t._v(t._s(t.video))])])],1),i("m-loading-dialog",{model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t._v(t._s(t.status))])],1)},no=[],ro={name:"get-fo",components:{MViewLayout:Ri["a"],MVideoInput:et,MLoadingDialog:Ke["a"]},data:function(){return{video:{},isLoading:!1,status:""}},computed:{heading:function(){return"Example: Get F0"},desc:function(){return"mp4 ファイルを受け取り f0 情報を取得するデモです"}},methods:{onLoading:function(){this.isLoading=!0,this.status="ファイル情報を取得中..."},onLoaded:function(t){if(t.source){var e=this.$vuewer.io.file.toBuff(t.source),i=this.$vuewer.io.video.toWav(e);i.MEMFS&&console.log(i.MEMFS[0])}this.isLoading=!1}}},oo=ro,ao=Object(u["a"])(oo,io,no,!1,null,"7deabf7a",null),so=ao.exports;f()(ao,{VCard:_t["a"],VCardText:St["b"]});var co=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("m-video-regist-from",{on:{loaded:t.onLoaded}}),i("v-card",[i("v-data-table",{attrs:{headers:t.headers,loading:t.videoLoaing,"loading-text":"Loading... Please wait",items:t.videos},scopedSlots:t._u([{key:"item.video",fn:function(t){var e=t.item;return[i("video",{attrs:{height:"100",src:e.source}})]}},{key:"item.size",fn:function(e){var i=e.item;return[t._v(" "+t._s(i.originSize.width)+" x "+t._s(i.originSize.height)+" ")]}},{key:"item.frame_num",fn:function(e){var i=e.item;return[t._v(" "+t._s(i.frames.length)+" ")]}},{key:"item.tiers",fn:function(e){var i=e.item;return[t._v(" "+t._s(Object.keys(i.textgrid).length)+" ")]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-btn",{attrs:{color:"error",dark:"",fab:""},on:{click:function(e){return t.deleteItem(n)}}},[i("v-icon",[t._v(" mdi-delete ")])],1)]}}])})],1),i("v-snackbar",{attrs:{bottom:"",right:""},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(" "+t._s(t.snackbar.text)+" ")])],1)},lo=[],uo={name:"video-register",components:{MViewLayout:Ri["a"],MVideoRegistFrom:At},data:function(){return{heading:"Example: Video Registration",desc:"mp4 ファイルを受け取り内部 DB に登録するデモです",videos:[],videoLoaing:!1,headers:[{text:"ID",value:"id"},{text:"video",value:"video"},{text:"Name",value:"name"},{text:"FPS",value:"fps"},{text:"Duration",value:"duration"},{text:"Origin Size",value:"size"},{text:"Frame Num",value:"frame_num"},{text:"Tier Num",value:"tiers"},{text:"Actions",value:"actions"}],snackbar:{show:!1,text:""}}},methods:{onLoaded:function(t){t&&(this.loadItems(),this.snackbar.show=!0,this.snackbar.text="Add video: ".concat(t.id,": ").concat(t.name))},loadItems:function(){var t=this;this.videos=[],this.videoLoaing=!0,nn.files.toArray().then((function(e){var i,n=Object(R["a"])(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;t.videos.push(r)}}catch(o){n.e(o)}finally{n.f()}t.videoLoaing=!1}))},deleteItem:function(t){nn.files.delete(t.id),this.loadItems()}},mounted:function(){this.loadItems()}},fo=uo,mo=Object(u["a"])(fo,co,lo,!1,null,"203133d8",null),ho=mo.exports;f()(mo,{VBtn:v["a"],VCard:_t["a"],VDataTable:Re["a"],VIcon:p["a"],VSnackbar:ze["a"]});var vo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-card-text",[i("v-file-input",{attrs:{label:t.$vuetify.lang.t("$vuetify.io.mVideoInput.title")+"*",accept:"video/mp4",rules:t.videoRules,"show-size":""},on:{change:t.onChange}})],1)],1)],1)},po=[],go=i("6677"),xo=go["a"],yo=Object(u["a"])(xo,vo,po,!1,null,"4cf5dfca",null),bo=yo.exports;f()(yo,{VCard:_t["a"],VCardText:St["b"],VFileInput:Q["a"]});var wo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("m-video-input",{on:{loading:t.onLoading,loaded:t.onLoaded}})],1),i("m-loading-dialog",{model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t._v(" "+t._s(t.status)+" ")]),i("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"400"}},[t.isLoaded&&t.video.source?i("m-video",{attrs:{controls:"",src:t.video.source,frames:t.frames,originSize:t.video.originSize},on:{click:function(e){return t.onEvent(e,"click")},dblclick:function(e){return t.onEvent(e,"dblclick")},loadeddata:function(e){return t.onEvent(e,"loadeddata")},timeupdate:function(e){return t.onEvent(e,"timeupdate")}}}):t._e()],1)],1)},$o=[],ko=i("89a7"),_o={name:"video-card",components:{MVideoInput:et,MLoadingDialog:Ke["a"],MVideo:ko["a"],MViewLayout:Ri["a"]},data:function(){return{heading:"Example: VideoCard",desc:"キャンバス付きビデオ表示コンポーネントの例です",status:"",isLoading:!1,isLoaded:!1,video:{},frames:[]}},methods:{onEvent:function(t,e){console.log(e,t)},onLoading:function(){this.isLoading=!0,this.isLoaded=!1,this.video={},this.status="ファイル情報を取得中..."},onLoaded:function(t){if(t){this.video=t;var e=Math.floor(this.video.duration*this.video.fps),i=1/this.video.fps,n=0,r=0;this.frames=[];while(n<e)r+=i,this.frames.push({i:n,time:r,points:[{x:n/e*this.video.originSize.width,y:this.video.originSize.height/2,size:5,color:"red"},{x:n/e*this.video.originSize.width,y:this.video.originSize.height/3,size:5,color:"green"}],rects:[{x:this.video.originSize.width/2,y:this.video.originSize.height/2,width:this.video.originSize.width/10,height:this.video.originSize.height/10,rotation:n/e*360,fill:"blue"}],texts:[{x:10,y:10,text:"Frame: ".concat(n,"/").concat(e),size:20,fontStyle:"bold",color:"yellow"}]}),n++;this.loaded=!0}else this.video={};this.isLoading=!1,this.isLoaded=!0}}},So=_o,Co=Object(u["a"])(So,wo,$o,!1,null,"0fa24474",null),To=Co.exports;f()(Co,{VCard:_t["a"]});var Ro=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("m-window-card",{attrs:{x:0,y:0,title:"window-card","max-width":"400px"}},[i("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:"https://cdn.vuetifyjs.com/images/cards/docks.jpg"}},[i("v-card-title",[t._v("Top 10 Australian beaches")])],1)],1),i("m-window-card",{attrs:{hide:"",right:"",title:"right-card","max-width":"300px"}},[i("v-card",{attrs:{tile:"",flat:""}},[i("v-img",{staticClass:"white--text align-end",attrs:{src:"https://cdn.vuetifyjs.com/images/cards/house.jpg",gradient:"to bottom, rgba(0,0,0,.5), rgba(0,0,0,.5)",height:"200px"}},[i("v-card-title",[t._v("Pre-fab homes")])],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-heart")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-bookmark")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-share-variant")])],1)],1)],1)],1),i("m-window-card",{attrs:{hide:"",bottom:"",title:"bottom-card","max-width":"200px"}},[i("v-card",{attrs:{tile:"",flat:""}},[i("v-img",{staticClass:"white--text align-end",attrs:{src:"https://cdn.vuetifyjs.com/images/cards/house.jpg",height:"100px",gradient:"to bottom, rgba(0,0,0,.5), rgba(0,0,0,.5)"}},[i("v-card-title",[t._v("Pre-fab homes")])],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-heart")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-bookmark")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-share-variant")])],1)],1)],1)],1),i("m-window-card",{attrs:{hide:"",right:"",bottom:"",title:"bottom-right-card","max-width":"450px"}},[i("v-card",{attrs:{tile:"",flat:""}},[i("v-img",{staticClass:"white--text align-end",attrs:{src:"https://cdn.vuetifyjs.com/images/cards/house.jpg",height:"100px",gradient:"to bottom, rgba(0,0,0,.5), rgba(0,0,0,.5)"}},[i("v-card-title",[t._v("Pre-fab homes")])],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-heart")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-bookmark")])],1),i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-share-variant")])],1)],1)],1)],1),i("m-window-sheet",{scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",fab:"",fixed:"",bottom:"",right:""}},"v-btn",r,!1),n),[i("v-icon",{attrs:{dark:""}},[t._v("mdi-menu")])],1)]}}])})],1)},Vo=[],Po=i("9e4d"),Io=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-bottom-sheet",{scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.sheet,callback:function(e){t.sheet=e},expression:"sheet"}},[i("v-list",[i("v-subheader",[t._v("Open in")]),t._l(t.cards,(function(e,n){return i("v-list-item",{key:n,on:{click:function(i){return t.open(e)}}},[e.icon?i("v-list-item-icon",[i("v-icon",[t._v(t._s(e.icon))])],1):t._e(),i("v-list-item-title",[t._v(t._s(e.title.toUpperCase()))])],1)}))],2)],1)},Oo=[],jo={name:"m-window-sheet",data:function(){return{cards:[],sheet:!1}},methods:{open:function(t){this.sheet=!1,t.open()}},mounted:function(){this.cards=this.$store.state.wcards.closings},beforeDestroy:function(){this.$store.dispatch("wcards/init")}},Eo=jo,Do=Object(u["a"])(Eo,Io,Oo,!1,null,"5f87812e",null),Mo=Do.exports;f()(Do,{VBottomSheet:Te["a"],VIcon:p["a"],VList:g["a"],VListItem:x["a"],VListItemIcon:ye["a"],VListItemTitle:y["d"],VSubheader:pr["a"]});var Lo={name:"window-card",components:{MViewLayout:Ri["a"],MWindowCard:Po["a"],MWindowSheet:Mo},data:function(){return{heading:"Example: WindowCard",desc:"親要素の中を自由に移動できるカードのデモです"}}},Fo=Lo,Ao=Object(u["a"])(Fo,Ro,Vo,!1,null,"e8334ce8",null),zo=Ao.exports;f()(Ao,{VBtn:v["a"],VCard:_t["a"],VCardActions:St["a"],VCardTitle:St["c"],VIcon:p["a"],VImg:ve["a"],VSpacer:w["a"]});var No=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-view-layout",{attrs:{heading:t.heading,desc:t.desc}},[i("v-card",[i("v-file-input",{attrs:{accept:"image/*",label:"image file"},on:{change:t.onChange}})],1),t.src?i("v-card",{staticClass:"mx-auto mt-5",attrs:{"max-width":"400"}},[i("frame-editor",{attrs:{src:t.src}})],1):t._e()],1)},Bo=[],Go=i("b874"),Uo={name:"image-edit",components:{MViewLayout:Ri["a"],FrameEditor:Go["a"]},data:function(){return{heading:"Example: ImageEdit",desc:"画像編集カードの例です",src:null}},methods:{onChange:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.src=null,!e){t.next=5;break}return t.next=4,W["a"].file.toBase64(e);case 4:this.src=t.sent;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},Ko=Uo,qo=Object(u["a"])(Ko,No,Bo,!1,null,"b64891e8",null),Ho=qo.exports;f()(qo,{VCard:_t["a"],VFileInput:Q["a"]});var Xo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-stage",{ref:"stage",attrs:{config:t.stageSize},on:{mousedown:t.handleStageMouseDown,touchstart:t.handleStageMouseDown}},[i("v-layer",{ref:"layer"},[t._l(t.rectangles,(function(e){return i("v-rect",{key:e.id,attrs:{config:e},on:{transformend:t.handleTransformEnd}})})),i("v-transformer",{ref:"transformer"})],2)],1)},Jo=[],Wo=(i("cb29"),i("7db0"),i("362d")),Yo=i.n(Wo),Zo=window.innerWidth,Qo=window.innerHeight,ta={name:"rects",data:function(){return{stageSize:{width:Zo,height:Qo},rectangles:[{rotation:0,x:10,y:10,width:100,height:100,scaleX:1,scaleY:1,fill:"red",name:"rect1",draggable:!0},{rotation:0,x:150,y:150,width:100,height:100,scaleX:1,scaleY:1,fill:"green",name:"rect2",draggable:!0}],selectedShapeName:""}},methods:{handleTransformEnd:function(t){var e=this,i=this.rectangles.find((function(t){return t.name===e.selectedShapeName}));i.x=t.target.x(),i.y=t.target.y(),i.rotation=t.target.rotation(),i.scaleX=t.target.scaleX(),i.scaleY=t.target.scaleY(),i.fill=Yo.a.Util.getRandomColor()},handleStageMouseDown:function(t){if(t.target===t.target.getStage())return this.selectedShapeName="",void this.updateTransformer();var e="Transformer"===t.target.getParent().className;if(!e){var i=t.target.name(),n=this.rectangles.find((function(t){return t.name===i}));this.selectedShapeName=n?i:"",this.updateTransformer()}},updateTransformer:function(){var t=this.$refs.transformer.getNode(),e=t.getStage(),i=this.selectedShapeName,n=e.findOne("."+i);n!==t.node()&&(n?t.nodes([n]):t.nodes([]),t.getLayer().batchDraw())}}},ea=ta,ia=Object(u["a"])(ea,Xo,Jo,!1,null,"3b9cd274",null),na=ia.exports,ra="example",oa=[eo,Jr,ho,bo,To,so,zo,Ho,na],aa=oa.map((function(t){return{path:"/".concat(ra,"/").concat(t.name),name:"".concat(t.name),component:t,develop:!0}}));n["default"].use(ri["a"]);var sa=[{path:"/",name:"Home",icon:"mdi-home",component:Ai},{path:"/mata",name:"Meta",icon:"mdi-database-search",component:Xn},{path:"/convarters/video2png",component:Sr},{path:"/convarters/video2wav",component:Ir},{path:"/convarters/avi2mp4",component:Lr},{path:"/files/",component:vn},{path:"/files/:id",component:vn},{path:"/demo",name:"Demo",icon:"mdi-code-brackets",component:xr},{path:"/setting",name:"Setting",icon:"mdi-cog",component:ur},{path:"/about",icon:"mdi-information",name:"About",component:function(){return i.e("about").then(i.bind(null,"f820"))}}];sa=sa.concat(aa);var ca=new ri["a"]({mode:"history",base:"/mri-vuewer.ver2/",routes:sa}),la=ca,ua=i("2f62"),da={namespaced:!0,state:function(){return{cards:[],closings:[]}},mutations:{setCard:function(t,e){t.cards.push(e)},closing:function(t,e){if(e._uid){var i=t.closings.findIndex((function(t){return t._uid==e._uid}));-1==i&&t.closings.push(e)}else{var n=t.closings.findIndex((function(t){return t.title==e}));-1==n&&t.closings.push(e)}},open:function(t,e){if(e._uid){var i=t.closings.findIndex((function(t){return t._uid==e._uid}));i>-1&&t.closings.splice(i,1)}else{var n=t.closings.findIndex((function(t){return t.title==e}));n>-1&&t.closings.splice(n,1)}}},actions:{init:function(t){t.state.cards=[],t.state.closings=[]},setZIndex:function(t,e){var i=t.state.cards,n=i[e.id];for(var r in n.setZIndex(e.zIndex+i.length),i)r!=e.id&&i[r].setZIndex&&i[r].setZIndex(1)}}},fa=i("d623"),ma=fa["a"].snackbar,ha=-1,va={namespaced:!0,state:function(){return{show:!1,message:"",type:"",color:"",timeout:Number(ma.get("timeout"))||ha}},mutations:{loading:function(t,e){t.loading=e},show:function(t,e){t.show=e},type:function(t,e){t.type=e},message:function(t,e){t.message=e},color:function(t,e){t.color=e},timeout:function(t,e){t.timeout=e,ma.set("timeout",Number(e))}},actions:{init:function(t){t.commit("loading",!1),t.commit("show",!1),t.commit("message",""),t.commit("color",""),t.commit("type",""),t.commit("timeout",ha)},error:function(t,e){t.commit("message",e),t.commit("color","error"),t.commit("type","error"),t.commit("show",!0)},warning:function(t,e){t.commit("message",e),t.commit("color","warning darken-1"),t.commit("type","warning"),t.commit("show",!0)},info:function(t,e){t.commit("message",e),t.commit("color",""),t.commit("type","info"),t.commit("show",!0)},success:function(t,e){t.commit("message",e),t.commit("color","success"),t.commit("type","success"),t.commit("show",!0)}}},pa=(i("13d5"),i("2fe6")),ga=i("2db4"),xa={namespaced:!0,state:function(){return{input:"",keyword:"",params:"",query:{},show:!1}},mutations:{input:function(t,e){t.input=e,t.keyword=ga["a"].trim(e),t.params=ga["a"].toParam(e),t.query=ga["a"].toQuery(t.params)},params:function(t,e){t.params=ga["a"].toParam(e),t.query=ga["a"].toQuery(t.params)},show:function(t,e){t.show=e}},actions:{init:function(t){t.state.input="",t.state.keyword="",t.state.params="",t.state.query={},t.state.show=!1},show:function(t){t.commit("show",!0),t.commit("input","")}},getters:{args:function(t){return Object.keys(t.query).filter((function(e){return!0===t.query[e]}))},norargs:function(t){var e=Object.keys(t.query).filter((function(e){return~e.indexOf("!")&&!0!==t.query[e]}));return e.reduce((function(e,i){return Object(J["a"])(Object(J["a"])({},e),{},Object(pa["a"])({},i.replace("!",""),t.query[i]))}),{})},kwargs:function(t){var e=Object.keys(t.query).filter((function(e){return!~e.indexOf("!")&&!0!==t.query[e]}));return e.reduce((function(e,i){return Object(J["a"])(Object(J["a"])({},e),{},Object(pa["a"])({},i,t.query[i]))}),{})}}},ya={namespaced:!0,state:function(){return{logs:[],errors:[],dbLogs:[],show:!1}},mutations:{show:function(t,e){t.show=e},log:function(t,e){var i={time:Date.now(),msg:e.msg,tag:e.tag||"default"};t.logs.push(i)},dblog:function(t,e){if(e.msg&&e.tag&&e.table){var i={time:Date.now(),tag:e.tag,table:e.table,msg:e.msg};t.dbLogs.push(i)}},error:function(t,e){var i={time:Date.now(),tag:e.tag,msg:e.msg};t.errors.push(i)}},actions:{dblog:function(t,e){t.commit("dblog",e)},error:function(t,e){t.commit("error",e)}}},ba={namespaced:!0,state:function(){return{show:!1,message:""}},mutations:{show:function(t,e){t.show=e,0==e&&(t.message="")},message:function(t,e){t.message=e}},actions:{start:function(t,e){t.commit("message",e),0==t.state.show&&t.commit("show",!0)},finish:function(t){t.commit("show",!1)}}},wa=fa["a"].wavesurfer,$a={syncPrevPoints:!1,syncPrevRects:!1,syncDropbox:!1,addRecordKey:"dbl",cursorColor:"#333",deleteRecordKey:"delete",freqRate:.25,maxVideoSize:5,minPxPerSec:100,playOffset:5,progressColor:"#555",shouldGetFrameInfo:!0,shouldGetVideoInfo:!0,shouldMovePageAferAddingFile:!1,showDev:!1,showFrameInVideo:!0,showPointsInVideo:!0,showRectsInVideo:!0,showFreqLabel:!1,showSpectrogram:!0,showTimeLine:!0,spectrogramHeight:256,targetChannel:0,waveColor:"#333",nameSep:"-",nameFormat:"",filesOrderKey:"default"},ka=$a,_a={namespaced:!0,state:function(){return{syncPrevPoints:null==wa.get("syncPrevPoints")?ka.syncPrevPoints:wa.get("syncPrevPoints"),syncPrevRects:null==wa.get("syncPrevRects")?ka.syncPrevRects:wa.get("syncPrevRects"),addRecordKey:wa.get("addRecordKey")||ka.addRecordKey,cursorColor:wa.get("cursorColor")||ka.cursorColor,deleteRecordKey:wa.get("deleteRecordKey")||ka.deleteRecordKey,freqRate:Number(wa.get("freqRate"))||ka.freqRate,maxVideoSize:Number(wa.get("maxVideoSize"))||ka.maxVideoSize,minPxPerSec:Number(wa.get("minPxPerSec"))||ka.minPxPerSec,playOffset:Number(wa.get("playOffset"))||ka.playOffset,progressColor:wa.get("progressColor")||ka.progressColor,syncDropbox:null==wa.get("syncDropbox")?ka.syncDropbox:wa.get("syncDropbox"),shouldGetFrameInfo:null==wa.get("shouldGetFrameInfo")?ka.shouldGetFrameInfo:wa.get("shouldGetFrameInfo"),shouldGetVideoInfo:null==wa.get("shouldGetVideoInfo")?ka.shouldGetVideoInfo:wa.get("shouldGetVideoInfo"),shouldMovePageAferAddingFile:null==wa.get("shouldMovePageAferAddingFile")?ka.shouldMovePageAferAddingFile:wa.get("shouldMovePageAferAddingFile"),showDev:null==wa.get("showDev")?ka.showDev:wa.get("showDev"),showFrameInVideo:null==wa.get("showFrameInVideo")?ka.showFrameInVideo:wa.get("showFrameInVideo"),showPointsInVideo:null==wa.get("showPointsInVideo")?ka.showPointsInVideo:wa.get("showPointsInVideo"),showRectsInVideo:null==wa.get("showRectsInVideo")?ka.showRectsInVideo:wa.get("showRectsInVideo"),showFreqLabel:null==wa.get("showFreqLabel")?ka.showSpectrogram:wa.get("showFreqLabel"),showSpectrogram:null==wa.get("showSpectrogram")?ka.showSpectrogram:wa.get("showSpectrogram"),showTimeLine:null==wa.get("showTimeLine")?ka.showTimeLine:wa.get("showTimeLine"),spectrogramHeight:Number(wa.get("spectrogramHeight"))||ka.spectrogramHeight,targetChannel:Number(wa.get("targetChannel"))||ka.targetChannel,waveColor:wa.get("waveColor")||ka.waveColor,nameFormat:wa.get("nameFormat")||ka.nameFormat,nameSep:wa.get("nameSep")||ka.nameSep,filesOrderKey:wa.get("filesOrderKey")||ka.filesOrderKey}},mutations:{filesOrderKey:function(t,e){t.filesOrderKey=e,wa.set("filesOrderKey",e)},syncPrevPoints:function(t,e){t.syncPrevPoints=e,wa.set("syncPrevPoints",e)},syncPrevRects:function(t,e){t.syncPrevRects=e,wa.set("syncPrevRects",e)},showDev:function(t,e){t.showDev=e,wa.set("showDev",e)},showFrameInVideo:function(t,e){t.showFrameInVideo=e,wa.set("showFrameInVideo",e)},syncDropbox:function(t,e){t.syncDropbox=e,wa.set("syncDropbox",e)},showPointsInVideo:function(t,e){t.showPointsInVideo=e,wa.set("showPointsInVideo",e)},showRectsInVideo:function(t,e){t.showRectsInVideo=e,wa.set("showRectsInVideo",e)},setMaxVideoSize:function(t,e){t.maxVideoSize=Number(e),wa.set("maxVideoSize",Number(e))},setShouldGetVideoInfo:function(t,e){t.shouldGetVideoInfo=e,wa.set("shouldGetVideoInfo",e)},setShouldGetFrameInfo:function(t,e){t.shouldGetFrameInfo=e,wa.set("shouldGetFrameInfo",e)},shouldMovePageAferAddingFile:function(t,e){t.shouldMovePageAferAddingFile=e,wa.set("shouldMovePageAferAddingFile",e)},setMinPxPerSec:function(t,e){t.minPxPerSec=Number(e),wa.set("minPxPerSec",Number(e))},setFreqRate:function(t,e){t.freqRate=Number(e),wa.set("freqRate",Number(e))},setTargetChannel:function(t,e){t.targetChannel=Number(e),wa.set("targetChannel",Number(e))},setSpectrogramHeight:function(t,e){t.spectrogramHeight=Number(e),wa.set("spectrogramHeight",Number(e))},setShowTimeLine:function(t,e){t.showTimeLine=e,wa.set("showTimeLine",e)},setShowSpectrogram:function(t,e){t.showSpectrogram=e,wa.set("showSpectrogram",e)},setShowFreqLabel:function(t,e){t.showFreqLabel=e,wa.set("showFreqLabel",e)},setCursorColor:function(t,e){t.cursorColor=e,wa.set("cursorColor",e)},setWaveColor:function(t,e){t.waveColor=e,wa.set("waveColor",e)},setPlayOffset:function(t,e){t.playOffset=Number(e),wa.set("playOffset",Number(e))},setProgressColor:function(t,e){t.progressColor=e,wa.set("progressColor",e)},setAddRecordKey:function(t,e){var i=["dbl","ctrl","alt"];-1!==i.indexOf(e)&&(t.addRecordKey=e,wa.set("addRecordKey",e))},setDeleteRecordKey:function(t,e){var i=["delete","ctrl","alt"];-1!==i.indexOf(e)&&(t.deleteRecordKey=e,wa.set("deleteRecordKey",e))},nameFormat:function(t,e){t.nameFormat=e,wa.set("nameFormat",e)},nameSep:function(t,e){t.nameSep=e,wa.set("nameSep",e)}},actions:{setDefault:function(t){t.commit("syncDropbox",ka.syncDropbox),t.commit("showDev",ka.showDev),t.commit("showFrameInVideo",ka.showFrameInVideo),t.commit("showPointsInVideo",ka.showPointsInVideo),t.commit("showRectsInVideo",ka.showRectsInVideo),t.commit("setMaxVideoSize",ka.maxVideoSize),t.commit("setShouldGetVideoInfo",ka.shouldGetVideoInfo),t.commit("setShouldGetFrameInfo",ka.shouldGetFrameInfo),t.commit("setMinPxPerSec",ka.minPxPerSec),t.commit("setFreqRate",ka.freqRate),t.commit("setTargetChannel",ka.targetChannel),t.commit("setSpectrogramHeight",ka.spectrogramHeight),t.commit("setShowTimeLine",ka.showTimeLine),t.commit("setShowSpectrogram",ka.showSpectrogram),t.commit("setShowFreqLabel",ka.showFreqLabel),t.commit("setCursorColor",ka.cursorColor),t.commit("setWaveColor",ka.waveColor),t.commit("setProgressColor",ka.progressColor),t.commit("setPlayOffset",ka.playOffset),t.commit("setAddRecordKey",ka.addRecordKey),t.commit("setDeleteRecordKey",ka.deleteRecordKey)}},getters:{fname2meta:function(t){return function(e){if(t.nameFormat){var i=e.split(".")[0].split(t.nameSep),n=t.nameFormat.split(t.nameSep),r={};if(n.length==i.length){for(var o in n)r[n[o]]=i[o];return r}}return null}}}},Sa=(i("0481"),i("4069"),i("3ca3"),{namespaced:!0,state:function(){return{filename:null,source:null,fps:null,duration:null,videoStream:null,audioStream:null,originSize:{width:null,height:null}}},mutations:{fileName:function(t,e){return t.filename=e},source:function(t,e){return t.source=e},fps:function(t,e){return t.fps=e},duration:function(t,e){return t.duration=e},videoStream:function(t,e){return t.videoStream=e},audioStream:function(t,e){return t.audioStream=e},originSize:function(t,e){e.width&&(t.originSize.width=e.width),e.height&&(t.originSize.height=e.height)}},actions:{init:function(t){t.commit("fileName",null),t.commit("source",null),t.commit("fps",null),t.commit("duration",null),t.commit("videoStream",null),t.commit("audioStream",null),t.commit("audioStream",null),t.commit("originSize",{width:null,height:null})}},getters:{bname:function(t){return t.filename?t.filename.split(".")[0]:null},dropboxPath:function(t){return t.filename?"/data/".concat(t.filename.split(".")[0],".json"):null}}}),Ca=(i("fb6a"),i("2d5d")),Ta="#F44336",Ra="circ",Va={namespaced:!0,state:function(){return{modes:[{val:"circ",icon:"mdi-shape-circle-plus"},{val:"rect",icon:"mdi-shape-rectangle-plus"},{val:"ruler",icon:"mdi-ruler-square"},{val:"polygon",icon:"mdi-shape-polygon-plus"},{val:"eras",icon:"mdi-eraser"}],filters:[{func:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ca["a"].otsuThreshold(e,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,i){return t.apply(this,arguments)}return e}(),name:"$vuetify.iFilter.threshold"},{func:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ca["a"].adaptiveThreshold(e,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,i){return t.apply(this,arguments)}return e}(),name:"$vuetify.iFilter.adaptiveThreshold"},{func:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ca["a"].canny(e,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,i){return t.apply(this,arguments)}return e}(),name:"$vuetify.iFilter.canny"},{func:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ca["a"].bilateralFilter(e,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,i){return t.apply(this,arguments)}return e}(),name:"$vuetify.iFilter.bilateral"},{func:function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ca["a"].laplacianFilter(e,i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e,i){return t.apply(this,arguments)}return e}(),name:"$vuetify.iFilter.laplacian"}],mode:Ra,filter:null,tab:null,color:Ta,src:null,prev:null,next:null,isChange:!1,isChangePrev:!1,isChangeNext:!1,id:null,idx:null,time:null,ow:null,oh:null,cw:700,ch:700,activeStyle:{size:7},style:{size:5},points:[],rects:[],polygons:[],texts:[]}},mutations:{tab:function(t,e){t.tab=Math.round(Number(e)),0==e?t.mode="circ":1==e&&(t.mode="rect")},mode:function(t,e){t.mode=e,"circ"==e?t.tab=0:"rect"==e&&(t.tab=1)},filter:function(t,e){var i=t.filters.findIndex((function(t){return t.name==e}));t.filter=-1==i?null:t.filters[i]},color:function(t,e){return t.color=e},src:function(t,e){return t.src=e},prev:function(t,e){return t.prev=e},next:function(t,e){return t.next=e},isChange:function(t,e){t.isChange=e,!0===e&&(t.isChangePrev=!1,t.isChangeNext=!1)},isChangePrev:function(t,e){t.isChangePrev=e,!1===t.isChangeNext&&(t.isChange=!1)},isChangeNext:function(t,e){t.isChangeNext=e,!1===t.isChangePrev&&(t.isChange=!1)},id:function(t,e){return t.id=Math.round(Number(e))},idx:function(t,e){return t.idx=Math.round(Number(e))},time:function(t,e){return t.time=Number(e)},cw:function(t,e){t.cw=Number(e)>0?Number(e):700},ch:function(t,e){t.ch=Number(e)>0?Number(e):700},ow:function(t,e){return t.ow=Number(e)},oh:function(t,e){return t.oh=Number(e)},points:function(t,e){t.points=e},polygons:function(t,e){t.polygons=e},rects:function(t,e){t.rects=e},texts:function(t,e){t.texts=e}},actions:{init:function(t){t.state.tab=null,t.state.mode=Ra,t.state.filter=null,t.state.color=Ta,t.state.src=null,t.state.id=null,t.state.idx=null,t.state.time=null,t.state.ow=null,t.state.oh=null,t.state.points=[],t.state.rects=[],t.state.texts=[],t.state.polygons=[]},frame:function(t,e){e.idx&&e.src&&(t.commit("isChange",!0),t.commit("src",e.src||t.state.src),t.commit("idx",e.idx||t.state.idx),t.commit("id",e.id||t.state.id),t.commit("time",e.time||t.state.time),t.commit("points",e.points||t.state.points),t.commit("polygons",e.polygons||t.state.polygons),t.commit("rects",e.rects||t.state.rects),t.commit("texts",e.texts||t.state.texts))},addPolygon:function(t,e){return Object(U["a"])(regeneratorRuntime.mark((function i(){var n,r,o,a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.state,r=t.dispatch,o=e.points.map((function(t){var e=t.x/n.cw*n.ow,i=t.y/n.ch*n.oh;return{x:e,y:i,id:t.id}})),a={frameId:n.id,color:e.color,points:o,size:n.style.size},i.prev=3,i.next=6,nn.polygons.put(a);case 6:a.id=i.sent,n.polygons.push(a),s={id:n.id,polygons:n.polygons},r("current/updateFrames",s,{root:!0}),i.next=15;break;case 12:i.prev=12,i.t0=i["catch"](3),r("snackbar/error",i.t0.message,{root:!0});case 15:case"end":return i.stop()}}),i,null,[[3,12]])})))()},deletePolygon:function(t,e){return Object(U["a"])(regeneratorRuntime.mark((function i(){var n,r,o,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=t.state,r=t.dispatch,o=e.polygon_id,a=n.polygons.findIndex((function(t){return t.id==o})),-1==a){i.next=13;break}return i.prev=4,i.next=7,nn.polygons.delete(o);case 7:n.polygons.splice(a,1),i.next=13;break;case 10:i.prev=10,i.t0=i["catch"](4),r("snackbar/error",i.t0.message,{root:!0});case 13:case"end":return i.stop()}}),i,null,[[4,10]])})))()},activePolygonPoint:function(t,e){var i=t.state,r=e.polygon_id,o=e.point_id,a=e.mode,s=i.polygons.findIndex((function(t){return t.id==r}));if(-1!=s){var c=i.polygons[s].points.map((function(t){return t.id==o?Object.assign(t,i.activeStyle):t}));if("eras"==a){var l=Object.assign(i.polygons[s],Object(J["a"])({points:c},i.activeStyle));n["default"].set(i.polygons,s,l)}else{var u=Object.assign(i.polygons[s],{points:c});n["default"].set(i.polygons,s,u)}}},inactivePolygonPoint:function(t,e){var i=t.state,r=e.polygon_id,o=e.point_id,a=e.mode,s=i.polygons.findIndex((function(t){return t.id==r}));if(-1!=s){var c=i.polygons[s].points.map((function(t){return t.id==o?Object.assign(t,i.style):t}));if("eras"==a){var l=Object.assign(i.polygons[s],Object(J["a"])({points:c},i.style));n["default"].set(i.polygons,s,l)}else{var u=Object.assign(i.polygons[s],{points:c});n["default"].set(i.polygons,s,u)}}},addPoint:function(t,e){return Object(U["a"])(regeneratorRuntime.mark((function i(){var n,r,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.state,r=t.dispatch,e.x=e.x/n.cw*n.ow,e.y=e.y/n.ch*n.oh,e.size=n.style.size,e.frameId=n.id,i.prev=5,i.next=8,nn.points.put(e);case 8:e.id=i.sent,n.points.push(e),o={id:n.id,points:n.points},r("current/updateFrames",o,{root:!0}),i.next=17;break;case 14:i.prev=14,i.t0=i["catch"](5),r("snackbar/error",i.t0.message,{root:!0});case 17:case"end":return i.stop()}}),i,null,[[5,14]])})))()},addPoints:function(t,e){return Object(U["a"])(regeneratorRuntime.mark((function i(){var n,r,o,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.state,r=t.dispatch,o=e.map((function(t){return{x:t.x,y:t.y,color:t.color,label:t.label,size:n.style.size,frameId:n.id}})),i.prev=2,i.next=5,nn.points.bulkPut(o);case 5:return i.next=7,nn.points.where({frameId:n.id}).toArray();case 7:n.points=i.sent,a={id:n.id,points:n.points},r("current/updateFrames",a,{root:!0}),i.next=15;break;case 12:i.prev=12,i.t0=i["catch"](2),r("snackbar/error",i.t0.message,{root:!0});case 15:case"end":return i.stop()}}),i,null,[[2,12]])})))()},updatePoint:function(t,e){var i=t.state,r=t.dispatch;if(e.id){var o=i.points.findIndex((function(t){return t.id==e.id}));if(-1!==o){var a=i.points[o];e.x=e.x/i.cw*i.ow||a.x,e.y=e.y/i.ch*i.oh||a.y,e.color=e.color||a.color,e.label=e.label||a.label,e.size=i.style.size,e.frameId=i.id,n["default"].set(i.points,o,e),nn.points.put(e).then((function(){var t={id:i.id,points:i.points};r("current/updateFrames",t,{root:!0})})).catch((function(t){r("snackbar/error",t.message,{root:!0})}))}}},deletePoint:function(t,e){var i=t.state,n=t.dispatch,r=i.points.findIndex((function(t){return t.id==e}));-1!=r&&nn.points.delete(e).then((function(){i.points.splice(r,1);var t={id:i.id,points:i.points};n("current/updateFrames",t,{root:!0})})).catch((function(t){n("snackbar/error",t.message,{root:!0})}))},activePoint:function(t,e){var i=t.state,r=i.points.findIndex((function(t){return t.id==e}));if(-1!=r){var o=Object.assign(i.points[r],i.activeStyle);n["default"].set(i.points,r,o)}},inactivePoint:function(t,e){var i=t.state,r=i.points.findIndex((function(t){return t.id==e}));if(-1!=r){var o=Object.assign(i.points[r],i.style);n["default"].set(i.points,r,o)}},addRect:function(t,e){return Object(U["a"])(regeneratorRuntime.mark((function i(){var n,r,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=t.state,r=t.dispatch,e.x=e.x/n.cw*n.ow,e.y=e.y/n.ch*n.oh,e.width=e.width/n.cw*n.ow,e.height=e.height/n.ch*n.oh,e.size=n.style.size,e.frameId=n.id;try{e.id=nn.rects.put(e),n.rects.push(e),o={id:n.id,rects:n.rects},r("current/updateFrames",o,{root:!0})}catch(a){r("snackbar/error",a.message,{root:!0})}case 8:case"end":return i.stop()}}),i)})))()},updateRect:function(t,e){var i=t.state,r=t.dispatch;if(e.id){var o=i.rects.findIndex((function(t){return t.id==e.id}));-1!==o&&(e.x=e.x/i.cw*i.ow,e.y=e.y/i.ch*i.oh,e.width=e.width/i.cw*i.ow,e.height=e.height/i.ch*i.oh,e.size=i.style.size,e.frameId=i.id,n["default"].set(i.rects,o,e),nn.rects.put(e).then((function(){var t={id:i.id,rects:i.rects};r("current/updateFrames",t,{root:!0})})).catch((function(t){r("snackbar/error",t.message,{root:!0})})))}},deleteRect:function(t,e){var i=t.state,n=t.dispatch,r=i.rects.findIndex((function(t){return t.id==e}));-1!=r&&nn.rects.delete(e).then((function(){i.rects.splice(r,1);var t={id:i.id,rects:i.rects};n("current/updateFrames",t,{root:!0})})).catch((function(t){n("snackbar/error",t.message,{root:!0})}))},activeRect:function(t,e){var i=t.state,r=i.rects.findIndex((function(t){return t.id==e}));if(-1!=r){var o=Object.assign(i.rects[r],i.activeStyle);n["default"].set(i.rects,r,o)}},inactiveRect:function(t,e){var i=t.state,r=i.rects.findIndex((function(t){return t.id==e}));if(-1!=r){var o=Object.assign(i.rects[r],i.style);n["default"].set(i.rects,r,o)}}},getters:{rects:function(t){var e=t.rects.filter((function(t){return t.x&&t.y&&t.width&&t.height}))||[];return e.map((function(i){return{id:i.id||e.length,name:"rect-".concat(i.id||e.length),label:i.label||"rect-".concat(i.id),x:i.x*t.cw/t.ow,y:i.y*t.ch/t.oh,width:i.width*t.cw/t.ow,height:i.height*t.ch/t.oh,rotation:i.rotation||1,scaleX:i.scaleX||1,scaleY:i.scaleY||1,size:i.size,color:i.color}}))},points:function(t){var e=t.points.filter((function(t){return t.id&&t.x&&t.y}))||[];return e.map((function(e){return{id:e.id,x:e.x*t.cw/t.ow,y:e.y*t.ch/t.oh,label:e.label||"point-".concat(e.id),size:e.size,color:e.color}}))},polygons:function(t){var e=t.polygons.filter((function(t){return t.id}))||[];return e.map((function(e){var i=e.points.map((function(e){return Object(J["a"])(Object(J["a"])({},e),{},{x:e.x*t.cw/t.ow,y:e.y*t.ch/t.oh})})),n=i.slice(1).map((function(t,e){var n=i[e],r=[n.x,n.y,t.x,t.y];return{id:"line-".concat(e),points:r}}));return Object(J["a"])(Object(J["a"])({},e),{},{points:i,lines:n})}))}}},Pa={namespaced:!0,state:function(){return{mini:!1,videoCols:6,textgridCols:6}},mutations:{mini:function(t,e){t.mini=e},videoCols:function(t,e){t.videoCols=Number(e)},textgridCols:function(t,e){t.textgridCols=Number(e)}},actions:{init:function(t){t.state.mini=!1,t.state.videoCols=6,t.state.textgridCols=6},videoCols:function(t,e){var i=Number(e),n=i<0?0:i>12?12:i;t.state.videoCols=n,t.state.textgridCols=12-n,t.state.mini=12==n}}},Ia={namespaced:!0,state:function(){return{textgrids:[]}},mutations:{textgrids:function(t,e){t.textgrids=e}},actions:{init:function(t){t.commit("textgrids",[])},setTextgrid:function(t,e){var i=JSON.stringify(e),n=t.state.textgrids;if(n.length>0){var r=n[n.length-1];r!=i&&t.state.textgrids.push(i)}else t.state.textgrids.push(i)}},getters:{textgrids:function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=t.textgrids.length-e-1;if(i>-1){var n=t.textgrids[i];return t.textgrids.splice(i),JSON.parse(n)}return null}}}},Oa={namespaced:!0,state:function(){return{complates:{}}},mutations:{complates:function(t,e){for(var i in e)n["default"].set(t.complates,i,e[i])}},actions:{init:function(t){t.state.complates={}},updateAutocompletes:function(t,e){t.state.completes=Object.assign(t.state.completes,e)},deleteAutocompletes:function(t,e){n["default"].delete(t.state.complates,e)}},getters:{keys:function(t){var e=Object.keys(t.complates);return e},list:function(t){return t.complates}}};Array.prototype.move=function(t,e){this.splice(e,0,this.splice(t,1)[0])};var ja={namespaced:!0,state:function(){return{refTier:null,targetTier:null,text:"",points:[],rects:[]}},mutations:{refTier:function(t,e){return t.refTier=e},targetTier:function(t,e){return t.targetTier=e},text:function(t,e){return t.text=e},points:function(t,e){return t.points=e},rects:function(t,e){return t.rects=e},pushPoint:function(t,e){return t.points.push(e)},upPoint:function(t,e){e>0&&t.points.move(e,e-1)},downPoint:function(t,e){e<t.points.length&&t.points.move(e,e+1)},deletePoint:function(t,e){return t.points.splice(e,1)},pushRect:function(t,e){return t.rects.push(e)},upRect:function(t,e){e>0&&t.rects.move(e,e-1)},downRect:function(t,e){e<t.rects.length&&t.rects.move(e,e+1)},deleteRect:function(t,e){return t.rects.splice(e,1)}},actions:{init:function(t){var e=t.state;e.refTier=null,e.targetTier=null,e.text="",e.points=[],e.rects=[]}}},Ea={namespaced:!0,state:function(){return{id:"",name:"",wavesurfer:null,source:null,fps:0,frameRate:0,textgrid:{},metaData:{},item:{},frames:[],duration:0,videoStream:{},audioStream:{},originSize:{height:0,width:0},tab:0}},mutations:{item:function(t,e){return t.item=e},waveSurfer:function(t,e){return t.wavesurfer=e},source:function(t,e){return t.source=e},duration:function(t,e){return t.duration=Number(e)},tab:function(t,e){return t.tab=e},metaData:function(t,e){return t.metaData=e},textgrid:function(t,e){return t.textgrid=e},frames:function(t,e){return t.frames=e},autocompletes:function(t,e){return t.autocompletes=e}},actions:{init:function(t){var e=arguments;return Object(U["a"])(regeneratorRuntime.mark((function i(){var n,r,o,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=t.dispatch,r=t.commit,o=t.state,a=e.length>1&&void 0!==e[1]?e[1]:null,null!==o.wavesurfer&&(o.wavesurfer.wavesurfer.destroy(),o.wavesurfer=null),o.source=null,o.textgrid={},o.fps=0,o.frameRate=0,o.name="",o.metaData={},o.frames=[],o.item={},o.duration=0,o.videoStream={},o.audioStream={},o.originSize={height:0,width:0},o.tab=0,n("layout/init",{root:!0}),n("frame/init",{root:!0}),n("frameConf/init",{root:!0}),n("complates/init",{root:!0}),n("cache/init",{root:!0}),!a){i.next=51;break}return o.id=Number(a),n("loading/start","$vuetify.loading",{root:!0}),i.next=26,nn.files.get(o.id);case 26:if(o.item=i.sent,!o.item.name){i.next=51;break}return o.source=o.item.source,r("video/source",o.item.source),r("video/fps",o.item.fps),r("video/fileName",o.item.name),r("video/duration",o.item.duration),r("video/videoStream",o.item.videoStream),r("video/audioStream",o.item.audioStream),r("video/originSize",o.item.originSize),r("frame/ow",o.item.originSize.width),r("frame/oh",o.item.originSize.height),o.fps=o.item.fps,o.frameRate=1/o.item.fps,o.name=o.item.name,o.duration=o.item.duration,o.videoStream=o.item.videoStream,o.audioStream=o.item.audioStream,o.originSize=o.item.originSize,o.metaData=o.item.metaData,o.textgrid=o.item.textgrid||{},i.next=49,nn.frames.where({fileId:o.item.id}).with({points:"points",rects:"rects",polygons:"polygons"});case 49:o.frames=i.sent,n("loading/finish",{},{root:!0});case 51:case"end":return i.stop()}}),i)})))()},updateFrames:function(t,e){var i=t.state,r=t.commit,o=i.frames.findIndex((function(t){return t.id==e.id}));if(-1!==o){var a=i.frames[o];a.points=e.points||a.points,a.rects=e.rects||a.rects,n["default"].set(i.frames,o,a),i.item.lastModifiedAt=Date.now(),i.item.frames=i.frames,r("files/update",i.item,{root:!0})}},textgrid:function(t,e){var i=t.state,n=t.commit;n("textgrid",e);var r=Object.assign({},e);for(var o in r)r[o]={values:r[o].values,type:r[o].type,parent:r[o].parent};return i.item.textgrid=r,i.item.lastModifiedAt=Date.now(),n("files/update",i.item,{root:!0}),new Promise((function(t,e){i.item.name&&i.item.id?nn.files.put(i.item).then((function(e){return t(e)})).catch((function(t){return e(t)})):e(new Error("no name"))}))},addPoints:function(t,e){return Object(U["a"])(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=t.state,r=t.dispatch,i.next=3,Promise.all(e.map(function(){var t=Object(U["a"])(regeneratorRuntime.mark((function t(e){var i,o,a,s,c,l,u,d,f,m,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.id,o=e.index,a=e.time,s=e.label,c=e.color,l=e.x,u=e.y,!(i&&o&&a&&s&&c&&l&&u)){t.next=18;break}if(d=n.frames.find((function(t){return t.idx===o})),void 0===d){t.next=18;break}if(f=d.points.find((function(t){return t.id==i})),void 0!==f){t.next=18;break}return t.prev=6,m={x:l,y:u,color:c,label:s,frameId:d.id},t.next=10,nn.points.put(m);case 10:h=t.sent,m.id=h,d.points.push(m),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](6),r("snackbar/error",t.t0.message,{root:!0});case 18:return t.abrupt("return",null);case 19:case"end":return t.stop()}}),t,null,[[6,15]])})));return function(e){return t.apply(this,arguments)}}()));case 3:case"end":return i.stop()}}),i)})))()},deletePoints:function(t){var e=t.state,i=t.commit,n=e.frames.filter((function(t){return t.points.length})).map((function(t){return t.points.map((function(t){return t.id}))})).flat();n.length&&nn.points.bulkDelete(n).then((function(){e.frames=e.frames.map((function(t){return t.points=[],t})),e.item.lastModifiedAt=Date.now(),e.item.frames=e.frames,i("files/update",e.item,{root:!0})})).catch((function(t){console.log(t)}))},deleteRects:function(t){var e=t.state,i=t.commit,n=e.frames.filter((function(t){return t.rects.length})).map((function(t){return t.rects.map((function(t){return t.id}))})).flat();n.length&&nn.rects.bulkDelete(n).then((function(){e.frames=e.frames.map((function(t){return t.rects=[],t})),e.item.lastModifiedAt=Date.now(),e.item.frames=e.frames,i("files/update",e.item,{root:!0})})).catch((function(t){console.log(t)}))},setTextGrid:function(t,e){var i=t.state,n=i.wavesurfer;n&&(i.textgrid=e,setTimeout((function(){n.setTextGrid(e)}),10))},zoom:function(t,e){var i=t.state;i.wavesurfer&&this.wavesurfer.zoom(e)},seekTo:function(t,e){var i=t.state,n=!!e.center,r=e.time||0;if(i.wavesurfer){var o=r/i.duration,a=o>=1?1:o<=0?0:o;n?i.wavesurfer.seekAndCenter(a):i.wavesurfer.seekTo(a)}},skipBackward:function(t){var e=t.state;e.wavesurfer&&e.wavesurfer.skipBackward()},skipForward:function(t){var e=t.state;e.wavesurfer&&e.wavesurfer.skipForward()},addRecord:function(t,e){var i=t.state,n=e.tier,r=e.record;i.wavesurfer&&n&&r&&"text"in r&&"time"in r&&i.wavesurfer.addTierValue(n,r)},loadObj:function(t,e){var i=e.textgrid;e.frames&&e.frames.length&&t.commit("frames",e.frames),i&&t.dispatch("setTextGrid",i)}},getters:{tgTable:function(t){var e=[["tier","type","index","time","text"]];for(var i in t.textgrid){var n=t.textgrid[i];for(var r in n.values){var o=n.values[r],a=[i,n.type,r,o.time,o.text];e.push(a)}}return e},frameTable:function(t){var e,i=[["id","index","time"]],n=Object(R["a"])(t.frames);try{for(n.s();!(e=n.n()).done;){var r=e.value,o=[r.id,r.idx,r.time];i.push(o)}}catch(a){n.e(a)}finally{n.f()}return i},pointTable:function(t){var e,i=[["id","index","time","label","x","y","color"]],n=Object(R["a"])(t.frames);try{for(n.s();!(e=n.n()).done;){var r,o=e.value,a=Object(R["a"])(o.points||[]);try{for(a.s();!(r=a.n()).done;){var s=r.value,c=[s.id,o.idx,o.time,s.label,s.x,s.y,s.color];i.push(c)}}catch(l){a.e(l)}finally{a.f()}}}catch(l){n.e(l)}finally{n.f()}return i},rectTable:function(t){var e,i=[["id","index","time","label","x","y","width","height","rotation","scaleX","scaleY","color"]],n=Object(R["a"])(t.frames);try{for(n.s();!(e=n.n()).done;){var r,o=e.value,a=Object(R["a"])(o.rects||[]);try{for(a.s();!(r=a.n()).done;){var s=r.value,c=[s.id,o.idx,o.time,s.label,s.x,s.y,s.width,s.height,s.rotation,s.scaleX,s.scaleY,s.color];i.push(c)}}catch(l){a.e(l)}finally{a.f()}}}catch(l){n.e(l)}finally{n.f()}return i}},modules:{video:Sa,frame:Va,layout:Pa,frameConf:ja,complates:Oa,cache:Ia}},Da=(i("a630"),i("6062"),i("3b4d")),Ma={namespaced:!0,state:function(){return{files:[],chaches:[],isLoading:!1}},mutations:{chaches:function(t,e){Array.isArray(e)&&(t.chaches=e)},files:function(t,e){Array.isArray(e)&&(t.files=e)},push:function(t,e){t.files.push(e)},update:function(t,e){var i=t.files.findIndex((function(t){return t.id==e.id})),r=t.files;i>-1&&(r[i]=e,r[i].lastModifiedAt=Date.now(),n["default"].set(t.files,i,r[i]))},destroy:function(t,e){var i=t.files.findIndex((function(t){return t.id==e}));i>-1&&t.files.splice(i,1)},isLoading:function(t,e){t.isLoading=e}},actions:{getLog:function(t,e){t.dispatch("logging/dblog",{tag:"GET",table:"files",msg:e},{root:!0})},postLog:function(t,e){t.dispatch("logging/dblog",{tag:"POST",table:"files",msg:e},{root:!0})},deleteLog:function(t,e){t.dispatch("logging/dblog",{tag:"DELETE",table:"files",msg:e},{root:!0})},errorLog:function(t,e){t.dispatch("logging/error",{tag:"store/files",msg:e},{root:!0})},init:function(t){return new Promise((function(e,i){t.commit("isLoading",!0),t.state.files=[],nn.files.toArray().then((function(i){t.commit("files",i.filter((function(t){return t.name}))),t.dispatch("getLog","init current status"),t.commit("isLoading",!1),e(!0)})).catch((function(e){t.commit("isLoading",!1),i(e)}))}))},dropbox:function(t){return new Promise((function(e,i){Da["a"].hasToken()?Da["a"].get("/data").then((function(i){var n=i.entries.filter((function(t){return"file"==t[".tag"]}));t.commit("chaches",n),e(!0)})).catch((function(t){return i(t)})):e(!1)}))},load:function(t,e){return new Promise((function(i,n){t.commit("isLoading",!0),nn.load(e).then((function(e){t.commit("files",e),t.dispatch("getLog","load files"),t.commit("isLoading",!1),i(!0)})).catch((function(e){t.commit("isLoading",!1),n(e)}))}))},dump:function(t){return new Promise((function(e,i){t.commit("isLoading",!0),nn.dump().then((function(){t.commit("isLoading",!1),e(!0)})).catch((function(e){t.commit("isLoading",!1),i(e)}))}))},clear:function(t){return new Promise((function(e,i){t.commit("isLoading",!0),Promise.all([nn.points.clear,nn.rects.clear,nn.frames.clear,nn.files.clear]).then((function(){t.commit("files",[]),t.commit("isLoading",!1),e(!0)})).catch((function(e){t.commit("isLoading",!1),i(e)}))}))},push:function(t,e){return new Promise((function(i,n){t.commit("isLoading",!0),nn.put(e).then((function(e){nn.files.toArray().then((function(n){t.commit("files",n),t.dispatch("postLog","add a data."),t.commit("isLoading",!1),i(e)})).catch((function(e){t.commit("isLoading",!1),n(e)}))})).catch((function(e){t.commit("isLoading",!1),n(e)}))}))},destroy:function(t,e){return new Promise((function(i,n){e?(t.commit("isLoading",!0),nn.destory(e).then((function(){nn.files.toArray().then((function(n){t.commit("files",n),t.dispatch("deleteLog","delete files: ".concat(e)),t.commit("isLoading",!1),i(e)})).catch((function(e){t.commit("isLoading",!1),n(e)}))})).catch((function(e){t.commit("isLoading",!1),n(e)}))):n(new Error("no id"))}))}},getters:{fields:function(t){var e,i=new Set,n=Object(R["a"])(t.files);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.metaData)for(var o=0,a=Object.keys(r.metaData);o<a.length;o++){var s=a[o];i.add(s)}}}catch(c){n.e(c)}finally{n.f()}return Array.from(i)},records:function(t){var e,i=[],n=0,r=Object(R["a"])(t.files);try{for(r.s();!(e=r.n()).done;){var o=e.value;for(var a in o.textgrid){var s=o.textgrid[a],c=s.values.length-1;for(var l in s.values){var u=s.values[l],d=0==l?{time:0,text:""}:s.values[l-1];if(u.time&&d.time){var f={fileId:o.id,fileName:o.name,fps:o.fps,duration:o.duration,src:o.source,tier:a,type:s.type,index:l,id:n,start:d.time,end:u.time,time:u.time,text:u.text,search:{field:a,tier:a,key:a,text:u.text,$prev1_text:l>0?s.values[Number(l)-1].text:"",$prev2_text:l>1?s.values[Number(l)-2].text:"",$prev3_text:l>2?s.values[Number(l)-3].text:"",$next1_text:l<c-1?s.values[Number(l)+1].text:"",$next2_text:l<c-2?s.values[Number(l)+2].text:"",$next3_text:l<c-3?s.values[Number(l)+3].text:""}};i.push(f)}n++}}}}catch(m){r.e(m)}finally{r.f()}return i}}},La={namespaced:!0,state:function(){return{text:"",info:{}}},mutations:{text:function(t,e){t.text=e},info:function(t,e){t.info=e}},actions:{text:function(t,e){var i=e.replace("#","");t.commit("text",i);var r,o=Object(R["a"])(i.split("&"));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.split("=");1==s.length?n["default"].set(t.state.info,s[0],!0):n["default"].set(t.state.info,s[0],s[1])}}catch(c){o.e(c)}finally{o.f()}}}};n["default"].use(ua["a"]);var Fa=new ua["a"].Store({state:{appName:"MRI Vuewer",appVersion:"2.0",author:"qh73xe",devYear:"2017-2020",github:"https://github.com/kikuchiken-waseda/mri-vuewer.ver2",lang:{t:null},drawer:!1},mutations:{lang:function(t,e){t.lang=e},max_z_index:function(t,e){t.max_z_index=e},drawer:function(t,e){t.drawer=e}},getters:{t:function(t){return function(e){return t.lang.t?t.lang.t(e):e}}},modules:{snackbar:va,search:xa,wcards:da,logging:ya,loading:ba,setting:_a,current:Ea,files:Ma,hash:La}}),Aa=(i("5363"),i("f309")),za=(i("a15b"),i("c15b")),Na="新規",Ba="削除",Ga="編集",Ua="記入欄",Ka="転記",qa="データベース",Ha="動画",Xa={name:"時系列転記",tier:{name:"時系列転記層",option:{name:"転記層名",showRef:"時刻情報をコピーする",ref:"対象転記層",withText:"コピー時に文字を含む",asParent:"コピー元を親にする",type:"転記層の種類"},interval:"境界転記層",point:"イベント転記層",record:{name:"レコード",no:"レコードが選択されていません"}}},Ja={name:"フレーム転記"},Wa={home:"ホーム",meta:"ファイル管理",demo:"ライブデモ",setting:"設定",about:"このアプリについて",logger:"ロガー",dropbox:{auth:"ドロップボックス連携",connected:"連携済み",load:"ファイル取り込み"},db:{clear:"".concat(qa,"の").concat(Ba),dump:"".concat(qa,"のエクスポート"),load:"".concat(qa,"のインポート (JSON)"),add:"".concat(Ha,"登録")},on:{destroy:"{0} のデータは".concat(Ba,"されました."),dump:"".concat(qa,"はエクスポートされました."),load:"".concat(qa,"は更新されました"),clear:"すべてのデータを".concat(Ba,"しました")}},Ya={upload:{title:Wa.db.add,hint:"時系列転".concat(Ka,"の").concat(Ha,"ファイルをインポートします")},manage:{title:Wa.meta,hint:"インポートした".concat(Ha,"のメタデータを管理します")},demo:{title:Wa.demo,hint:"サンプルデータを取り込みライブデモを行います"}},Za=Object(J["a"])({disc:"\n    MRI Vuewer は ".concat(Ha," 化された rtMRI データの ").concat(Ka," ツールです.\n    </br>\n    音声波形と ").concat(Ha," を同時に閲覧することが可能です.\n    </br>\n    </br>\n    全てのファイルはローカルで処理をされます.\n    </br>\n    まずは <b>").concat(Ya.upload.title,"</b> より\n    御自身の ").concat(Ha," ファイルを登録してみてください.\n    ")},Ya),Qa=Object(J["a"])(Object(J["a"])({},za["a"]),{},{validations:{required:"この項目は必須項目です!",positiveInteger:"この項目は正の整数です!",positiveIntegerOrError:"この項目は正の整数または -1 です",positiveFloat:"この項目は正の数値です!",more:"この項目は {0} より大きい必要があります",less:"この項目は {0} より小さい必要があります",times:"この項目は {0} の倍数です",maxVideoSize:"登録可能な ".concat(Ha," ファイルサイズは ").concat(Fa.state.setting.maxVideoSize," MB までです!"),hasArrayBuffer:"想定外の ${VIDEO} ファイルです [No Array buffer]!",shorter:"この値は {0} 文字以下です.",alreadyExists:"この値は既に存在しています.",notExist:"この値は存在しません"},table:{frame:{label:"ラベル",frame:"フレーム ID",time:"時刻",color:"色",x:"x 座標",y:"y 座標",width:"幅",height:"高さ",rotation:"回転",scaleX:"拡大比 (x)",scaleY:"拡大比 (y)"},file:{name:"".concat(Ha,"名"),fps:"フレームレート (fps)",lastModifiedAt:"最終更新日",duration:"".concat(Ha,"持続時間 (秒)"),size:"".concat(Ha,"サイズ(pixels)"),actions:"".concat(Ha,"操作"),forms:{setTier:{label:"転記階層一括付与 (name:[interval|point] name2:[interval|point]...)",hint:"\n            選択中の".concat(Ha,"に").concat(Xa.tier.name,"を付与します.\n            例えば IPU という").concat(Xa.tier.interval,'をつけるには "IPU-interval" と入力します.\n            その後, 右のアイコンをクリックすると').concat(Xa.tier.name,"が付与されます.\n          ")}}}},forms:{db:{title:"データベース取り込み".concat(Ua),warning:"この処理を実行すると既存のデータは失われます.処理を実行しますか?",messages:{stop:"データベースのインポートを停止しました",success:"データベースのインポートに成功しました",outofmemory:"データベースのインポートに失敗しました [out of memory]"}},video:{title:"".concat(Ha," 登録 ").concat(Ua),messages:{stop:"".concat(Ha," の登録が中止されました"),success:"".concat(Ha," が登録されました"),outofmemory:"".concat(Ha," の登録に失敗しました [out of memory]")},finish:"".concat(Ha,"の登録に成功しました"),restart:"別の".concat(Ha,"を登録する"),steps:{select:"ファイル選択",confirmation:"コーディック確認",meta:"メタデータ登録"},desc:{select:"\n        解析を行う ".concat(Ha," ファイルを登録します.\n        <br />\n        登録可能な ").concat(Ha,' ファイルは mp4 のみです.\n        <br />\n        <br />\n        "メタデータ抽出用ファイル名テンプレートを表示する" にチェックがついている場合,\n        "メタデータ抽出用テンプレート" を変更できます.\n        <br />\n        これを設定すると, "-" で区切られたメタデータフィールドに, ファイル名の情報を挿入します.\n        <br />\n        例えば, "メタデータ抽出用テンプレート" が "material-speaker" であり,\n        ファイル名が "マテリアル1-被験者2.mp4" であった場合,\n        メタデータは <code>{material: マテリアル1, speaker: 被験者2}</code> になります.\n        <br />\n        この情報は "メタデータ管理" ページで確認および検索することが可能です.\n        <br />\n        <br />\n        "ファイル登録時に ').concat(Ha,' コーディックを確認する." に\n        チェックがついている場合, ').concat(Ha," のエンコーディング情報を自動で取得します.\n        "),confirmation:"以下の情報を確認し問題がなければ <kbd>OK</kbd> をクリックしてください.",meta:"\n        ".concat(Ha,' メタデータの登録を行います.\n        </br></br>\n        例えば発話者情報を登録する場合,\n        </br>\n        <code>New field</code> に "発話者" と入力をして\n        <kbd>ADD</kbd> ボタンをクリックしてください.\n        </br>\n        上記処理に成功すると <code>発話者</code> ').concat(Ua," が作成されます.\n        </br></br>\n        登録された <code>field</code> は次回も使用可能です.\n        </br></br>\n        作成された全ての").concat(Ua,"に値を入力し\n        </br>\n        <kbd>OK</kbd> ボタンをクリックするとメタデータの登録が完了します.")}},tier:{title:"".concat(Na).concat(Xa.tier.name).concat(Ua)},tierEdit:{title:"".concat(Xa.tier.name).concat(Ga).concat(Ua),warning:"この処理を実施するとこの階層の".concat(Ka,"情報は初期化されます.処理を実行しますか?")},tierDelete:{title:"".concat(Xa.tier.name).concat(Ba).concat(Ua)},detail:{title:"".concat(Ha," 詳細情報")},ruler:{title:"フレーム計測ダイアログ"},imageEdit:{title:"フレーム".concat(Ga,"ダイアログ")}},wVideo:{videoPre:{label:"前画像"},video:{label:"現画像"},videoPos:{label:"後画像"}},io:{db:{json:{title:"".concat(qa," データを選択してください (json)")}},video:{error:{fps:"動画 fps の取得に失敗しました. 対象動画の fps を入力してください",duration:"時間の取得に失敗しました. 対象動画の時間を入力してください",originSize:{width:"動画幅の取得に失敗しました. 対象動画の幅を入力してください",height:"動画高さの取得に失敗しました. 対象動画の高さを入力してください"}}},mVideoCodec:{name:"ファイル名",fps:"フレームレート (fps)",duration:"長さ (duration)",originSize:{width:"大きさ: 幅 (width)",height:"大きさ: 高さ (height)"}},mVideoInput:{title:"".concat(Ha,"ファイルを選択"),hint:"".concat(Ha," ファイルは mp4 形式のみをサポートしています")},xy:{parse:{invalidHeader:"指定された XY ファイルのヘッダーが不正です.",invalidBody:"指定された XY ファイルの中身が不正です."}},completes:{title:"補完辞書ファイルを選択 (text/plain)",isTextComplated:"テキスト選択モード"}},pages:Wa,home:Za,meta:{disc:"このページでは登録された ".concat(Ha," ファイルの横断検索, 一括操作が実施可能です.")},demo:{disc:"\n    このページではサンプル ".concat(Ha," を使って MRI Vuewer の機能を確認することができます.\n    ")},setting:{disc:"このページでは MRI Vuewer の設定を行うことができます.",form:{app:{label:"システム設定",timeout:{label:"メッセージタイムアウト",hint:"システムメッセージのタイムアウト時間を設定します.この項目が -1 の場合, メッセージの自動非表示処理が抑制されます."},showDev:{label:"開発者用デモページを表示する"},syncDropbox:{label:"ページ遷移時に dropbox へ自動バックアップを行う"},filesOrderKey:{label:"".concat(Ha,"並べ替え項目"),choices:{default:"登録順",name:"ファイル名順",lastModifiedAt:"最終変更日順"}}},video:{label:"動画設定",showFrameInVideo:{label:"フレーム情報を動画に表示する"},syncPoints:{label:"ポイントを動画に表示する"},syncRects:{label:"矩形を動画に表示する"},syncPrevPoints:{label:"フレーム変更時に前のポイントをコピーする"},syncPrevRects:{label:"フレーム変更時に前の矩形をコピーする"}},metadata:{label:"新規フィールド"},loading:{label:"ファイル登録設定",nameFormat:{label:"メタデータ抽出用テンプレート",show:"メタデータ抽出用ファイル名テンプレートを変更する",hint:["動画登録時にメタ情報を付与します.","登録を行う予定のフィールド名を '-' 区切りで登録してください.","拡張子は不要です.","この処理を実施しない場合, 空欄にしてください","ex: material-speaker-date-record_id"].join(" ")},maxVideoSize:{label:"ファイル最大容量.",hint:"この項目が大きい場合, 登録可能なファイル数が減ります. 登録可能なファイル数は使用端末のスペックに依存します."},shouldMovePageAferAddingFile:{label:"ファイル登録後に解析ページに移動する."},shouldGetVideoInfo:{label:"ファイル登録時に".concat(Ha,"コーディックを確認する."),hint:"この項目が false の場合, ".concat(Ha," の時間, fps, 縦横サイズ等を手動で入力することになります.")},shouldGetFrameInfo:{label:"ファイル登録時に全てのフレーム画像を取得する.",hint:"この項目が true の場合, 登録処理に多少の時間がかかります. 一方で解析時には正確なフレーム提示を行います."}},waveform:{label:"波形表示設定",minPxPerSec:{label:"pixels per sec",hint:"\n          1 sec を何ピクセルで表示するか?\n          大まかに時刻方向の拡大比率になります.\n          この値は50 の倍数である必要があり\n          100 - 500 までの値を取ります. \n          "},cursorColor:{label:"カーソル色"},waveColor:{label:"未再生波形色"},progressColor:{label:"再生済み波形色"},showTimeLine:{label:"時間軸を表示する"},showSpectrogram:{label:"スペクトログラムを表示する"}},spectrogram:{label:"スペクトログラム表示設定",targetChannel:{label:"対象チャンネル"},freqRate:{label:"表示周波数率",hint:"周波数表示比率. fft の解析結果を低域何パーセントまで表示するかです. 0.25 - 1 までの値にしてください"},spectrogramHeight:{label:"スペクトル領域の高さ",hint:"スペクトログラム表示領域の高さです. 解析幅ではないことに注意してください."},showFreqLabel:{label:"周波数軸ラベルを表示する"}},textgrid:{label:"".concat(Ka," 設定"),playOffset:{label:"再生オフセット",hint:"".concat(Xa.tier.point," 再生時のオフセットです")},addRecordKey:{label:"レコード追加キー",dbl:"ダブルクリック",ctrl:"CTRL + クリック",alt:"ALT (option) + クリック"},deleteRecordKey:{label:"レコード削除キー",delete:"DELETE",ctrl:"CTRL + DELETE",alt:"ALT + DELETE"}}}},contexts:{denoising:{audio:"音声ノイズ除去"},windows:{name:"補助ウインドウ",framediff:"フレーム間差分"},playPause:"再生/停止",skip:"スキップ",skipBackward:"戻る",skipForward:"進む",zoom:"ズーム",zoom_in:"拡大",zoom_out:"縮小",setting:"設定",save:"保存",saveDropbox:"ドロップボックスに保存",loadDropbox:"ドロップボックスから読み込み",tier:{add:"".concat(Xa.tier.name," を追加"),edit:"".concat(Xa.tier.name," を編集"),delete:"".concat(Xa.tier.name," を削除"),interval:{name:"".concat(Xa.tier.name," 操作"),time2frame:"現在".concat(Xa.tier.name,"の時刻をフレーム時刻に合わせる"),owakati:"現在".concat(Xa.tier.interval,"を分かち書き"),oyomi:"現在".concat(Xa.tier.interval,"をよみに変換"),opronunciation:"現在".concat(Xa.tier.interval,"を発音系に変換")}},record:{name:"".concat(Xa.tier.record.name,"操作"),play:"現在".concat(Xa.tier.record.name,"を再生"),copy:"現在".concat(Xa.tier.record.name,"をコピー"),paste:"現在".concat(Xa.tier.record.name,"にペースト"),next:"次の".concat(Xa.tier.record.name,"に移動"),prev:"前の".concat(Xa.tier.record.name,"に移動"),toStart:"現在".concat(Xa.tier.record.name,"の始端に移動"),toEnd:"現在".concat(Xa.tier.record.name,"の終端に移動"),extend:"現在".concat(Xa.tier.record.name,"を終端を延長"),shrink:"現在".concat(Xa.tier.record.name,"を終端を短縮"),splitByFrames:"".concat(Xa.tier.record.name,"の分割 (フレーム毎)"),splitByChars:"".concat(Xa.tier.record.name,"の分割 (文字毎)"),splitBySlash:"".concat(Xa.tier.record.name,"の分割 (区切り文字毎: /)"),owakati:"現在".concat(Xa.tier.record.name,"を分かち書き"),oyomi:"現在".concat(Xa.tier.record.name,"をよみに変換"),opronunciation:"現在".concat(Xa.tier.record.name,"を発音系に変換"),obasic:"現在".concat(Xa.tier.record.name,"を代表系に変換"),opos:"現在".concat(Xa.tier.record.name,"を品詞に変換")},frame:{name:"".concat(Ja.name),edit:"".concat(Ja.name,"画面の表示"),download:"画像を PNG 形式で保存",copy:"画像をクリップボードにコピー",deletePoints:"全ての点群データを削除する",deleteRects:"全ての矩形データを削除する"}},uploads:{name:"ファイルアップロード",dict:"テキスト補完辞書 (.dict)",textgrid:{title:"".concat(Xa.name," のアップロード"),textgrid:"TextGrid 形式",json:{v1:"JSON 形式 (ver1)",v1left:"JSON 形式 (ver1:left)",v1right:"JSON 形式 (ver1:right)",v2:"JSON 形式 (ver2)"}}},downloads:{name:"ファイルダウンロード",xlsx:"XLSX 形式でダウンロード (ALL)",json:"JSON 形式でダウンロード (ALL)",png:"PNG 形式でダウンロード (現在)",mp4:"MP4 形式でダウンロード (現在)",textgrid:{title:"".concat(Xa.name," のダウンロード"),textgrid:"TextGrid 形式でダウンロード (".concat(Xa.name,")"),json:"JSON 形式でダウンロード (".concat(Xa.name,")"),xlsx:"XLSX 形式でダウンロード (".concat(Xa.name,")")},frame:{title:"".concat(Ja.name," のダウンロード"),json:"JSON 形式でダウンロード (".concat(Ja.name,")"),xlsx:"XLSX 形式でダウンロード (".concat(Ja.name,")")}},textgrid:Xa,frame:Ja,prev:"戻る",yet:"この関数は作成中です",loading:"読み込み中 ...",analyzing:"解析中 ...",converting:"変換中 ...",loaded:"データの読み込みが終了しました",sending:"データ送信中 (ドロップボックス) ...",sended:"ドロップボックスへのデータ送信が終了しました",notFound:"ファイルは存在しません",notAcceptable:"不正なファイルです",browserError:"このブラウザでは, 該当の機能を使用することはできません.",annotation:Ka,ver1:"MRI Vuewer ver.1 系",actions:"操作",lastModifiedAt:"最終変更",docs:{fileRegistration:"ファイル登録",textgrid:"時系列転記",frameEdit:"フレーム転記",search:"データ検索",dropbox:"ドロップボックス連携"},iFilter:{name:"画像フィルタリング",threshold:"二値化",adaptiveThreshold:"適応的閾値",canny:"キャニー",bilateral:"バイラテラル",laplacian:"ラプラシアン",concaveConvex:"凹凸欠落を点に追加"}}),ts=i("1072"),es={home:"Home",meta:"Meta Data",demo:"Line Demo",setting:"Setting",about:"About",logger:"Logger",dropbox:{auth:"Works with dropbox",connected:"Connected",load:"load dropbox file"},db:{clear:"Clear DB",dump:"Export DB",load:"Load DB (JSON)",add:"Video Registration"},on:{destroy:"{0} was deleted.",dump:"The DB was exported.",load:"The DB was uploaded",clear:"All videos were deleted."}},is={upload:{title:es.db.add,hint:"Import your video file for annotation"},manage:{title:es.meta,hint:"you can create meta data for video like speaker data"},demo:{title:es.demo,hint:"Try the annotation function using a sample video"}},ns=Object(J["a"])({disc:"\n    MRI Vuewer is an annotation tool for movied rtMRI data.\n    </br>\n    You can view the audio waveform and the video at the same time.\n    </br>\n    </br>\n    All files are processed locally.\n    </br>\n    First of all, please register your own video file from <b>".concat(is.upload.title,"</b>.\n    ")},is),rs=Object(J["a"])(Object(J["a"])({},ts["a"]),{},{prev:"Previous",table:{frame:{label:"Label",frame:"Frame ID",time:"Time",color:"Color",x:"X",y:"Y",width:"Width",height:"Height",rotation:"Rotation",scaleX:"Scale (x)",scaleY:"Scale (y)"},file:{name:"Name",fps:"Frame Rate (fps)",lastModifiedAt:"Last modified at",duration:"Video duration (sec)",size:"Video size (pixels)",actions:"File Actions",forms:{setTier:{label:"Set Tiers (name:[interval|point] name2:[interval|point]...)",hint:'Gives some textgrid tiers to the selected files. To add a interval tier called IPU, enter "IPU-interval" in input form. And then, click the icon on the right of input form.\n          '}}}},validations:{required:"This field is required!",positiveInteger:"This is a positive integer field!",positiveIntegerOrError:"This is a positive integer or -1 field!",positiveFloat:"This is a positive float field!",more:"This value is more then {0}",less:"This value is less then {0}",times:"This value is a multiple of {0}",maxVideoSize:"Video size should be less than ".concat(Fa.state.setting.maxVideoSize," MB!"),hasArrayBuffer:"This is an unexpected video file [No Array buffer]!",shorter:"This field must be less than {0} characters",alreadyExists:"This value alredy exists",notExist:"This value does not exist"},wVideo:{videoPre:{label:"Previous Image"},video:{label:"Current Image"},videoPos:{label:"Next Image"}},forms:{video:{title:"VIDEO REGISTRATION FORM",finish:"Video registration is complete.",restart:"Add Video.",messages:{stop:"Canceled the video registration.",success:"The video was registered successfully!",outofmemory:"Video registration failed [out of memory]"},steps:{select:"File Selection",confirmation:"Codec Confirmation",meta:"Addtion of Meta Data"},desc:{select:'\n        Register the video file to be analyzed.\n        <br />\n        Only mp4 video files can be registered.\n        <br />\n        <br />\n        If "Get video codec at file upload." is checked,\n        the encoding information will be acquired automatically.\n\n        ',confirmation:"\n        Check the following information and press <kbd>OK</kbd> botton\n        if everything is OK.",meta:'\n        Register the video metadata.\n        </br></br>\n        For example, when registering speaker information,\n        enter "speaker" in <code>New field</code> and click the <kbd>ADD</kbd> button.\n        </br>\n        If the above process is successful,\n        <code>speaker</code> input form will be created.\n        </br></br>\n        The registered <code>field</code> can be used next time.\n        </br></br>\n        Fill in all the forms created.\n        <br />\n        Finally, click the <kbd>OK</kbd> button to register.'}},db:{title:"DB IMPORT FORM",warning:"Existing data will be lost when this process is performed. Do you want to process it?",messages:{stop:"Canceled the db importing.",success:"The db was updating successfully!",outofmemory:"The db updating failed [out of memory]"}},tier:{title:"NEW TIER FORM"},tierEdit:{title:"EDIT TIER FORM",warning:"Performing this process will initialize this tier. Do you want to process it?"},tierDelete:{title:"DELETE TIER FORM"},detail:{title:"VIDEO INFORMATION"},ruler:{title:"RULER DIALOG"},imageEdit:{title:"IMAGE EDIT DIALOG"}},io:{db:{json:{title:"Select your db file (json)"}},video:{error:{fps:"Failed to get the fps of this video file. Please enter fps.",duration:"Failed to get duration of this video file. Enter the duration of the video file.",originSize:{width:"Failed to get the width of this video file. Enter the width of the video file.",height:"Failed to get the height of this video file. Enter the height of the video file."}}},xy:{parse:{invalidHeader:"your header of xy file is invalid!",invalidBody:"your body of xy file is invalid!!"}},mVideoCodec:{name:"file name",fps:"fps",duration:"duration",originSize:{width:"video width",height:"video height"}},mVideoInput:{title:"Select your video file (mp4)",hint:"supported format is mp4"},completes:{title:"Select your dict complete file (text/plain)",isTextComplated:"Text Select Mode"}},pages:es,home:ns,meta:{disc:"\n    In this page, you can manages the meta information of registered video files.\n    </br>\n    You can set the content to be added as meta information by yourself.\n    </br>\n    The meta information is assumed to be the speaker of the video, the shooting date, the content of the utterance, etc.\n    </br>\n    Meta information is used when searching video files.\n    "},demo:{disc:"In this page, you can check the functions of MRI Vuewer with sample videos."},setting:{disc:"In this page, you can configure the MRI Vuewer.",form:{app:{label:"System settings",timeout:{label:"System message time out",hint:"Sets the timeout period for system messages. Setting this field to -1 will prevent automatic hiding."},showDev:{label:"Show Develop page"},syncDropbox:{label:"Auto backup in dropbox"},filesOrderKey:{label:"File Order",choices:{default:"Created At",name:"File Name",lastModifiedAt:"Last Modified At"}}},metadata:{label:"New Field"},video:{label:"Video Setting",showFrameInVideo:{label:"Show frame info"},syncPrevPoints:{label:"copy prev points when the frame time was changed"},syncPrevRects:{label:"copy prev rects when the frame time was changed"},syncPoints:{label:"show points in a video"},syncRects:{label:"show rects in a video"}},loading:{label:"File upload settings",nameFormat:{label:"File Name Format",show:"Change file name format",hint:["Meta data is added when registering a video.","Register some field names you plan to register, separated by'-'.","No extension required.","If you do not want to do this, leave it blank","ex: material-speaker-date-record_id"].join(" ")},maxVideoSize:{label:"Max Video Size",hint:"Registerable video size. If this value is large, the number of data that can be registered will decrease."},shouldMovePageAferAddingFile:{label:"Move analysis page when uploaded a video file."},shouldGetVideoInfo:{label:"Get video codec at file upload.",hint:"If this check box is false, you need to manually input fps, image size, etc."},shouldGetFrameInfo:{label:"Get all frame images at file upload.",hint:"If this check box is true, the file upload will take longer, but an accurate image display will be performed during video analysis."}},waveform:{label:"Wave form settings",minPxPerSec:{label:"pixels per sec",hint:"How many pixels do you want to display 1 sec? It is roughly the enlargement ratio in the time direction."},cursorColor:{label:"Cursor Color"},waveColor:{label:"Wave Color"},progressColor:{label:"Progress Color"},showTimeLine:{label:"Display Time Axis"},showSpectrogram:{label:"Display spectrogram"}},spectrogram:{label:"Spectrogram Settings",targetChannel:{label:"Target Channel"},freqRate:{label:"Frequency Rate",hint:"Frequency display ratio. What percentage of the fft analysis result is displayed.Set a value between 0.25 and 1."},spectrogramHeight:{label:"Max Spectrogram Height",hint:"The height of the spectrogram display area. Note that it is not the parsing width."},showFreqLabel:{label:"Display Frequency Axis Label"}},textgrid:{label:"Annotation Settings",playOffset:{label:"play offset",hint:"Offset time for playing the point record."},addRecordKey:{label:"Record add opetetion",dbl:"DOUBLE CLICK",ctrl:"CTRL + CLICK",alt:"ALT + CLICK"},deleteRecordKey:{label:"Record delete opetetion",delete:"DELETE",ctrl:"CTRL + DELETE",alt:"ALT + DELETE"}}}},converting:"Now Converting ...",loading:"Now Loading ...",analyzing:"Now Analyzing ...",loaded:"The data was loaded",sending:"Sending the data to dropbox ...",sended:"Sended the data to dropbox",notAcceptable:"The data is not acceptable!!",notFound:"Your file is not founded.",yet:"This function is under construction",textgrid:{name:"TextGrid",tier:{name:"Tier",option:{name:"Tier Name",showRef:"Copy Times",ref:"Ref Tier Name",withText:"With Texts",asParent:"Make the copy source as a parent",type:"Tier Type"},interval:"Interval Tier",point:"Point Tier",record:{name:"Time Record",no:"No record was selected!"}}},contexts:{denoising:{audio:"Audio Noise Reduction"},windows:{name:"Windows",framediff:"Frame Difference"},playPause:"play or pause",skip:"skip",skipBackward:"skip backward",skipForward:"skip forward",zoom:"zoom",zoom_in:"zoom in",zoom_out:"zoom out",setting:"setting",save:"save",saveDropbox:"save the data to dropbox",loadDropbox:"load the data from dropbox",tier:{add:"Add a Tier",edit:"Edit a Tier",delete:"Delete a Tier",interval:{name:"Interval Tier",time2frame:"Match time of records in a current tier to images time",owakati:"word-separation for the current tier (for Japanese)",oyomi:"Convert current tier to reading (for Japanese)",opronunciation:"Convert current tier to pronunciation (for Japanese)"}},record:{name:"Record",play:"play a current record",copy:"copy a text of the current record",paste:"paste a text of the current record",next:"move to a next record",prev:"move to a prev record",toStart:"move to start time of a current record",toEnd:"move to end time of a current record",extend:"extend end time of a current record",shrink:"shrink end time of a current record",splitByFrames:"split a current record by frames.",splitByChars:"split a current record by chars.",splitBySlash:"split a current record by slash.",owakati:"word-separation for the current record (for Japanese)",oyomi:"Convert current record to reading (for Japanese)",opronunciation:"Convert current record to pronunciation (for Japanese)",obasic:"Convert current record to representative type (for Japanese)",opos:"Convert current record to part of speech (for Japanese)"},frame:{name:"Image Annotation",download:"Save a image as png",copy:"Copy a image to clipboard",edit:"Show an Image Annotation Dialog",deletePoints:"Delete All Points",deleteRects:"Delete All Rects"}},uploads:{name:"Upload File",dict:"complement dictionary (.dict)",textgrid:{title:"TEXTGRID",textgrid:"TextGrid",json:{v1:"JSON (ver1)",v1left:"JSON (ver1:left)",v1right:"JSON (ver1:right)",v2:"JSON (ver2)"}}},downloads:{name:"Download File",xlsx:"Download as xlsx file (ALL)",json:"Download as json file (ALL)",png:"Download as png file (CURRENT)",mp4:"Download as mp4 file (CURRENT)",textgrid:{title:"Download of TextGrid Data.",textgrid:"Download as textgrid file",json:"Download as json file",xlsx:"Download as xlsx file"},frame:{title:"Download of Frame Data.",json:"Download as json file",xlsx:"Download as xlsx file"}},lastModifiedAt:"Last Modified",actions:"Actions",annotation:"annotation",frame:"frames",browserError:"This feature is not available in this browser.",ver1:"MRI Vuewer ver.1",docs:{fileRegistration:"File Registration (Japanese only)",textgrid:"Time Series Annotation (Japanese only)",frameEdit:"Frame Annotation (Japanese only)",search:"Searching Annotated Data (Japanese only)",dropbox:"Works with Dropbox (Japanese only)"},iFilter:{name:"Image Filer",threshold:"Threshold (OTSU)",adaptiveThreshold:"Threshold (ADAPTIVE)",canny:"Canny",bilateral:"Bilateral",laplacian:"Laplacian",concaveConvex:"Concave‐Convex Defect"}});n["default"].use(Aa["a"]);var os={icons:{iconfont:"mdi"},lang:{locales:{ja:Qa,en:rs},current:"ja"}},as=new Aa["a"](os),ss=i("ed08"),cs={install:function(t){var e=function(t){return Fa.getters.t(t)},i={log:function(t,e){var i={msg:e,tag:t||"default"};Fa.commit("logging/log",i)},error:function(t,e){var i={tag:t};e instanceof Error?(i.msg=e.message,console.error(t,e)):i.msg=e,Fa.commit("logging/error",i)}};t.prototype.$vuewer={t:e,io:W["a"],download:{blob:W["a"].file.download,url:W["a"].file.downloadURL},deepCopy:ss["a"].deepCopy,math:ss["a"].math,text:ss["a"].text,image:ss["a"].image,video:ss["a"].video,dropbox:ss["a"].dropbox,console:i,db:{log:function(t,e,i){if(-1!==["GET","POST","PUT","DELETE"].indexOf(e)&&t&&e){var n={msg:i,table:t,tag:e};Fa.commit("logging/dblog",n)}},gets:nn.gets,get:nn.get,add:nn.add,put:nn.put,destory:nn.destory,files:nn.files,frames:nn.frames,points:nn.points,rects:nn.rects},snackbar:{error:function(t){t instanceof Error?(Fa.dispatch("snackbar/error",t.message),i.log(t)):Fa.dispatch("snackbar/error",e(t))},warn:function(t){Fa.dispatch("snackbar/warning",e(t))},warning:function(t){Fa.dispatch("snackbar/warning",e(t))},success:function(t){Fa.dispatch("snackbar/success",e(t))},info:function(t){Fa.dispatch("snackbar/info",e(t))}},loading:{start:function(t){Fa.dispatch("loading/start",t)},end:function(){return Fa.dispatch("loading/finish")}},key:{summary:function(t){var e=t.key?t.key.toLowerCase():t.keycode,i={text:"ctrl",val:t.ctrlKey||t.ctrl},n={text:"alt",val:t.altKey||t.alt},r={text:"shift",val:t.shiftKey||t.shift},o={text:"meta",val:t.metaKey||t.meta},a=[i,n,r,o],s=a.filter((function(t){return 1==t.val})).map((function(t){return t.text})),c=a.every((function(t){return!0!==t.val}))?"default":s.join("+");return{key:e,xKey:c}}}}}},ls=cs,us=i("7591"),ds=i.n(us);n["default"].config.productionTip=!1,n["default"].use(ds.a),n["default"].use(ls),new n["default"]({router:la,store:Fa,vuetify:as,vuewer:ls,render:function(t){return t(ei)}}).$mount("#app")},"56ee":function(t,e,i){"use strict";var n=i("582e"),r=i.n(n);r.a},"582e":function(t,e,i){},"5c65":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{attrs:{bottom:"",left:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-btn",t._g(t._b({attrs:{dark:"",icon:""}},"v-btn",r,!1),n),[i("v-icon",[t._v("mdi-download")])],1)]}}])},[i("m-video-download-list",{on:{click:function(e){return t.$emit("click",e)}}})],1)},r=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",{attrs:{dense:""}},[i("v-list-item",{on:{click:function(e){return t.$emit("click","XLSX")}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-google-spreadsheet")])],1),i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.downloads.xlsx"))+" ")])],1),i("v-list-item",{on:{click:function(e){return t.$emit("click","JSON")}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-code-json")])],1),i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.downloads.json"))+" ")])],1),i("v-list-item",{on:{click:function(e){return t.$emit("click","PNG")}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-file-image")])],1),i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.downloads.png"))+" ")])],1),i("v-list-item",{on:{click:function(e){return t.$emit("click","MP4")}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-file-video")])],1),i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.downloads.mp4"))+" ")])],1),i("v-list-group",{on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.textgrid.name"))+" ")])],1)]},proxy:!0}]),model:{value:t.showTextGrid,callback:function(e){t.showTextGrid=e},expression:"showTextGrid"}},t._l(t.textgrid,(function(e,n){return i("v-list-item",{key:"t-"+n,on:{click:function(i){return t.$emit("click","TEXTGRID/"+e.value)}}},[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t(e.text))+" ")])],1)})),1),i("v-list-group",{on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t("$vuetify.frame.name"))+" ")])],1)]},proxy:!0}]),model:{value:t.showFrame,callback:function(e){t.showFrame=e},expression:"showFrame"}},t._l(t.frame,(function(e,n){return i("v-list-item",{key:"t-"+n,on:{click:function(i){return t.$emit("click","FRAME/"+e.value)}}},[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t(e.text))+" ")])],1)})),1)],1)},a=[],s={name:"m-video-download-list",data:function(){return{showTextGrid:!1,showFrame:!1,textgrid:[{text:"$vuetify.downloads.textgrid.textgrid",value:"TEXTGRID"},{text:"$vuetify.downloads.textgrid.json",value:"JSON"},{text:"$vuetify.downloads.textgrid.xlsx",value:"XLSX"}],frame:[{text:"$vuetify.downloads.frame.json",value:"JSON"},{text:"$vuetify.downloads.frame.xlsx",value:"XLSX"}]}}},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("132d"),m=i("8860"),h=i("56b0"),v=i("da13"),p=i("5d23"),g=i("34c3"),x=Object(l["a"])(c,o,a,!1,null,"cabb6ce6",null),y=x.exports;d()(x,{VIcon:f["a"],VList:m["a"],VListGroup:h["a"],VListItem:v["a"],VListItemContent:p["b"],VListItemIcon:g["a"],VListItemTitle:p["d"]});var b={name:"m-video-download-menu",components:{MVideoDownloadList:y}},w=b,$=i("8336"),k=i("e449"),_=Object(l["a"])(w,n,r,!1,null,"569d9c70",null);e["a"]=_.exports;d()(_,{VBtn:$["a"],VIcon:f["a"],VMenu:k["a"]})},6:function(t,e){},"612b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"pa-0 transparent fill-height",attrs:{fluid:""}},[i("v-col",{staticClass:"pa-0"},[i("v-card",{attrs:{flat:"",tile:""}},[i("v-row",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],attrs:{dense:""}},[i("v-col",{ref:"videoArray",staticClass:"pa-0",attrs:{cols:t.$videoCols,dense:""}},[t._t("video")],2),i("v-col",{staticClass:"pa-0 pl-2",attrs:{cols:t.$videoCols,dense:""}},[t.$mini?t._e():i("v-card",{staticClass:"overflow-y-auto",attrs:{tile:"",flat:""}},[t._t("table")],2)],1)],1)],1),i("v-card",{staticClass:"d-flex mt-3 overflow-y-auto overflow-x-hidden",style:"max-height: "+t.wsMaxHeight+"px",attrs:{flat:"",tile:""}},[i("v-row",[i("v-col",{staticClass:"py-0 pr-0"},[t._t("default")],2)],1)],1)],1),t._t("bottom")],2)},r=[],o=i("0402"),a={name:"WVuewerLayout",data:function(){return{maxHeight:0,wsMaxHeight:0}},computed:{$videoCols:{get:function(){return this.$store.state.current.layout.videoCols},set:function(t){this.$store.dispatch("current/layout/videoCols",t)}},$mini:function(){return this.$store.state.current.layout.mini},arrayHeight:function(){return this.$refs.videoArray.clientHeight}},watch:{"$refs.videoArray.clientHeight":function(){console.log("clientHeight")},"$vuetify.breakpoint.mdAndUp":function(t){this.$videoCols=0==t?12:6},"$store.state.current.wavesurfer":function(t){t&&0==this.maxHeight&&this.onResize()},$mini:function(t,e){if(0==e&&1==t){var i=10,n=this;setInterval(n.onResize,1e3),setTimeout((function(){clearInterval(n.onResize)}),1e3*i)}}},methods:{onResize:function(){var t=this;this.$nextTick((function(){if(t.$refs.videoArray){var e=t.$refs.videoArray.children;if(e){var i,n=0,r=Object(o["a"])(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;a.clientHeight&&(n+=a.clientHeight)}}catch(s){r.e(s)}finally{r.f()}t.maxHeight=Math.round(n),t.wsMaxHeight=Math.round(window.innerHeight-n-128),t.$emit("resize",t.maxHeight)}}}))}},mounted:function(){this.$videoCols=0==this.$vuetify.breakpoint.mdAndUp?12:6},beforeDestroy:function(){this.$store.dispatch("current/layout/init")}},s=a,c=i("2877"),l=i("6544"),u=i.n(l),d=i("b0af"),f=i("62ad"),m=i("a523"),h=i("0fd9"),v=i("269a"),p=i.n(v),g=i("dc22"),x=Object(c["a"])(s,n,r,!1,null,"51682448",null);e["a"]=x.exports;u()(x,{VCard:d["a"],VCol:f["a"],VContainer:m["a"],VRow:h["a"]}),p()(x,{Resize:g["a"]})},"643d":function(t,e,i){"use strict";i("4d63"),i("ac1f"),i("25f0");var n=i("90a6"),r="$vuetify.validations",o={positiveInteger:new RegExp(/^[0-9]+$/),positiveIntegerOrError:new RegExp(/^([0-9]+|-1)$/),positiveFloat:new RegExp(/^([1-9]\d*|0)(\.\d+)?$/)},a=function(t,e){return t.$vuetify?t.$vuetify.lang.t(e):"no vuetify"},s=function(t,e){return void 0!==e[t]};e["a"]={computed:{videoRules:function(){if(this.$vuetify){var t=this,e=this.$store.state.setting.maxVideoSize,i=1e6,n="arrayBuffer";return[function(e){return!!e||a(t,"".concat(r,".required"))},function(n){return!n||n.size<e*i||a(t,"".concat(r,".maxVideoSize"))},function(e){return!e||s(n,e)||a(t,"".concat(r,".hasArrayBuffer"))}]}return[]},rules:function(){var t=this;if(this.$vuetify){var e=function(){var e=t,i={videoRules:t.videoRules},n=function(t){i["".concat(t,"Rules")]=[function(t){return!!t||a(e,"".concat(r,".required"))},function(i){return o[t].test(i)||a(e,"".concat(r,".").concat(t))}]};for(var s in o)n(s);return{v:i}}();if("object"===Object(n["a"])(e))return e.v}return{}}}}},6677:function(t,e,i){"use strict";(function(t){i("b0c0"),i("498a"),i("96cf");var n=i("7580"),r=i("8e30"),o=i("643d"),a=i("21f0");e["a"]={name:"video-trim",mixins:[o["a"]],components:{MViewLayout:r["a"]},data:function(){return{heading:"Example: TRIM VIDEO",desc:"動画切り出し関数の処理例です(特定の動画の5-10secを切り出します)"}},methods:{onChange:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(i){var n,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=9;break}if(!i.arrayBuffer){e.next=9;break}return e.next=4,i.arrayBuffer();case 4:n=e.sent,r=a["a"].video.trim(n,5,10),o=r.MEMFS[0],s=a["a"].video.toBlob(t(o.data)),a["a"].file.download(s,o.name);case 9:case"end":return e.stop()}}),e)})));function i(t){return e.apply(this,arguments)}return i}()}}}).call(this,i("1c35").Buffer)},"674b":function(t,e,i){},6854:function(t,e,i){"use strict";(function(t){i("99af"),i("ac1f"),i("841c"),i("1276"),i("498a");var n=i("ea1e"),r=i("ee5b"),o=i("21f0"),a=i("edc0");e["a"]={name:"m-file-point-table",components:{MVideoDialog:n["a"]},mixins:[r["a"]],data:function(){return{headers:[{text:"File Name",value:"fileName"},{text:"Tier Name",value:"tier"},{text:"Index",value:"index"},{text:"Time",value:"time"},{text:"Text",value:"text"},{text:"Actions",value:"actions"}],dialog:!1,src:"",start:0,end:0}},props:{items:{type:Array}},computed:{$keyword:function(){return this.$store.state.search.keyword}},methods:{playItem:function(t){this.src=t.src;var e=this.$playOffset*(1/t.fps),i=t.time-e,n=t.time+e;this.start=i>0?i:0,this.end=n<t.duration?n:t.duration,this.dialog=!0},trimItem:function(e){var i=this.$playOffset*(1/e.fps),n=e.src,r=e.fileName.split(".")[0],s=e.time-i,c=e.time+i,l=s>0?s:0,u=c<e.duration?c:e.duration,d=String(a["a"].round(l,3))+"-"+String(a["a"].round(u,3)),f="".concat(r,"-").concat(d,".mp4"),m=o["a"].file.toBuff(n),h=o["a"].video.trim(m,l,u),v=h.MEMFS[0],p=o["a"].video.toBlob(t(v.data));o["a"].file.download(p,f)},openItem:function(t){this.$router.push({path:"/files/".concat(t.fileId,"?start=").concat(t.time)})}}}}).call(this,i("1c35").Buffer)},"6ac2":function(t,e,i){"use strict";var n=i("674b"),r=i.n(n);r.a},"6b13":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"context",attrs:{tabindex:"0"},on:{keyup:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("keyup",e)},keydown:function(e){return e.stopPropagation(),e.preventDefault(),t.$emit("keydown",e)}}},[t._t("default")],2)},r=[],o={name:"m-key-context",methods:{focus:function(){this.$refs.context.focus()},blur:function(){this.$refs.context.blur()}}},a=o,s=(i("b606"),i("2877")),c=Object(s["a"])(a,n,r,!1,null,"772e8981",null);e["a"]=c.exports},7:function(t,e){},"70f3":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-speed-dial",{attrs:{fixed:"",bottom:"",right:"",direction:"left",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-btn",{attrs:{color:"blue darken-2",dark:"",fab:""},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t.fab?i("v-icon",[t._v("mdi-close")]):i("v-icon",[t._v("mdi-apps")])],1)]},proxy:!0}]),model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},t._l(t.btns.filter((function(t){return t.show})),(function(e,n){return i("v-btn",{key:n,attrs:{fab:"",dark:"",small:"",color:e.color},on:{click:function(i){return t.$emit(e.event)}}},[i("v-icon",[t._v(t._s(e.icon))])],1)})),1)},r=[],o={name:"m-speed-dial",props:{value:{type:Boolean,default:!1}},computed:{fab:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},btns:function(){return[{event:"click-detail",color:"black",icon:"mdi-eye",show:this.$vuetify.breakpoint.smAndUp},{event:"click-setting",color:"black",icon:"mdi-cog",show:this.$vuetify.breakpoint.smAndUp},{event:"click-save",color:"black",icon:"mdi-content-save",show:this.$vuetify.breakpoint.smAndUp},{event:"click-image-edit",color:"orange",icon:"mdi-selection-drag",show:null!==this.$store.state.current.frame.src},{event:"click-tier-edit",color:"green",icon:"mdi-pencil",show:!0},{event:"click-tier-add",color:"indigo",icon:"mdi-plus",show:!0},{event:"click-tier-delete",color:"red",icon:"mdi-delete",show:!0}]}}},a=o,s=i("2877"),c=i("6544"),l=i.n(c),u=i("8336"),d=i("132d"),f=i("c73b"),m=Object(s["a"])(a,n,r,!1,null,"2c9490b0",null);e["a"]=m.exports;l()(m,{VBtn:u["a"],VIcon:d["a"],VSpeedDial:f["a"]})},"73ee":function(t,e,i){},7987:function(t,e,i){"use strict";var n=i("73ee"),r=i.n(n);r.a},"7a0e":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-window-card",{ref:"window",attrs:{x:0,y:0,hide:t.hide,title:t.title,"max-width":"600px"}},[i("v-card",{attrs:{tile:"",flat:""}},[null!==t.src&&null!==t.src2?i("v-row",[i("v-col",{staticClass:"py-0 pr-0",attrs:{cols:"6"}},[i("v-img",{attrs:{src:t.src}})],1),i("v-col",{staticClass:"py-0 pl-0",attrs:{cols:"6"}},[i("v-img",{attrs:{src:t.src2}})],1)],1):i("m-loading",{attrs:{text:"$vuetify.loading"}})],1)],1)},r=[],o=i("9e4d"),a=i("3591"),s={name:"m-diff-card",components:{MWindowCard:o["a"],MLoading:a["a"]},data:function(){return{src:null,src2:null}},props:{hide:{type:Boolean,default:!1}},methods:{open:function(){var t=this.$refs.window;t&&t.open()},close:function(){var t=this.$refs.window;t&&t.close()},framediff:function(){var t=this;this.current&&this.prev?this.$vuewer.image.frameDiff(this.prev,this.current,this.originSize).then((function(e){t.src=e})).catch((function(e){t.src=null,t.$vuewer.snackbar.error(e)})):this.src=null},framediff2:function(){var t=this;this.current&&this.next?this.$vuewer.image.frameDiff(this.current,this.next,this.originSize).then((function(e){t.src2=e})).catch((function(e){t.src2=null,t.$vuewer.snackbar.error(e)})):this.src2=null}},watch:{isChange:function(t,e){t!=e&&0==t&&(this.src=null,this.src2=null,this.framediff(),this.framediff2())}},computed:{title:function(){return"$vuetify.contexts.windows.framediff"},isChange:function(){return this.$store.state.current.frame.isChange},originSize:function(){return this.$store.state.current.originSize},current:function(){return this.$store.state.current.frame.src},next:function(){return this.$store.state.current.frame.next},prev:function(){return this.$store.state.current.frame.prev}}},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("b0af"),m=i("62ad"),h=i("adda"),v=i("0fd9"),p=Object(l["a"])(c,n,r,!1,null,"a87ad2b8",null);e["a"]=p.exports;d()(p,{VCard:f["a"],VCol:m["a"],VImg:h["a"],VRow:v["a"]})},"7bfa":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{persistent:"",fullscreen:t.$store.state.current.layout.mini,titleColor:t.color,title:t.$vuetify.lang.t(t.title),"max-width":"700"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("m-video-upload-menu",{on:{click:function(e){return t.$emit("upload-click",e)}}}),i("m-video-download-menu",{on:{click:function(e){return t.$emit("download-click",e)}}}),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(e){t.detail=!t.detail}}},[i("v-icon",[t._v(t._s(t.icon))])],1),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:function(e){t.dialog=!1}}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("m-text-grid",{attrs:{frames:t.frames,textgrid:t.textgrid,"video-height":t.height,color:t.color},on:{"click-image-edit":t.onClickImageEdit,"click-ruler":t.onClickRuler}}),t.detail?i("v-divider",{attrs:{inset:""}}):t._e(),t.detail?i("m-video-stream-list",{attrs:{"video-stream":t.videoStream}}):t._e(),t.detail?i("v-divider",{attrs:{inset:""}}):t._e(),t.detail?i("m-audio-stream-list",{attrs:{"audio-stream":t.audioStream}}):t._e()],1)],1)},r=[],o=i("9621"),a=i("3aaa"),s=i("94d2"),c=i("0bad"),l=i("5c65"),u=i("41e7"),d=i("4009"),f={name:"m-textgrid-dialog",mixins:[d["a"]],components:{MCardDialog:o["a"],MTextGrid:a["a"],MVideoDownloadMenu:l["a"],MVideoUploadMenu:u["a"],MVideoStreamList:s["a"],MAudioStreamList:c["a"]},props:{value:{type:Boolean},textgrid:{type:Object,default:function(){return{}}},frames:{type:Array,default:function(){return[]}}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},icon:function(){return this.detail?"mdi-chevron-up":"mdi-chevron-down"},height:function(){var t=window.innerHeight;return this.detail?t-336:t}},data:function(){return{title:"$vuetify.forms.detail.title",detail:!1,color:"grey darken-4"}},methods:{onClickImageEdit:function(t){this.$emit("click-image-edit",t),this.dialog=!1},onClickRuler:function(t){this.$emit("click-ruler",t),this.dialog=!1}}},m=f,h=i("2877"),v=i("6544"),p=i.n(v),g=i("8336"),x=i("b0af"),y=i("ce7e"),b=i("132d"),w=Object(h["a"])(m,n,r,!1,null,"57d8b790",null);e["a"]=w.exports;p()(w,{VBtn:g["a"],VCard:x["a"],VDivider:y["a"],VIcon:b["a"]})},"7c54":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form"},[i("div",[i("label",[t._v(t._s(t.t(t.locale+".waveform.label")))]),i("v-text-field",{attrs:{suffix:"px/sec",rules:t.minPxPerSecRule,label:t.t(t.locale+".waveform.minPxPerSec.label"),hint:t.t(t.locale+".waveform.minPxPerSec.hint")},model:{value:t.$minPxPerSec,callback:function(e){t.$minPxPerSec=e},expression:"$minPxPerSec"}}),t.$vuetify.breakpoint.smAndUp?i("v-row",[i("v-col",{staticClass:"text-truncate",attrs:{sm:"4"}},[i("label",[t._v(" "+t._s(t.t(t.locale+".waveform.cursorColor.label"))+": "+t._s(t.$cursorColor)+" ")]),i("v-color-picker",{attrs:{"show-swatches":""},model:{value:t.$cursorColor,callback:function(e){t.$cursorColor=e},expression:"$cursorColor"}})],1),i("v-col",{staticClass:"text-truncate",attrs:{sm:"4"}},[i("label",[t._v(" "+t._s(t.t(t.locale+".waveform.waveColor.label"))+": "+t._s(t.$waveColor)+" ")]),i("v-color-picker",{attrs:{"show-swatches":""},model:{value:t.$waveColor,callback:function(e){t.$waveColor=e},expression:"$waveColor"}})],1),i("v-col",{staticClass:"text-truncate",attrs:{sm:"4"}},[i("label",[t._v(" "+t._s(t.t(t.locale+".waveform.progressColor.label"))+": "+t._s(t.$progressColor)+" ")]),i("v-color-picker",{attrs:{"show-swatches":""},model:{value:t.$progressColor,callback:function(e){t.$progressColor=e},expression:"$progressColor"}})],1)],1):t._e(),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".waveform.showTimeLine.label")},model:{value:t.$showTimeLine,callback:function(e){t.$showTimeLine=e},expression:"$showTimeLine"}}),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".waveform.showSpectrogram.label")},model:{value:t.$showSpectrogram,callback:function(e){t.$showSpectrogram=e},expression:"$showSpectrogram"}})],1),i("v-divider"),t.$showSpectrogram?i("div",{staticClass:"my-5"},[i("label",[t._v(t._s(t.t(t.locale+".spectrogram.label")))]),i("v-select",{attrs:{items:[0,1],label:t.t(t.locale+".spectrogram.targetChannel.label")},model:{value:t.$targetChannel,callback:function(e){t.$targetChannel=e},expression:"$targetChannel"}}),i("v-text-field",{attrs:{suffix:"* 512",rules:t.rules.positiveFloatRules,label:t.t(t.locale+".spectrogram.freqRate.label"),hint:t.t(t.locale+".spectrogram.freqRate.hint")},model:{value:t.$freqRate,callback:function(e){t.$freqRate=e},expression:"$freqRate"}}),i("v-text-field",{attrs:{suffix:"px",rules:t.rules.positiveIntegerRules,label:t.t(t.locale+".spectrogram.spectrogramHeight.label"),hint:t.t(t.locale+".spectrogram.spectrogramHeight.hint")},model:{value:t.$spectrogramHeight,callback:function(e){t.$spectrogramHeight=e},expression:"$spectrogramHeight"}}),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".spectrogram.showFreqLabel.label")},model:{value:t.$showFreqLabel,callback:function(e){t.$showFreqLabel=e},expression:"$showFreqLabel"}})],1):t._e(),i("v-divider"),i("div",{staticClass:"my-5"},[i("label",[t._v(t._s(t.t(t.locale+".textgrid.label")))]),i("v-text-field",{attrs:{suffix:"frame",rules:t.rules.positiveIntegerRules,label:t.t(t.locale+".textgrid.playOffset.label"),hint:t.t(t.locale+".textgrid.playOffset.hint")},model:{value:t.$playOffset,callback:function(e){t.$playOffset=e},expression:"$playOffset"}}),i("v-select",{attrs:{"item-text":"text","item-value":"val",items:t.addRecordKeyChoice,label:""+t.t(t.locale+".textgrid.addRecordKey.label")},model:{value:t.$addRecordKey,callback:function(e){t.$addRecordKey=e},expression:"$addRecordKey"}}),i("v-select",{attrs:{"item-text":"text","item-value":"val",items:t.deleteRecordKeyChoice,label:""+t.t(t.locale+".textgrid.deleteRecordKey.label")},model:{value:t.$deleteRecordKey,callback:function(e){t.$deleteRecordKey=e},expression:"$deleteRecordKey"}})],1),i("v-divider"),i("div",{staticClass:"my-5"},[i("label",[t._v(t._s(t.t(t.locale+".video.label")))]),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".video.showFrameInVideo.label")},model:{value:t.$showFrameInVideo,callback:function(e){t.$showFrameInVideo=e},expression:"$showFrameInVideo"}}),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".video.syncPoints.label")},model:{value:t.$showPointsInVideo,callback:function(e){t.$showPointsInVideo=e},expression:"$showPointsInVideo"}}),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".video.syncRects.label")},model:{value:t.$showRectsInVideo,callback:function(e){t.$showRectsInVideo=e},expression:"$showRectsInVideo"}}),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".video.syncPrevPoints.label")},model:{value:t.$syncPrevPoints,callback:function(e){t.$syncPrevPoints=e},expression:"$syncPrevPoints"}}),i("v-checkbox",{attrs:{"hide-details":"",label:t.t(t.locale+".video.syncPrevRects.label")},model:{value:t.$syncPrevRects,callback:function(e){t.$syncPrevRects=e},expression:"$syncPrevRects"}})],1)],1)},r=[],o=(i("a9e3"),i("0402")),a=i("ee5b"),s=i("643d"),c={name:"m-setting-form",mixins:[a["a"],s["a"]],data:function(){return{locale:"$vuetify.setting.form"}},methods:{t:function(t){return this.$vuetify.lang.t(t)}},computed:{minPxPerSecRule:function(){var t,e=this,i=[],n=Object(o["a"])(this.rules.positiveIntegerRules);try{for(n.s();!(t=n.n()).done;){var r=t.value;i.push(r)}}catch(a){n.e(a)}finally{n.f()}return i.push((function(t){return!t||Number(t)>100||e.$vuetify.lang.t("$vuetify.validations.more",100)})),i.push((function(t){return!t||Number(t)<700||e.$vuetify.lang.t("$vuetify.validations.less",700)})),i.push((function(t){return!t||Number(t)%50==0||e.$vuetify.lang.t("$vuetify.validations.times",50)})),i},addRecordKeyChoice:function(){return[{text:this.t("$vuetify.setting.form.textgrid.addRecordKey.dbl"),val:"dbl"},{text:this.t("$vuetify.setting.form.textgrid.addRecordKey.ctrl"),val:"ctrl"},{text:this.t("$vuetify.setting.form.textgrid.addRecordKey.alt"),val:"alt"}]},deleteRecordKeyChoice:function(){return[{text:this.t("$vuetify.setting.form.textgrid.deleteRecordKey.delete"),val:"delete"},{text:this.t("$vuetify.setting.form.textgrid.deleteRecordKey.ctrl"),val:"ctrl"},{text:this.t("$vuetify.setting.form.textgrid.deleteRecordKey.alt"),val:"alt"}]}}},l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("ac7c"),h=i("62ad"),v=i("03a4"),p=i("ce7e"),g=i("4bd4"),x=i("0fd9"),y=i("b974"),b=i("8654"),w=Object(u["a"])(l,n,r,!1,null,"f469a762",null);e["a"]=w.exports;f()(w,{VCheckbox:m["a"],VCol:h["a"],VColorPicker:v["a"],VDivider:p["a"],VForm:g["a"],VRow:x["a"],VSelect:y["a"],VTextField:b["a"]})},8:function(t,e){},"84bd":function(t,e,i){"use strict";(function(t){i("99af"),i("a623"),i("4de4"),i("c975"),i("a15b"),i("d81d"),i("b0c0"),i("a9e3"),i("b64b"),i("d3b7"),i("07ac"),i("ac1f"),i("6062"),i("3ca3"),i("841c"),i("1276"),i("498a"),i("ddb0");var n=i("0402"),r=(i("96cf"),i("7580")),o=i("0bd7"),a=i("ea1e"),s=i("21f0"),c=i("edc0");e["a"]={name:"m-file-interval-table",components:{MVideoDialog:a["a"]},data:function(){return{selected:[],headers:[{text:"File Name",value:"fileName"},{text:"Tier Name",value:"tier"},{text:"Index",value:"index"},{text:"Start Time",value:"start"},{text:"End Time",value:"end"},{text:"Text",value:"text"},{text:"Actions",value:"actions"}],dialog:!1,src:"",start:0,end:0}},props:{items:{type:Array}},computed:{query:function(){return{args:this.$store.getters["search/args"],kwargs:this.$store.getters["search/kwargs"],norargs:this.$store.getters["search/norargs"]}},$items:function(){if(this.items){var t=this.items,e=this.query.args,i=this.query.kwargs;return e.length&&(t=t.filter((function(t){var i=Object(o["a"])(new Set(Object.values(t.search))).join(" ");return e.map((function(t){return-1!==i.indexOf(t)})).every((function(t){return!0===t}))}))),Object.keys(i).length&&(t=t.filter((function(t){return console.log(t.search),Object.keys(i).map((function(e){return e in t.search&&t.search[e]==i[e]})).every((function(t){return!0===t}))}))),t}return[]}},methods:{playItem:function(t){this.src=t.src,this.start=Number(t.start),this.end=Number(t.end),this.dialog=!0},trimItem:function(e){var i=e.src,n=e.fileName.split(".")[0],r=e.start,o=e.end,a=String(c["a"].round(r,3))+"-"+String(c["a"].round(o,3)),l="".concat(n,"-").concat(a,".mp4"),u=s["a"].file.toBuff(i),d=s["a"].video.trim(u,r,o),f=d.MEMFS[0],m=s["a"].video.toBlob(t(f.data));s["a"].file.download(m,l)},openItem:function(t){this.$router.push({path:"/files/".concat(t.fileId,"?start=").concat(t.start)})},resynthesisPng:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,r,o,a,c,l,u,d,f,m,h,v,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[],i=Object(n["a"])(this.selected),t.prev=2,i.s();case 4:if((r=i.n()).done){t.next=32;break}o=r.value,a=s["a"].file.toBuff(o.src),c=s["a"].video.trimPng(a,o.start,o.end),l=c.MEMFS,u=Object(n["a"])(l),t.prev=10,u.s();case 12:if((d=u.n()).done){t.next=22;break}return f=d.value,m=new Blob([f.data],{type:"image/png"}),t.next=17,s["a"].file.toBase64(m);case 17:h=t.sent,v="".concat(o.fileName,"-").concat(o.start,"-").concat(o.end,".").concat(f.name),e.push({name:v,base64:h});case 20:t.next=12;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](10),u.e(t.t0);case 27:return t.prev=27,u.f(),t.finish(27);case 30:t.next=4;break;case 32:t.next=37;break;case 34:t.prev=34,t.t1=t["catch"](2),i.e(t.t1);case 37:return t.prev=37,i.f(),t.finish(37);case 40:return t.next=42,s["a"].zip.toZip(e);case 42:p=t.sent,s["a"].file.download(p,"result.zip");case 44:case"end":return t.stop()}}),t,this,[[2,34,37,40],[10,24,27,30]])})));function e(){return t.apply(this,arguments)}return e}(),resynthesis:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i,r,o,a,c,l,u,d,f,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=[],i=Object(n["a"])(this.selected),t.prev=2,i.s();case 4:if((r=i.n()).done){t.next=17;break}return o=r.value,a=s["a"].file.toBuff(o.src),c=s["a"].video.trim(a,o.start,o.end),l=c.MEMFS[0],u=new Blob([l.data],{type:"video/mp4"}),t.next=12,s["a"].file.toBase64(u);case 12:d=t.sent,f="".concat(o.fileName,"-").concat(o.start,"-").concat(o.end,".mp4"),e.push({name:f,base64:d});case 15:t.next=4;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](2),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:return t.next=27,s["a"].zip.toZip(e);case 27:m=t.sent,s["a"].file.download(m,"result.zip");case 29:case"end":return t.stop()}}),t,this,[[2,19,22,25]])})));function e(){return t.apply(this,arguments)}return e}()}}}).call(this,i("1c35").Buffer)},"84c5":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{attrs:{color:t.color,dark:""}},[i("v-card-text",{staticClass:"pt-3"},[t._t("default"),t.value>-1?i("v-progress-linear",{staticClass:"mb-0",attrs:{value:t.value,color:t.progressColor,striped:""}}):i("v-progress-linear",{staticClass:"mb-0",attrs:{color:t.progressColor,indeterminate:""}})],2)],1)},r=[],o=(i("a9e3"),{name:"m-loading-card",props:{value:{type:Number,default:-1},color:{type:String,default:"primary"},progressColor:{type:String,default:"white"}}}),a=o,s=i("2877"),c=i("6544"),l=i.n(c),u=i("b0af"),d=i("99d9"),f=i("8e36"),m=Object(s["a"])(a,n,r,!1,null,"42647c8e",null);e["a"]=m.exports;l()(m,{VCard:u["a"],VCardText:d["b"],VProgressLinear:f["a"]})},"89a7":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],style:t.canvasWrapperStyle,attrs:{flat:t.flat,tile:t.tile,tabindex:"0"},on:{mouseover:function(e){return t.$emit("mouseover")}}},[i("m-key-context",{ref:"keycontext",style:t.canvasWrapperStyle,on:{keyup:t.onKeyup}},[i("video",{ref:"video",style:t.videoStyle,attrs:{src:t.src},domProps:{muted:t.muted},on:{loadeddata:t.onLoaded,timeupdate:t.onTimeupdate}}),i("v-stage",{ref:"stage",style:t.canvasStyle,attrs:{config:t.canvas},on:{click:function(e){return t.onClickEvent(e,"click")},dblclick:function(e){return t.onClickEvent(e,"dblclick")}}},[t.$store.state.setting.showPointsInVideo?i("v-layer",t._l(t.frame.circles,(function(t,e){return i("v-circle",{key:e,attrs:{config:t}})})),1):t._e(),t.$store.state.setting.showRectsInVideo?i("v-layer",t._l(t.frame.rects,(function(t,e){return i("v-rect",{key:e,attrs:{config:t}})})),1):t._e(),i("v-layer",t._l(t.frame.texts,(function(t,e){return i("v-text",{key:e,attrs:{config:t}})})),1),t.$store.state.setting.showFrameInVideo?i("v-layer",[i("v-text",{attrs:{config:t.label}})],1):t._e()],1)],1),t.controls?i("v-card-actions",[i("v-btn",{attrs:{dark:"",icon:"",color:"primary"},on:{click:t.downloadImage}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-file-download")])],1),i("v-spacer"),i("v-btn",{attrs:{dark:"",icon:"",color:"primary"},on:{click:t.play}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-play")])],1),i("v-btn",{attrs:{dark:"",icon:"",color:"primary"},on:{click:t.pause}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-pause")])],1)],1):t._e()],1)},r=[],o=(i("99af"),i("4de4"),i("c740"),i("d81d"),i("d3b7"),i("96cf"),i("7580")),a=i("ed08"),s=i("6b13"),c={name:"m-video",components:{MKeyContext:s["a"]},props:{src:{type:String,required:!0},frames:{type:Array,default:function(){return[]}},originSize:{type:Object,default:function(){return{width:null,height:null}}},defaultPointColor:{type:String,default:"white"},defaultRectColor:{type:String,default:"white"},muted:{type:Boolean,default:!1},controls:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},tile:{type:Boolean,default:!1}},data:function(){return{show:!0,video:{image:null},frame:{idx:null,time:null,circles:[],rects:[],texts:[]},canvas:{width:0,height:0},videoStyle:{width:"100%",height:"auto"},canvasWrapperStyle:{position:"relative"},canvasStyle:{position:"absolute",top:0,left:0}}},watch:{frames:function(){var t=this.getCurrentTime();this.syncFrame(t)}},computed:{label:function(){var t=this.$vuewer.math.padding(this.frame.idx,3),e=Math.round(this.canvas.height/15);return{x:e/2,text:"".concat(t," / ").concat(this.frames.length),y:this.canvas.height-e,fontSize:e,fontFamily:"Arial",fontStyle:"normal",shadowColor:"black",shadowBlur:1,fill:a["a"].color.toCss("green",this.$vuetify)}},$frames:function(){var t=this,e=this.originSize.width,i=this.originSize.height,n=this.canvas.width,r=this.canvas.height;return this.frames.map((function(o){return{id:o.id,idx:o.idx,time:o.time,circles:o.points?o.points.filter((function(t){return t.x&&t.y})).map((function(o){return{stroke:"white",strokeWidth:1,x:e?o.x*n/e:o.x,y:i?o.y*r/i:o.y,radius:3,fill:a["a"].color.toCss(o.color||t.defaultPointColor,t.$vuetify)}})):[],rects:o.rects?o.rects.map((function(o){return{x:e?o.x*n/e:o.x,y:i?o.y*r/i:o.y,width:e?o.width*n/e:o.width,height:i?o.height*r/i:o.height,rotation:o.rotation||0,scaleX:o.scaleX||1,scaleY:o.scaleY||1,strokeWidth:2,stroke:a["a"].color.toCss(o.color||t.defaultRectColor,t.$vuetify)}})):[],texts:o.texts?o.texts.map((function(n){return{x:e?n.x*t.canvas.width/e:n.x,y:i?n.y*t.canvas.height/i:n.y,text:n.text,fontSize:n.size,fontFamily:n.fontFamily||"Arial",fontStyle:n.fontStyle||"normal",shadowColor:"black",shadowBlur:1,fill:a["a"].color.toCss(n.color||t.defaultRectColor,t.$vuetify)}})):[]}}))}},methods:{focus:function(){this.$refs.keycontext.focus()},setPlaybackRate:function(t){this.$refs.video.defaultPlaybackRate=t},play:function(){this.$refs.video.play()},pause:function(){this.$refs.video.pause()},setCurrentTime:function(t){this.$refs.video.currentTime=t},getCurrentTime:function(){return this.$refs.video?this.$refs.video.currentTime:0},getDuration:function(){return this.$refs.video.duration},copyImage:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.toDataURL();case 2:return e=t.sent,i=this.$vuewer.io.file.toBlob(e),t.next=6,navigator.clipboard.write([new ClipboardItem({"image/png":i})]);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),downloadImage:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="time-".concat(this.getCurrentTime(),".png"),this.frames.length>0&&(e="frame-".concat(this.frame.idx,".png")),t.next=4,this.toDataURL();case 4:i=t.sent,n=document.createElement("a"),n.href=i,n.download=e,n.click();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getVideoDataURL:function(){var t=this.$refs.video;if(t){var e=document.createElement("canvas");return e.width=this.originSize.width,e.height=this.originSize.height,e.getContext("2d").drawImage(t,0,0,e.width,e.height),e.toDataURL()}return null},toDataURL:function(){var t=this;return new Promise((function(e,i){if(t.$refs.stage){var n=t.$refs.stage.getStage(),r=t.$refs.video;if(r){var o=document.createElement("canvas");o.width=t.originSize.width,o.height=t.originSize.height,o.getContext("2d").drawImage(r,0,0,o.width,o.height);var a=n.toDataURL(),s=new Image;s.src=a,s.onload=function(){o.getContext("2d").drawImage(s,0,0,o.width,o.height),e(o.toDataURL())},s.onerror=function(t){return i(t)}}else i(Error("No video"))}}))},setCanvasSize:function(){var t=this.$refs.video;if(t){var e=this.$refs.video.clientWidth,i=this.$refs.video.clientHeight;this.canvas.width=e,this.canvas.height=i}},syncFrame:function(t){if(this.$frames.length>0&&t){var e=this.$vuewer.math.nearest(this.$frames,"time",t);if(e.time>=t){this.frame=e;var i=this.frames.findIndex((function(t){return t.id==e.id}));-1!==i&&this.$emit("frame-updated",this.frames[i])}}},onLoaded:function(){var t=this;this.setCanvasSize(),this.$frames.length>0&&(this.frame=this.$frames[0],setTimeout((function(){t.syncFrame(0)}))),this.$emit("loadeddata",this.$refs.video),this.show=!1},onResize:function(){this.setCanvasSize()},onKeyup:function(t){var e=this.$vuewer.key.summary(event),i=e.key,n=e.xKey;"c"==i&&"ctrl"==n?this.copyImage():this.$emit("keyup",t)},onTimeupdate:function(){var t=this;setTimeout((function(){var e=t.getCurrentTime();t.$emit("timeupdate",e),t.syncFrame(e)}))},onClickEvent:function(t,e){var i={event:t,frame:this.frame,origin:this.originSize,canvas:this.canvas};this.$emit(e,i)}}},l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("8336"),h=i("b0af"),v=i("99d9"),p=i("132d"),g=i("2fa4"),x=i("269a"),y=i.n(x),b=i("dc22"),w=Object(u["a"])(l,n,r,!1,null,"004ddbc6",null);e["a"]=w.exports;f()(w,{VBtn:m["a"],VCard:h["a"],VCardActions:v["a"],VIcon:p["a"],VSpacer:g["a"]}),y()(w,{Resize:b["a"]})},"8e30":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[t.showJumbotron?i("v-row",[i("v-col",[i("m-jumbotron",{attrs:{heading:t.heading,desc:t.desc}})],1)],1):t._e(),i("v-row",{class:t.colClass},[i("v-col",{class:t.colClass},[t._t("default")],2)],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"text-center"},[i("h1",{staticClass:"font-weight-light display-3",domProps:{textContent:t._s(t.heading)}}),t.desc?i("div",{directives:[{name:"show",rawName:"v-show",value:t.$vuetify.breakpoint.smAndUp,expression:"$vuetify.breakpoint.smAndUp"}],staticClass:"font-weight-light subtitle-1",domProps:{innerHTML:t._s(t.desc)}}):t._e()])},a=[],s={name:"WJumbotron.vue",props:{heading:{type:String,default:""},desc:{type:String,default:""}}},c=s,l=i("2877"),u=Object(l["a"])(c,o,a,!1,null,"5b54c5ce",null),d=u.exports,f={name:"MViewLayout",components:{MJumbotron:d},props:{heading:{type:String},desc:{type:String}},computed:{showJumbotron:function(){return!!this.heading&&this.desc},colClass:function(){return this.$vuetify.breakpoint.smAndUp?"":"ma-0 pa-0"}}},m=f,h=i("6544"),v=i.n(h),p=i("62ad"),g=i("a523"),x=i("0fd9"),y=Object(l["a"])(m,n,r,!1,null,"9ed1254e",null);e["a"]=y.exports;v()(y,{VCol:p["a"],VContainer:g["a"],VRow:x["a"]})},9:function(t,e){},9139:function(t,e,i){"use strict";i("d3b7");var n=function(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){return e(n)},n.onerror=function(t){return i(t)},n.src=t}))};e["a"]={load:n}},"94d2":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",[i("v-list-item",[i("v-list-item-icon",[i("v-icon",{attrs:{color:"indigo"}},[t._v("mdi-file-video")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.videoStream.codec_name)+" ")])],1)],1),i("v-list-item",[i("v-list-item-icon"),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.videoStream.pix_fmt)+" ")])],1)],1),i("v-list-item",[i("v-list-item-icon"),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.videoStream.bitrate)+" kb/s, "+t._s(t.videoStream.tbr)+" tbr, "+t._s(t.videoStream.tbn)+" tbn, "+t._s(t.videoStream.tbc)+" tbc ")])],1)],1)],1)},r=[],o={name:"m-video-stream-list",props:{videoStream:{type:Object,required:!0}}},a=o,s=i("2877"),c=i("6544"),l=i.n(c),u=i("132d"),d=i("8860"),f=i("da13"),m=i("5d23"),h=i("34c3"),v=Object(s["a"])(a,n,r,!1,null,"70be4f6e",null);e["a"]=v.exports;l()(v,{VIcon:u["a"],VList:d["a"],VListItem:f["a"],VListItemContent:m["b"],VListItemIcon:h["a"],VListItemTitle:m["d"]})},9621:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{fullscreen:t.fullscreen,"hide-overlay":t.hideOverlay,transition:t.transition,persistent:t.persistent,scrollable:t.scrollable,"max-width":t.maxWidth},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("m-t-card",{attrs:{title:t.title,"title-color":t.titleColor,prependIcon:t.prependIcon,prependIconColor:t.prependIconColor,"toolbar-actions":t.toolbarActions,dense:t.dense},scopedSlots:t._u([{key:"toolbar-actions",fn:function(){return[t._t("toolbar-actions")]},proxy:!0}],null,!0)},[t._t("default")],2)],1)},r=[],o=(i("a623"),i("d81d"),i("531d")),a={name:"MDialog",components:{MTCard:o["a"]},props:{value:{type:Boolean,default:!1},title:{type:String},fullscreen:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},hideOverlay:{type:Boolean,default:function(){return this.fullscreen}},transition:{type:String,default:function(){return this.fullscreen?"dialog-bottom-transition":"dialog-transition"}},dense:{type:Boolean,default:!1},prependIcon:{type:String,default:""},titleColor:{type:String,default:"primary"},prependIconColor:{type:String,default:""},toolbarActions:{type:Array,validator:function(t){if(0==t.length)return!0;var e=t.map((function(t){return"icon"in t&&"action"in t}));return e.every((function(t){return t}))},default:function(){var t=this,e=function(){t.dialog=!1};return this.fullscreen?[{icon:"mdi-close",action:e}]:[]}},persistent:{type:Boolean,default:!1},maxWidth:{type:String,default:"600px"}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{close:function(){this.dialog=!1},open:function(){this.dialog=!0}}},s=a,c=i("2877"),l=i("6544"),u=i.n(l),d=i("169a"),f=Object(c["a"])(s,n,r,!1,null,"4e32a62c",null);e["a"]=f.exports;u()(f,{VDialog:d["a"]})},"99cd":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-context-menu",{ref:"menu",attrs:{title:"VUWER-MENU",accept:t.accept,items:t.items},on:{change:t.onChange}},[t._t("default")],2)},r=[],o=(i("a9e3"),i("90a6")),a=i("9b06"),s={computed:{frameSource:{get:function(){return this.$store.state.current.frame.source},set:function(t){this.$store.commit("current/frame/setSource",t)}},frameIdx:{get:function(){return this.$store.state.current.frame.idx},set:function(t){this.$store.commit("current/frame/setIdx",Math.round(Number(t)))}},frameTime:{get:function(){return this.$store.state.current.frame.time},set:function(t){this.$store.commit("current/frame/setTime",Number(t))}}}},c=i("27a3"),l={name:"m-w-context-menu",mixins:[s,c["a"]],components:{MContextMenu:a["a"]},data:function(){return{accept:"",clicked:null}},computed:{fps:function(){return this.$store.state.current.video.fps},$minPxPerSec:{get:function(){return this.$store.state.setting.minPxPerSec},set:function(t){var e=Object(o["a"])(t),i=null;"number"==e?i=t:"string"==e&&(i=Number(t)),i&&this.$store.commit("setting/setMinPxPerSec",i)}},items:function(){var t=this,e=this.$vuewer.dropbox.hasToken(),i=e?"$vuetify.contexts.saveDropbox":"$vuetify.contexts.save";return[{text:"$vuetify.contexts.playPause",kbd:"TAB",icon:"mdi-play-pause",click:this.playPause},{text:"$vuetify.contexts.skip",show:!1,icon:"mdi-skip-next",items:[{text:"$vuetify.contexts.skipBackward",icon:"mdi-skip-previous",kbd:"J",click:this.skipBackward},{text:"$vuetify.contexts.skipForward",icon:"mdi-skip-next",kbd:"K",click:this.skipForward}]},{text:"$vuetify.contexts.zoom",show:!1,icon:"mdi-magnify-plus",items:[{text:"$vuetify.contexts.zoom_in",icon:"mdi-magnify-plus",kbd:"CTRL + +",click:this.incPxPerSec},{text:"$vuetify.contexts.zoom_out",icon:"mdi-magnify-minus",kbd:"CTRL + -",click:this.decPxPerSec}]},{text:"$vuetify.contexts.denoising.audio",icon:"mdi-headphones-settings",show:!1,items:[{text:"AFFTDN FILTER",icon:"",click:function(){setTimeout((function(){var e={type:"afftdn"};t.$emit("click-noise-reduction",e)}),10)}},{text:"NON-LOCAL MEANS FILTER",icon:"",click:function(){setTimeout((function(){var e={type:"anlmdn"};t.$emit("click-noise-reduction",e)}),10)}},{text:"BANDPASS FILTER",icon:"",click:function(){setTimeout((function(){var e={type:"bandpass",low:300,heigh:100};t.$emit("click-noise-reduction",e)}),10)}}]},{text:"$vuetify.contexts.setting",icon:"mdi-cog",click:function(){setTimeout((function(){t.$emit("click-setting")}),10)}},{text:i,icon:"mdi-content-save",kbd:"CTRL + S",click:function(){setTimeout((function(){t.$emit("click-save")}),10)}},{text:"$vuetify.contexts.loadDropbox",icon:"mdi-dropbox",kbd:"CTRL + R",click:function(){setTimeout((function(){t.$emit("click-load-dropbox")}),10)}},{text:"$vuetify.uploads.name",show:!1,icon:"mdi-upload",items:[{text:"$vuetify.uploads.dict",icon:"",click:function(){setTimeout((function(){t.$emit("click-complate")}),10)}},{text:"$vuetify.uploads.textgrid.textgrid",icon:"",click:function(){t.accept=".TextGrid,.textgrid,.Textgrid",t.clicked="TEXTGRID/TEXTGRID",t.$nextTick((function(){return t.$refs.menu.open()}))}},{text:"$vuetify.uploads.textgrid.json.v2",icon:"",click:function(){t.accept="application/json",t.clicked="TEXTGRID/JSON",t.$nextTick((function(){return t.$refs.menu.open()}))}},{text:"$vuetify.uploads.textgrid.json.v1",icon:"",click:function(){t.accept="application/json",t.clicked="TEXTGRID/JSON/VER1",t.$nextTick((function(){return t.$refs.menu.open()}))}},{text:"$vuetify.uploads.textgrid.json.v1left",icon:"",click:function(){t.accept="application/json",t.clicked="TEXTGRID/JSON/VER1/LEFT",t.$nextTick((function(){return t.$refs.menu.open()}))}},{text:"$vuetify.uploads.textgrid.json.v1left",icon:"",click:function(){t.accept="application/json",t.clicked="TEXTGRID/JSON/VER1/RIGHT",t.$nextTick((function(){return t.$refs.menu.open()}))}}]},{text:"$vuetify.downloads.name",show:!1,icon:"mdi-download",items:[{text:"$vuetify.downloads.xlsx",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","XLSX")}),10)}},{text:"$vuetify.downloads.textgrid.xlsx",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","TEXTGRID/XLSX")}),10)}},{text:"$vuetify.downloads.frame.xlsx",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","FRAME/XLSX")}),10)}},{text:"$vuetify.downloads.json",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","JSON")}),10)}},{text:"$vuetify.downloads.textgrid.json",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","TEXTGRID/JSON")}),10)}},{text:"$vuetify.downloads.frame.json",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","FRAME/JSON")}),10)}},{text:"$vuetify.downloads.png",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","PNG")}),10)}},{text:"$vuetify.downloads.mp4",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","MP4")}),10)}},{text:"$vuetify.downloads.textgrid.textgrid",icon:"",click:function(){setTimeout((function(){t.$emit("click-download","TEXTGRID/TEXTGRID")}),10)}}]},{text:"$vuetify.contexts.windows.name",show:!1,icon:"mdi-dock-window",items:[{text:"$vuetify.contexts.windows.framediff",icon:"",click:function(){setTimeout((function(){t.$emit("click-window","FRAMEDIFF")}),10)}}]},{subheader:"$vuetify.textgrid.name"},{text:"$vuetify.contexts.tier.add",icon:"mdi-plus",kbd:"CTRL + SHIFT + C",click:function(){setTimeout((function(){t.$emit("click-tier-add")}),10)}},{text:"$vuetify.contexts.tier.edit",icon:"mdi-pencil",click:function(){setTimeout((function(){t.$emit("click-tier-edit")}),10)}},{text:"$vuetify.contexts.tier.delete",icon:"mdi-delete",kbd:"CTRL + SHIFT + DELETE",click:function(){setTimeout((function(){t.$emit("click-tier-delete")}),10)}},{text:"$vuetify.contexts.record.name",show:!1,icon:"mdi-pencil-box",items:[{text:"$vuetify.contexts.record.play",icon:"",kbd:"TAB",click:function(){setTimeout((function(){t.$emit("click-record","play")}),10)}},{text:"$vuetify.contexts.record.copy",icon:"",kbd:"CTRL + C",click:function(){setTimeout((function(){t.$emit("click-record","copy")}),10)}},{text:"$vuetify.contexts.record.paste",icon:"",kbd:"CTRL + V",click:function(){setTimeout((function(){t.$emit("click-record","paste")}),10)}},{text:"$vuetify.contexts.record.prev",kbd:"CTRL + J",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","prev")}),10)}},{text:"$vuetify.contexts.record.next",icon:"",kbd:"CTRL + K",click:function(){setTimeout((function(){t.$emit("click-record","next")}),10)}},{text:"$vuetify.contexts.record.toEnd",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","to-end")}),10)}},{text:"$vuetify.contexts.record.toStart",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","to-start")}),10)}},{text:"$vuetify.contexts.record.shrink",kbd:"CTRL + SHIFT + J",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","shrink")}),10)}},{text:"$vuetify.contexts.record.extend",kbd:"CTRL + SHIFT + K",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","extend")}),10)}},{text:"$vuetify.contexts.record.splitByFrames",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","split-by-frames")}),10)}},{text:"$vuetify.contexts.record.splitByChars",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","split-by-chars")}),10)}},{text:"$vuetify.contexts.record.splitBySlash",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","split-by-slash")}),10)}},{text:"$vuetify.contexts.record.owakati",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","owakati")}),10)}},{text:"$vuetify.contexts.record.oyomi",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","oyomi")}),10)}},{text:"$vuetify.contexts.record.opronunciation",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","opronunciation")}),10)}},{text:"$vuetify.contexts.record.obasic",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","obasic")}),10)}},{text:"$vuetify.contexts.record.opos",icon:"",click:function(){setTimeout((function(){t.$emit("click-record","opos")}),10)}}]},{text:"$vuetify.contexts.tier.interval.name",show:!1,icon:"mdi-pencil-box-multiple",items:[{text:"$vuetify.contexts.tier.interval.time2frame",icon:"",click:function(){setTimeout((function(){t.$emit("click-interval","time2frame")}),10)}},{text:"$vuetify.contexts.record.splitByFrames",icon:"",click:function(){setTimeout((function(){t.$emit("click-interval","split-by-frames")}),10)}},{text:"$vuetify.contexts.record.splitByChars",icon:"",click:function(){setTimeout((function(){t.$emit("click-interval","split-by-chars")}),10)}},{text:"$vuetify.contexts.record.splitBySlash",icon:"",click:function(){setTimeout((function(){t.$emit("click-interval","split-by-slash")}),10)}},{text:"$vuetify.contexts.tier.interval.owakati",icon:"",click:function(){setTimeout((function(){t.$emit("click-interval","owakati")}),10)}},{text:"$vuetify.contexts.tier.interval.oyomi",icon:"",click:function(){setTimeout((function(){t.$emit("click-interval","oyomi")}),10)}},{text:"$vuetify.contexts.tier.interval.opronunciation",icon:"",click:function(){setTimeout((function(){t.$emit("click-interval","opronunciation")}),10)}}]},{subheader:"$vuetify.contexts.frame.name",divider:!0},{text:"$vuetify.contexts.frame.edit",icon:"mdi-selection-drag",kbd:"CTRL + SHIFT + i",click:function(){setTimeout((function(){t.$emit("click-image-edit")}),10)},divider:!0},{text:"$vuetify.contexts.frame.deletePoints",icon:"mdi-close-circle",click:function(){setTimeout((function(){t.$store.dispatch("current/deletePoints")}),10)},divider:!0},{text:"$vuetify.contexts.frame.deleteRects",icon:"mdi-close-box",click:function(){setTimeout((function(){t.$store.dispatch("current/deleteRects")}),10)},divider:!0}]}},methods:{onChange:function(t){var e={click:this.clicked,files:t};this.$emit("click-upload",e)},incPxPerSec:function(){this.$minPxPerSec<700&&(this.$minPxPerSec=this.$minPxPerSec+50)},decPxPerSec:function(){this.$minPxPerSec>100&&(this.$minPxPerSec=this.$minPxPerSec-50)}}},u=l,d=i("2877"),f=Object(d["a"])(u,n,r,!1,null,"240a1083",null);e["a"]=f.exports},"9b06":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{attrs:{absolute:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("v-card",t._b({on:{contextmenu:function(t){return t.preventDefault(),n.click(t)},keydown:n.keydown}},"v-card",r,!1),[t._t("default")],2)]}}],null,!0),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._t("toolbar",[t.title?i("v-toolbar",{attrs:{dense:"",color:t.color,dark:""}},[i("v-toolbar-title",[t._v(t._s(t.$vuetify.lang.t(t.title)))])],1):t._e()]),t._t("menu",[i("v-card",{staticClass:"mx-auto overflow-y-auto",attrs:{tile:"",flat:"","min-width":t.minWidth,"max-height":"600"}},[i("input",{ref:"input",staticStyle:{display:"none"},attrs:{accept:t.accept,type:"file"},on:{change:t.onChange}}),t._t("menu-contents",[i("v-list",{staticClass:"overflow-y-auto",attrs:{dense:"",subheader:"","max-height":t.maxHeight}},t._l(t.items,(function(e,n){return i("div",{key:n},[e.subheader?i("v-subheader",{staticClass:"grey--text text--darken-3"},[t._v(" "+t._s(t.$vuetify.lang.t(e.subheader))+" ")]):i("v-divider"),e.items?i("v-list-group",{attrs:{"prepend-icon":e.icon},on:{click:function(t){t.stopPropagation(),t.preventDefault()}},scopedSlots:t._u([{key:"activator",fn:function(){return[i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t(e.text))+" ")])],1)]},proxy:!0}],null,!0),model:{value:e.show,callback:function(i){t.$set(e,"show",i)},expression:"item.show"}},t._l(e.items,(function(e,n){return i("v-list-item",{key:n,on:{click:e.click}},[i("v-list-item-icon",[i("v-icon")],1),i("v-list-item-content",[i("v-list-item-title",[e.icon?i("v-icon",[t._v(" "+t._s(e.icon)+" ")]):t._e(),t._v(" "+t._s(t.$vuetify.lang.t(e.text))+" ")],1)],1),e.kbd?i("v-list-item-action",[i("v-spacer"),i("v-list-item-action-text",{domProps:{textContent:t._s(e.kbd)}})],1):t._e()],1)})),1):e.text?i("v-list-item",{on:{click:e.click}},[i("v-list-item-icon",[i("v-icon",[t._v(" "+t._s(e.icon)+" ")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v(" "+t._s(t.$vuetify.lang.t(e.text))+" ")])],1),e.kbd?i("v-list-item-action",[i("v-list-item-action-text",{domProps:{textContent:t._s(e.kbd)}})],1):t._e()],1):t._e()],1)})),0)])],2)])],2)},r=[],o={name:"MContextMenu",props:{title:{type:String,default:""},color:{type:String,default:"primary"},items:{type:Array,default:function(){return[]}},accept:{type:String,default:""},maxHeight:{type:String,default:"450"},minWidth:{type:String,default:"400"}},data:function(){return{menu:!1}},methods:{open:function(){this.$refs.input.click()},onChange:function(){var t=this.$refs.input.files;this.$emit("change",t)}}},a=o,s=i("2877"),c=i("6544"),l=i.n(c),u=i("b0af"),d=i("ce7e"),f=i("132d"),m=i("8860"),h=i("56b0"),v=i("da13"),p=i("1800"),g=i("5d23"),x=i("34c3"),y=i("e449"),b=i("2fa4"),w=i("e0c7"),$=i("71d9"),k=i("2a7f"),_=Object(s["a"])(a,n,r,!1,null,"767c4c04",null);e["a"]=_.exports;l()(_,{VCard:u["a"],VDivider:d["a"],VIcon:f["a"],VList:m["a"],VListGroup:h["a"],VListItem:v["a"],VListItemAction:p["a"],VListItemActionText:g["a"],VListItemContent:g["b"],VListItemIcon:x["a"],VListItemTitle:g["d"],VMenu:y["a"],VSpacer:b["a"],VSubheader:w["a"],VToolbar:$["a"],VToolbarTitle:k["a"]})},"9c92":function(t,e,i){"use strict";var n=i("fc99"),r=i.n(n);r.a},"9de5":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:t.width},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("m-loading-card",{attrs:{color:t.color,"progress-color":t.progressColor}},[t._t("default")],2)],1)},r=[],o=(i("a9e3"),i("84c5")),a={name:"MLoadingDialog",components:{MLoadingCard:o["a"]},props:{value:{type:Boolean,default:!1},color:{type:String,default:"primary"},progressColor:{type:String,default:"white"},width:{type:Number,default:300}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{close:function(){this.dialog=!1},open:function(){this.dialog=!0}}},s=a,c=i("2877"),l=i("6544"),u=i.n(l),d=i("169a"),f=Object(c["a"])(s,n,r,!1,null,"4a4aa042",null);e["a"]=f.exports;u()(f,{VDialog:d["a"]})},"9e4d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-expand-transition",[i("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.isCloseing,expression:"!isCloseing"}],ref:"window",style:t.style,attrs:{tile:!!t.isMaximize||t.tile,elevation:t.isDraging?10:1,"max-width":t.maxWidth,"min-height":""+(t.isMaximize?t.maximizedHeight:"0px"),"min-width":""+(t.isMaximize?t.maximizedWidth:"0px")}},[i("v-system-bar",{attrs:{color:t.color+" darken-"+(t.isDraging?"4":"2"),dark:""},on:{mousedown:t.onMouseDown}},[i("v-spacer"),t.isMaximize?i("div",[i("v-icon",{on:{click:function(e){return e.preventDefault(),t.maximize(e)}}},[t._v(" mdi-window-minimize ")]),i("v-icon",{on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v("mdi-close")])],1):i("div",[i("v-icon",{on:{click:function(e){return e.preventDefault(),t.close(e)}}},[t._v(" mdi-window-minimize ")]),i("v-icon",{on:{click:function(e){return e.preventDefault(),t.maximize(e)}}},[t._v(" mdi-window-maximize ")])],1)],1),i("v-toolbar",{attrs:{dense:"",color:t.color,dark:""}},[t._t("toolbar",[t.title?i("v-toolbar-title",[t._v(" "+t._s(t.$vuetify.lang.t(t.title))+" ")]):t._e(),i("v-spacer"),t._t("toolbar-actions")])],2),i("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[t._t("default")],2)],1)],1)},r=[],o=(i("a9e3"),{name:"m-window-card",props:{title:{type:String,default:""},color:{type:String,default:"primary"},icon:{type:String,default:""},x:{type:Number,default:0},y:{type:Number,default:0},maxWidth:{type:String,default:"100%"},maximizedWidth:{type:String,default:"100%"},maximizedHeight:{type:String,default:"100%"},tile:{type:Boolean,default:!1},right:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},hide:{type:Boolean,default:!1}},data:function(){return{zIndex:1,id:null,isDraged:!1,isDraging:!1,isCloseing:!0,isMaximize:!1,position:{x:0,y:0},firstPosition:{x:0,y:0},offset:{x:null,y:null,width:null,height:null,top:null,left:null}}},computed:{style:function(){var t={position:"absolute"};return this.right?t.right="".concat(this.position.x,"px"):t.left="".concat(this.position.x,"px"),this.bottom?t.bottom="".concat(this.position.y,"px"):t.top="".concat(this.position.y,"px"),t["z-index"]=this.zIndex,t}},methods:{setZIndex:function(t){this.zIndex=t},close:function(){this.isMaximize=!1,this.isCloseing=!0,this.$store.commit("wcards/closing",this)},open:function(){this.position.x=this.firstPosition.x,this.position.y=this.firstPosition.y,this.isMaximize=!1,this.isCloseing=!1,this.$store.commit("wcards/open",this)},maximize:function(){this.isMaximize?this.isMaximize=!1:(this.position.x=0,this.position.y=0,this.isMaximize=!0)},setOffset:function(t){var e=this.$refs.window.$el.getBoundingClientRect();null==this.offset.x&&(this.offset.x=e.x-t.clientX),null==this.offset.y&&(this.offset.y=e.y-t.clientY),null==this.offset.top&&(this.offset.top=e.y),null==this.offset.left&&(this.offset.left=e.x),null==this.offset.width&&(this.offset.width=e.width),null==this.offset.height&&(this.offset.height=e.height)},setPosition:function(t){if(0==this.isMaximize){var e=t.pageX+this.offset.x-this.offset.left+this.firstPosition.x,i=t.pageY+this.offset.y-this.offset.top+this.firstPosition.y;this.position.x=this.right?-e:e,this.position.y=this.bottom?-i:i}},onMouseDown:function(t){t.preventDefault(),this.setOffset(t),document.body.addEventListener("mousemove",this.onMouseMove,!1),document.body.addEventListener("mouseleave",this.onMouseUp,!1),document.body.addEventListener("mouseup",this.onMouseUp,!1),this.isDraging=!0,this.isDraged=!1},onMouseUp:function(t){t.preventDefault(),document.body.removeEventListener("mousemove",this.onMouseMove,!1),document.body.removeEventListener("mouseleave",this.onMouseUp,!1),document.body.removeEventListener("mouseup",this.onMouseUp,!1),this.isDraging=!1,this.isDraged=!0,this.$store.dispatch("wcards/setZIndex",{id:this.id,zIndex:3})},onMouseMove:function(t){1==this.isDraging&&(t.preventDefault(),this.setPosition(t))}},watch:{hide:function(t,e){t!=e&&(t?this.close():this.open())}},mounted:function(){this.position.x=this.x,this.position.y=this.y,this.firstPosition.x=this.position.x,this.firstPosition.y=this.position.y,this.id=this.$store.state.wcards.cards.length,this.$store.commit("wcards/setCard",this),this.hide?this.close():this.open()}}),a=o,s=i("2877"),c=i("6544"),l=i.n(c),u=i("b0af"),d=i("a523"),f=i("0789"),m=i("132d"),h=i("2fa4"),v=i("afd9"),p=i("71d9"),g=i("2a7f"),x=Object(s["a"])(a,n,r,!1,null,"159f6410",null);e["a"]=x.exports;l()(x,{VCard:u["a"],VContainer:d["a"],VExpandTransition:f["a"],VIcon:m["a"],VSpacer:h["a"],VSystemBar:v["a"],VToolbar:p["a"],VToolbarTitle:g["a"]})},a009:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{fullscreen:t.$store.state.current.layout.mini,title:t.$vuetify.lang.t(t.title)},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{attrs:{flat:"",tile:""}},[i("v-card-text",[t.dialog?i("m-tier-form",{ref:"form",attrs:{tiers:t.tiers,current:t.current},on:{validated:t.onValidated}}):t._e()],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validate}},[t._v("ok")])],1)],1)],1)},r=[],o=(i("b0c0"),i("9621")),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{rules:t.nameRule,label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.name")},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),i("v-autocomplete",{attrs:{items:t.typeChoice,filter:t.autocomplete,"item-text":"name","item-value":"val",label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.type")},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),i("v-checkbox",{attrs:{label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.showRef")},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}}),t.checkbox?i("v-autocomplete",{attrs:{rules:t.refRule,items:t.tiers,label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.ref")},model:{value:t.refName,callback:function(e){t.refName=e},expression:"refName"}}):t._e(),t.checkbox?i("v-checkbox",{attrs:{label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.withText")},model:{value:t.withText,callback:function(e){t.withText=e},expression:"withText"}}):t._e(),t.checkbox?i("v-checkbox",{attrs:{label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.asParent")},model:{value:t.asParent,callback:function(e){t.asParent=e},expression:"asParent"}}):t._e()],1)},s=[],c=(i("c975"),i("2ca0"),{name:"WTierFrom",data:function(){return{checkbox:!1,valid:!1,name:"",type:"",refName:"",withText:!1,asParent:!1}},props:{tiers:{type:Array},current:{type:String}},watch:{current:function(t,e){if(t!==e&&t){this.refName=t;var i=this.$store.state.current.textgrid[this.current];this.name="".concat(this.current,"-copy"),this.type=i.type,this.checkbox=!0,this.refName=this.current}}},computed:{typeChoice:function(){var t=this.$vuetify.lang.current;return[{name:this.$vuetify.lang.t("$vuetify.textgrid.tier.interval"),rubi:"ja"==t?"kyoukaitenkisou":"interval tier",val:"interval"},{name:this.$vuetify.lang.t("$vuetify.textgrid.tier.point"),rubi:"ja"==t?"eventtenkisou":"point tier",val:"point"}]},nameRule:function(){var t=this,e=[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")},function(e){return t.checkName(e)}];return e},refRule:function(){var t=this,e=[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")},function(e){return t.checkNameNotExist(e)}];return e},required:function(){var t=this;return this.$vuetify?[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")}]:[]}},methods:{autocomplete:function(t,e){var i=t.rubi.toLowerCase(),n=t.val.toLowerCase(),r=e.toLowerCase();return i.startsWith(r)||n.startsWith(r)},checkName:function(t){return t?!(this.tiers.indexOf(t)>-1)||this.$vuetify.lang.t("$vuetify.validations.alreadyExists"):this.$vuetify.lang.t("$vuetify.validations.required")},checkNameNotExist:function(t){return t?-1!=this.tiers.indexOf(t)||this.$vuetify.lang.t("$vuetify.validations.notExist"):this.$vuetify.lang.t("$vuetify.validations.required")},validate:function(){if(this.$refs.form.validate(),this.valid){var t={name:this.name,type:this.type};this.checkbox&&(t.ref=this.refName||null,t.withText=this.withText,t.parent=this.asParent?this.refName:null),this.$emit("validated",t)}},reset:function(){this.resetValidation()},resetValidation:function(){this.$refs.form.resetValidation()}},mounted:function(){if(this.current){var t=this.$store.state.current.textgrid[this.current];this.name="".concat(this.current,"-copy"),this.type=t.type,this.checkbox=!0,this.refName=this.current}}}),l=c,u=i("2877"),d=i("6544"),f=i.n(d),m=i("c6a6"),h=i("ac7c"),v=i("4bd4"),p=i("8654"),g=Object(u["a"])(l,a,s,!1,null,"789a00ac",null),x=g.exports;f()(g,{VAutocomplete:m["a"],VCheckbox:h["a"],VForm:v["a"],VTextField:p["a"]});var y=i("27a3"),b={name:"m-tier-dialog",components:{MCardDialog:o["a"],MTierForm:x},mixins:[y["a"]],data:function(){return{title:"$vuetify.forms.tier.title"}},props:{value:{type:Boolean},current:{type:String},tiers:{type:Array}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},watch:{dialog:function(t){0==t&&this.$refs.form.reset()}},methods:{close:function(){this.dialog=!1},validate:function(){this.$refs.form.validate()},onValidated:function(t){t.ref?this.copyTier(t.ref,t.name,t.type,t.parent,t.withText):this.addTier(t.name,t.type,t.parent),this.close()}}},w=b,$=i("8336"),k=i("b0af"),_=i("99d9"),S=i("2fa4"),C=Object(u["a"])(w,n,r,!1,null,"930259e0",null);e["a"]=C.exports;f()(C,{VBtn:$["a"],VCard:k["a"],VCardActions:_["a"],VCardText:_["b"],VSpacer:S["a"]})},b606:function(t,e,i){"use strict";var n=i("1685"),r=i.n(n);r.a},b874:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-frame-editor-context-menu",{on:{click:t.onMenuClick}},[i("m-frame-editor-layout",{ref:"layout",scopedSlots:t._u([{key:"toolbar",fn:function(){return[i("m-key-context",{ref:"context",on:{keyup:t.onKeyup}},[i("m-frame-editor-actions",{ref:"actions",on:{skip:t.onSkip,zoom:t.onZoom,download:t.onDownload}})],1)]},proxy:!0},{key:"table",fn:function(){return[i("m-frame-editor-tab",{attrs:{isLoading:t.syncing},on:{"update-point":function(e){return t.$store.dispatch("current/frame/updatePoint",e)},"update-rect":function(e){return t.$store.dispatch("current/frame/updateRect",e)}}})]},proxy:!0}])},[i("m-key-context",{ref:"context",on:{keyup:t.onKeyup}},[t.syncing?t._e():i("v-stage",{ref:"stage",attrs:{config:{width:t.cw,height:t.ch}},on:{mousemove:t.onStageMouseMove,mousedown:t.onStageMouseDown,mouseup:t.onStageMouseUp}},[i("v-layer",{ref:"layer"},[i("v-image",{ref:"background",attrs:{config:t.background},on:{dblclick:t.onDblClick}})],1),t._l(t.polygons,(function(e){return i("v-layer",{key:e.id,ref:"layer",refInFor:!0},[t._l(e.lines,(function(n){return i("v-line",{key:e.id+"-"+n.id,attrs:{config:{id:"polygon-"+e.id+"-"+n.id,polygon_id:e.id,line_id:n.id,points:n.points,stroke:e.color||t.polygon.conf.color,strokeWidth:"pen"==t.mode?3:e.size||t.polygon.conf.size,lineCap:"round",lineJoin:"round"}},on:{dblclick:t.onPolygonLineDblClick}})})),t._l(e.points,(function(n){return i("v-circle",{key:"polygon-"+e.id+"-point-"+n.id,attrs:{config:{id:"polygon-"+e.id+"-point-"+n.id,polygon_id:e.id,point_id:n.id,x:n.x,y:n.y,stroke:"white",strokeWidth:"pen"==t.mode?0:1,radius:"pen"==t.mode?0:n.size||t.polygon.conf.size,fill:e.color||t.polygon.conf.color}},on:{click:t.onPolygonPointClick,mouseenter:t.onPolygonPointMouseEnter,mouseleave:t.onPolygonPointMouseLeave}})}))],2)})),i("v-layer",{ref:"layer"},[t._l(t.ruler.points,(function(e){return i("v-circle",{key:e.id,attrs:{config:{id:e.id,x:e.x,y:e.y,stroke:"white",strokeWidth:1,radius:t.ruler.conf.size,fill:t.ruler.conf.color}}})})),t._l(t.ruler.lines,(function(e){return i("v-line",{key:e.id,attrs:{config:{id:e.id,points:e.points,stroke:t.ruler.active==e.id?t.ruler.conf.activeColor:t.ruler.conf.color,strokeWidth:t.ruler.active==e.id?t.ruler.conf.activeSize:t.ruler.conf.size,lineCap:"round",lineJoin:"round",dash:[5,10]}},on:{mouseenter:t.onRulerMouseEnter,mouseleave:t.onRulerMouseLeave,dblclick:t.onRulerDblClick}})})),t._l(t.polygon.lines,(function(e){return i("v-line",{key:"polygon-"+e.id,attrs:{config:{id:"polygon-"+e.id,points:e.points,stroke:!0===t.polygon.active?t.polygon.conf.activeColor:t.polygon.conf.color,strokeWidth:"pen"==t.mode?2:t.polygon.conf.size,lineCap:"round",lineJoin:"round"}}})})),t._l(t.cpStartPoints,(function(e){return i("v-circle",{key:e.id,attrs:{config:{id:"polygon-"+e.id,x:e.x,y:e.y,stroke:"white",strokeWidth:1,radius:"pen"==t.mode?0:t.polygon.conf.size,fill:!0===t.polygon.active?t.polygon.conf.activeColor:t.polygon.conf.color}},on:{mouseenter:t.onPolygonMouseEnter,mouseleave:t.onPolygonMouseLeave,click:t.onClickPolygonsPoint}})})),t._l(t.cpPoints,(function(e){return i("v-circle",{key:e.id,attrs:{config:{id:"polygon-"+e.id,x:e.x,y:e.y,stroke:"white",strokeWidth:1,radius:"pen"==t.mode?0:t.polygon.conf.size,fill:!0===t.polygon.active?t.polygon.conf.activeColor:t.polygon.conf.color}}})})),t._l(t.rects,(function(e){return i("v-rect",{key:e.name,attrs:{config:{name:e.name,id:e.id,x:e.x,y:e.y,width:e.width,height:e.height,rotation:e.rotation||1,scaleX:e.scaleX||1,scaleY:e.scaleY||1,strokeWidth:e.size||1,draggable:"rect"==t.mode,stroke:t.colorFilter("rect",e),opacity:t.opacityFilter("rect")}},on:{click:t.onRectClick,dragend:t.onRectDragEnd,transformend:t.onTransformEnd}})})),t._l(t.points,(function(e,n){return i("v-circle",{key:n,attrs:{config:{id:e.id,x:e.x,y:e.y,stroke:"white",strokeWidth:1,radius:e.size,draggable:"circ"==t.mode,fill:t.colorFilter("circ",e),opacity:t.opacityFilter("circ")}},on:{click:t.onPointClick,mouseenter:t.onPointMouseEnter,mouseleave:t.onPointMouseLeave,dragstart:t.onPointDragStart,dragend:t.onPointDragEnd}})})),"rect"==t.mode?i("v-transformer",{ref:"transformer"}):t._e()],2),t.cursor.show?i("m-frame-editor-cursor",{on:{dblclick:t.onDblClick},model:{value:t.cursor,callback:function(e){t.cursor=e},expression:"cursor"}}):t._e()],2),t.syncing?i("m-loading",{attrs:{text:"$vuetify.loading"}}):t._e()],1)],1)],1)},r=[],o=(i("99af"),i("4de4"),i("7db0"),i("c740"),i("0481"),i("d81d"),i("fb6a"),i("a434"),i("4069"),i("b0c0"),i("ac1f"),i("1276"),i("0402")),a=i("0bd7"),s=(i("96cf"),i("7580")),c=i("b192"),l=i("e1bd"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isLoading?t._e():i("v-card",{attrs:{flat:"",tile:""}},[i("v-tabs",{attrs:{"fixed-tabs":"","background-color":"primary",dark:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab",[t._v(" Points ")]),i("v-tab",[t._v(" Rects ")]),i("v-tab",[t._v(" Setting ")])],1),i("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tab-item",[i("m-point-table")],1),i("v-tab-item",[i("m-rect-table")],1),i("v-tab-item",[i("v-card",[i("v-card-text",[i("m-frame-edit-conf-form")],1)],1)],1)],1)],1)},d=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{headers:t.headers,items:t.points},scopedSlots:t._u([{key:"item.label",fn:function(e){return[i("v-edit-dialog",{attrs:{"return-value":e.item.label},on:{"update:returnValue":function(i){return t.$set(e.item,"label",i)},"update:return-value":function(i){return t.$set(e.item,"label",i)},close:function(i){return t.close(e.item)}},scopedSlots:t._u([{key:"input",fn:function(){return[i("v-text-field",{attrs:{rules:[t.max25chars],label:"Edit","single-line":"",counter:""},model:{value:e.item.label,callback:function(i){t.$set(e.item,"label",i)},expression:"props.item.label"}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(e.item.label)+" ")])]}},t.showFrame?{key:"item.time",fn:function(e){return[t._v(" "+t._s(t.$vuewer.math.round(e.item.frame.time,3))+" ")]}}:null,{key:"item.x",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.x))+" ")]}},{key:"item.y",fn:function(e){return[t._v(" "+t._s(Math.round(e.item.y))+" ")]}},{key:"item.color",fn:function(e){return[i("m-color-menu",{attrs:{icon:""},on:{input:function(i){return t.close(e.item)}},model:{value:e.item.color,callback:function(i){t.$set(e.item,"color",i)},expression:"props.item.color"}})]}},{key:"item.actions",fn:function(e){var n=e.item;return[i("v-btn",{attrs:{icon:"",dark:"","x-small":"",color:"error"},on:{click:function(e){return t.$store.dispatch("current/frame/deletePoint",n.id)}}},[i("v-icon",[t._v("mdi-delete")])],1)]}}],null,!0)})},m=[],h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-menu",{attrs:{bottom:"",left:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[i("div",[0==t.icon?i("v-btn",t._g(t._b({attrs:{text:t.text,tile:t.tile,color:t.picker,dark:""}},"v-btn",r,!1),n),[t._v(" color "),i("v-icon",[t._v("mdi-palette")])],1):i("v-btn",t._g(t._b({attrs:{dark:"",icon:"",tile:t.tile,color:t.picker}},"v-btn",r,!1),n),[i("v-icon",[t._v("mdi-palette")])],1)],1)]}}])},[i("v-color-picker",{attrs:{flat:"","show-swatches":""},model:{value:t.picker,callback:function(e){t.picker=e},expression:"picker"}})],1)},v=[],p={name:"m-color-menu",props:{value:{type:String},text:{type:Boolean,default:!1},tile:{type:Boolean,default:!1},icon:{type:Boolean,default:!1}},computed:{picker:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},g=p,x=i("2877"),y=i("6544"),b=i.n(y),w=i("8336"),$=i("03a4"),k=i("132d"),_=i("e449"),S=Object(x["a"])(g,h,v,!1,null,"43c44336",null),C=S.exports;b()(S,{VBtn:w["a"],VColorPicker:$["a"],VIcon:k["a"],VMenu:_["a"]});var T={name:"m-point-table",components:{MColorMenu:C},props:{showFrame:{type:Boolean,default:!1}},computed:{headers:function(){var t=[{text:this.$vuetify.lang.t("$vuetify.table.frame.label"),value:"label"}];return this.showFrame&&t.push({text:this.$vuetify.lang.t("$vuetify.table.frame.frame"),value:"frame.idx"}),t.push({text:this.$vuetify.lang.t("$vuetify.table.frame.x"),value:"x"}),t.push({text:this.$vuetify.lang.t("$vuetify.table.frame.y"),value:"y"}),t.push({text:this.$vuetify.lang.t("$vuetify.table.frame.color"),value:"color"}),t.push({text:this.$vuetify.lang.t("$vuetify.actions"),value:"actions",width:"150px",sortable:!1,align:"end"}),t},points:function(){return this.$store.state.current.frame.points}},data:function(){return{max25chars:function(t){return t.length<=25||"Input too long!"},pagination:{}}},methods:{close:function(t){this.$store.dispatch("current/frame/updatePoint",{id:t.id,label:t.label,color:t.color})}}},R=T,V=i("8fea"),P=i("7679"),I=i("8654"),O=Object(x["a"])(R,f,m,!1,null,"dd135270",null),j=O.exports;b()(O,{VBtn:w["a"],VDataTable:V["a"],VEditDialog:P["a"],VIcon:k["a"],VTextField:I["a"]});var E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{attrs:{"item-key":"id",headers:t.headers,items:t.rects},scopedSlots:t._u([{key:"item.label",fn:function(e){var n=e.item;return[i("v-edit-dialog",{attrs:{"return-value":n.label},on:{"update:returnValue":function(e){return t.$set(n,"label",e)},"update:return-value":function(e){return t.$set(n,"label",e)},close:function(e){return t.close(n)}},scopedSlots:t._u([{key:"input",fn:function(){return[i("v-text-field",{attrs:{rules:[t.max25chars],label:"Edit","single-line":"",counter:""},model:{value:n.label,callback:function(e){t.$set(n,"label",e)},expression:"item.label"}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(n.label)+" ")])]}},{key:"item.x",fn:function(e){var i=e.item;return[t._v(" "+t._s(Math.round(i.x))+" ")]}},{key:"item.y",fn:function(e){var i=e.item;return[t._v(" "+t._s(Math.round(i.y))+" ")]}},{key:"item.width",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.scaleX?Math.round(n.scaleX*n.width):Math.round(n.width))+" ")])]}},{key:"item.height",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.scaleY?Math.round(n.scaleY*n.height):Math.round(n.height))+" ")])]}},{key:"item.rotation",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.rotation||0)+" ")])]}},{key:"item.scaleX",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.scaleX)+" ")])]}},{key:"item.scaleY",fn:function(e){var n=e.item;return[i("span",{staticClass:"d-inline-block text-truncate",staticStyle:{"max-width":"30px"}},[t._v(" "+t._s(n.scaleY)+" ")])]}},{key:"item.color",fn:function(e){var n=e.item;return[i("m-color-menu",{attrs:{icon:""},on:{input:function(e){return t.close(n)}},model:{value:n.color,callback:function(e){t.$set(n,"color",e)},expression:"item.color"}})]}}])})},D=[],M={name:"m-rect-table",components:{MColorMenu:C},computed:{rects:function(){var t=this.$store.state.current.frame.rects;return t},headers:function(){return[{text:this.$vuetify.lang.t("$vuetify.table.frame.label"),value:"label"},{text:this.$vuetify.lang.t("$vuetify.table.frame.x"),value:"x"},{text:this.$vuetify.lang.t("$vuetify.table.frame.y"),value:"y"},{text:this.$vuetify.lang.t("$vuetify.table.frame.width"),value:"width"},{text:this.$vuetify.lang.t("$vuetify.table.frame.height"),value:"height"},{text:this.$vuetify.lang.t("$vuetify.table.frame.rotation"),value:"rotation"},{text:this.$vuetify.lang.t("$vuetify.table.frame.color"),value:"color"}]}},data:function(){return{max25chars:function(t){return t.length<=25||"Input too long!"},pagination:{}}},methods:{close:function(t){this.$emit("update-rect",t)}}},L=M,F=Object(x["a"])(L,E,D,!1,null,"118336ea",null),A=F.exports;b()(F,{VDataTable:V["a"],VEditDialog:P["a"],VTextField:I["a"]});var z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form"},[i("div",[i("label",[t._v("時系列転記連携")]),i("v-autocomplete",{attrs:{items:t.refTiers,label:"参照境界転記層"},model:{value:t.refTier,callback:function(e){t.refTier=e},expression:"refTier"}}),t.targetTiers.length?i("v-autocomplete",{attrs:{items:t.targetTiers,label:"対象イベント転記層"},model:{value:t.targetTier,callback:function(e){t.targetTier=e},expression:"targetTier"}}):t._e(),t.targetTier?i("v-text-field",{attrs:{label:"転記テキスト"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}):t._e()],1),i("div",{staticClass:"my-5"},[i("label",[t._v("点群記述設定")]),i("v-checkbox",{attrs:{"hide-details":"",label:t.$vuetify.lang.t("$vuetify.setting.form.video.syncPrevPoints.label")},model:{value:t.$syncPrevPoints,callback:function(e){t.$syncPrevPoints=e},expression:"$syncPrevPoints"}}),i("v-text-field",{attrs:{label:"点群ラベル","append-outer-icon":"mdi-plus"},on:{"click:append-outer":t.addPoint},scopedSlots:t._u([{key:"append",fn:function(){return[i("m-color-menu",{attrs:{icon:""},model:{value:t.point.color,callback:function(e){t.$set(t.point,"color",e)},expression:"point.color"}})]},proxy:!0}]),model:{value:t.point.label,callback:function(e){t.$set(t.point,"label",e)},expression:"point.label"}}),i("v-list",t._l(t.points,(function(e,n){return i("v-list-item",{key:e.label},[i("v-list-item-content",[i("v-list-item-title",[i("v-icon",{attrs:{color:e.color}},[t._v("mdi-palette")]),t._v(" "+t._s(e.label)+" ")],1)],1),i("v-list-item-action",{on:{click:function(e){return t.$store.commit("current/frameConf/upPoint",n)}}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-chevron-up")])],1)],1),i("v-list-item-action",{on:{click:function(e){return t.$store.commit("current/frameConf/downPoint",n)}}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-chevron-down")])],1)],1),i("v-list-item-action",{on:{click:function(e){return t.deletePoint(n)}}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",{attrs:{color:"error"}},[t._v("mdi-delete")])],1)],1)],1)})),1)],1),i("div",{staticClass:"my-5"},[i("label",[t._v("矩形記述設定")]),i("v-checkbox",{attrs:{"hide-details":"",label:t.$vuetify.lang.t("$vuetify.setting.form.video.syncPrevRects.label")},model:{value:t.$syncPrevRects,callback:function(e){t.$syncPrevRects=e},expression:"$syncPrevRects"}}),i("v-text-field",{attrs:{label:"矩形ラベル","append-outer-icon":"mdi-plus"},on:{"click:append-outer":t.addRect},scopedSlots:t._u([{key:"append",fn:function(){return[i("m-color-menu",{attrs:{icon:""},model:{value:t.rect.color,callback:function(e){t.$set(t.rect,"color",e)},expression:"rect.color"}})]},proxy:!0}]),model:{value:t.rect.label,callback:function(e){t.$set(t.rect,"label",e)},expression:"rect.label"}}),i("v-list",t._l(t.rects,(function(e,n){return i("v-list-item",{key:e.label},[i("v-list-item-content",[i("v-list-item-title",[i("v-icon",{attrs:{color:e.color}},[t._v("mdi-palette")]),t._v(" "+t._s(e.label)+" ")],1)],1),i("v-list-item-action",{on:{click:function(e){return t.$store.commit("current/frameConf/upRect",n)}}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-chevron-up")])],1)],1),i("v-list-item-action",{on:{click:function(e){return t.$store.commit("current/frameConf/downRect",n)}}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",[t._v("mdi-chevron-down")])],1)],1),i("v-list-item-action",{on:{click:function(e){return t.deleteRect(n)}}},[i("v-btn",{attrs:{icon:""}},[i("v-icon",{attrs:{color:"error"}},[t._v("mdi-delete")])],1)],1)],1)})),1)],1)])},N=[],B=(i("b64b"),"#F44336"),G={name:"m-frame-edit-conf-form",components:{MColorMenu:C},data:function(){return{point:{label:"",color:B},rect:{label:"",color:B}}},computed:{refTier:{get:function(){return this.$store.state.current.frameConf.refTier},set:function(t){this.$store.commit("current/frameConf/refTier",t)}},targetTier:{get:function(){return this.$store.state.current.frameConf.targetTier},set:function(t){this.$store.commit("current/frameConf/targetTier",t)}},text:{get:function(){return this.$store.state.current.frameConf.text},set:function(t){this.$store.commit("current/frameConf/text",t)}},points:function(){return this.$store.state.current.frameConf.points},rects:function(){return this.$store.state.current.frameConf.rects},textgrid:function(){return this.$store.state.current.textgrid},refTiers:function(){var t=this,e=[null],i=Object.keys(this.textgrid).filter((function(e){return"interval"==t.textgrid[e].type}));return e.concat(i)},targetTiers:function(){var t=this,e=[null],i=Object.keys(this.textgrid).filter((function(e){return"point"==t.textgrid[e].type}));return e.concat(i)},$syncPrevPoints:{get:function(){return this.$store.state.setting.syncPrevPoints},set:function(t){this.$store.commit("setting/syncPrevPoints",t)}},$syncPrevRects:{get:function(){return this.$store.state.setting.syncPrevRects},set:function(t){this.$store.commit("setting/syncPrevRects",t)}}},methods:{addPoint:function(){var t=this;if(-1==this.points.findIndex((function(e){return e.label==t.point.label}))&&this.point.label){var e=JSON.parse(JSON.stringify(this.point));this.$store.commit("current/frameConf/pushPoint",e),this.point.label="",this.point.color=B}},deletePoint:function(t){this.$store.commit("current/frameConf/deletePoint",t)},addRect:function(){var t=this;if(-1==this.rects.findIndex((function(e){return e.label==t.rect.label}))&&this.rect.label){var e=JSON.parse(JSON.stringify(this.rect));this.$store.commit("current/frameConf/pushRect",e),this.rect.label="",this.rect.color=B}},deleteRect:function(t){this.$store.commit("current/frameConf/deleteRect",t)}}},U=G,K=i("c6a6"),q=i("ac7c"),H=i("4bd4"),X=i("8860"),J=i("da13"),W=i("1800"),Y=i("5d23"),Z=Object(x["a"])(U,z,N,!1,null,"8f84fc3a",null),Q=Z.exports;b()(Z,{VAutocomplete:K["a"],VBtn:w["a"],VCheckbox:q["a"],VForm:H["a"],VIcon:k["a"],VList:X["a"],VListItem:J["a"],VListItemAction:W["a"],VListItemContent:Y["b"],VListItemTitle:Y["d"],VTextField:I["a"]});var tt={name:"m-frame-editor-tab",props:{isLoading:{type:Boolean,default:!1}},components:{MFrameEditConfForm:Q,MPointTable:j,MRectTable:A},computed:{tab:{get:function(){return this.$store.state.current.frame.tab},set:function(t){this.$store.commit("current/frame/tab",t)}}}},et=tt,it=i("b0af"),nt=i("99d9"),rt=i("71a3"),ot=i("c671"),at=i("fe57"),st=i("aac8"),ct=Object(x["a"])(et,u,d,!1,null,"f9d9e9e8",null),lt=ct.exports;b()(ct,{VCard:it["a"],VCardText:nt["b"],VTab:rt["a"],VTabItem:ot["a"],VTabs:at["a"],VTabsItems:st["a"]});var ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{ref:"card",style:"max-height: "+t.height,attrs:{flat:"",tile:"",color:"grey"}},[t._t("toolbar"),i("v-card",{staticClass:"overflow-y-auto",style:"max-height: "+t.eHeight+"px",attrs:{flat:"",tile:""}},[i("v-card",{staticClass:"overflow-y-auto",attrs:{flat:"",tile:""}},[t._t("default")],2),t._t("table")],2)],2)},dt=[],ft={name:"m-frame-editor-layout",props:{height:{type:String,default:"100%"}},computed:{eHeight:function(){return 500}},methods:{getWidth:function(){return this.$refs.card.$el?this.$refs.card.$el.clientWidth:500}}},mt=ft,ht=Object(x["a"])(mt,ut,dt,!1,null,"5af09633",null),vt=ht.exports;b()(ht,{VCard:it["a"]});var pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",[i("v-toolbar",{attrs:{dense:""}},[i("v-btn-toggle",{attrs:{dense:"",group:"",color:"primary"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},t._l(t.modes,(function(e){return i("v-btn",{key:e.val,attrs:{value:e.val,text:""}},[i("v-icon",[t._v(t._s(e.icon))])],1)})),1),i("div",{staticClass:"mx-1"}),i("m-color-menu",{attrs:{icon:"",tile:""},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),t.targetTier?i("v-text-field",{ref:"text",attrs:{solo:"","hide-details":"",label:"転記テキスト"},scopedSlots:t._u([{key:"append",fn:function(){return[i("v-btn",{attrs:{icon:"",tile:""},on:{click:t.addEvent}},[i("v-icon",[t._v("mdi-send")])],1)]},proxy:!0}],null,!1,38536289),model:{value:t.sendText,callback:function(e){t.sendText=e},expression:"sendText"}}):t._e(),i("v-spacer"),i("v-btn",{attrs:{icon:"",tile:""},on:{click:function(e){return t.$emit("skip","prev")}}},[i("v-icon",[t._v("mdi-skip-previous")])],1),i("v-btn",{attrs:{icon:"",tile:""},on:{click:function(e){return t.$emit("skip","next")}}},[i("v-icon",[t._v("mdi-skip-next")])],1),i("v-btn",{attrs:{icon:"",tile:""},on:{click:function(e){return t.$emit("zoom","out")}}},[i("v-icon",[t._v("mdi-magnify-minus")])],1),i("v-btn",{attrs:{icon:"",tile:""},on:{click:function(e){return t.$emit("zoom","in")}}},[i("v-icon",[t._v("mdi-magnify-plus")])],1)],1),i("v-toolbar",{attrs:{dense:""}},[i("v-btn-toggle",{attrs:{dense:"",group:"",color:"primary"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},t._l(t.filters,(function(e){return i("v-btn",{key:e.name,attrs:{value:e.name,text:""}},[t._v(" "+t._s(t.$vuetify.lang.t(e.name))+" ")])})),1),i("v-spacer"),i("v-btn",{attrs:{text:""},on:{click:function(e){return t.$emit("download","image")}}},[t._v(" png "),i("v-icon",[t._v("mdi-download")])],1)],1)],1)},gt=[],xt={name:"m-frame-editor-actions",components:{MColorMenu:C},watch:{mode:function(t){void 0==t&&(this.mode=0)}},methods:{addEvent:function(){var t=this.$store.state.current.frameConf.text||"",e=this.$store.state.current.frame.time,i={tier:this.$store.state.current.frameConf.targetTier,record:{time:e,text:t}};this.$store.dispatch("current/addRecord",i)},focus:function(){this.$refs.text&&this.$refs.text.focus()}},computed:{$ws:function(){return this.$store.state.current.wavesurfer||null},targetTier:function(){return this.$store.state.current.frameConf.targetTier},sendText:{get:function(){return this.$store.state.current.frameConf.text},set:function(t){this.$store.commit("current/frameConf/text",t)}},color:{get:function(){return this.$store.state.current.frame.color},set:function(t){this.$store.commit("current/frame/color",t)}},mode:{get:function(){return this.$store.state.current.frame.mode},set:function(t){this.$store.commit("current/frame/mode",t)}},filter:{get:function(){var t=this.$store.state.current.frame.filter;return t?t.name:null},set:function(t){this.$store.commit("current/frame/filter",t)}},modes:function(){return this.$store.state.current.frame.modes},filters:function(){return this.$store.state.current.frame.filters}}},yt=xt,bt=i("a609"),wt=i("2fa4"),$t=i("71d9"),kt=Object(x["a"])(yt,pt,gt,!1,null,"a2d07110",null),_t=kt.exports;b()(kt,{VBtn:w["a"],VBtnToggle:bt["a"],VCard:it["a"],VIcon:k["a"],VSpacer:wt["a"],VTextField:I["a"],VToolbar:$t["a"]});var St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layer",{ref:"layer"},[i("v-line",{attrs:{config:{points:[t.cursor.x||0,0,t.cursor.x||0,t.ch],stroke:t.cursor.color,strokeWidth:1,lineCap:"round",lineJoin:"round",dash:[2,5]}}}),i("v-line",{attrs:{config:{points:[0,t.cursor.y||0,t.cw,t.cursor.y||0],stroke:t.cursor.color,strokeWidth:1,lineCap:"round",lineJoin:"round",dash:[2,5]}}}),"circ"==t.mode||"ruler"==t.mode?i("v-circle",{attrs:{config:{x:t.cursor.x||0,y:t.cursor.y||0,stroke:"white",strokeWidth:1,radius:5,fill:t.cursor.color}},on:{dblclick:function(e){return t.$emit("dblclick",e)}}}):t._e(),"rect"==t.mode?i("v-rect",{attrs:{config:{stroke:t.cursor.color,x:t.cursor.x-t.cw/5/2||0,y:t.cursor.y-t.ch/5/2||0,width:t.cw/5,height:t.ch/5}},on:{dblclick:function(e){return t.$emit("dblclick",e)}}}):t._e()],1)},Ct=[],Tt={name:"m-frame-editor-cursor",props:{value:{type:Object,required:!0}},computed:{cursor:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},mode:function(){return this.$store.state.current.frame.mode},cw:function(){return this.$store.state.current.frame.cw},ch:function(){return this.$store.state.current.frame.ch}}},Rt=Tt,Vt=Object(x["a"])(Rt,St,Ct,!1,null,"72f14870",null),Pt=Vt.exports,It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-context-menu",{ref:"menu",attrs:{title:"FRAME-EDITOR-MENU",color:"warning darken-1","max-height":"400",items:t.items}},[t._t("default")],2)},Ot=[],jt=i("9b06"),Et={name:"m-frame-editor-context-menu",components:{MContextMenu:jt["a"]},computed:{items:function(){var t=this,e=function(e){return function(){return setTimeout((function(){return t.$emit("click",e)}),10)}};return[{text:"$vuetify.contexts.frame.download",icon:"mdi-download",kbd:"CTRL + S",click:e("DOWNLOAD")},{text:"$vuetify.contexts.frame.copy",icon:"mdi-content-copy",kbd:"CTRL + C",click:e("COPY")},{text:"$vuetify.contexts.skip",show:!1,icon:"mdi-skip-next",items:[{text:"$vuetify.contexts.skipBackward",icon:"mdi-skip-previous",kbd:"J",click:e("SKIP/PREV")},{text:"$vuetify.contexts.skipForward",icon:"mdi-skip-next",kbd:"K",click:e("SKIP/NEXT")}]},{text:"$vuetify.contexts.zoom",show:!1,icon:"mdi-magnify-plus",items:[{text:"$vuetify.contexts.zoom_in",icon:"mdi-magnify-plus",kbd:"CTRL + +",click:e("ZOOM/IN")},{text:"$vuetify.contexts.zoom_out",icon:"mdi-magnify-minus",kbd:"CTRL + -",click:e("ZOOM/OUT")}]},{text:"$vuetify.iFilter.name",show:!1,icon:"mdi-image-filter-black-white",items:[{text:"$vuetify.iFilter.threshold",click:e("FILTER/THRESHOLD")},{text:"$vuetify.iFilter.adaptiveThreshold",click:e("FILTER/ADAPTIVE")},{text:"$vuetify.iFilter.canny",click:e("FILTER/CANNY")},{text:"$vuetify.iFilter.bilateral",click:e("FILTER/BILATERAL")},{text:"$vuetify.iFilter.laplacian",click:e("FILTER/LAPLACIAN")},{text:"$vuetify.iFilter.concaveConvex",click:e("FILTER/CONCAVECONVEX")}]}]}}},Dt=Et,Mt=Object(x["a"])(Dt,It,Ot,!1,null,"d152bffc",null),Lt=Mt.exports,Ft=i("6b13"),At=i("3591"),zt={name:"m-frame-editor",components:{MKeyContext:Ft["a"],MFrameEditorContextMenu:Lt,MFrameEditorLayout:vt,MFrameEditorActions:_t,MFrameEditorCursor:Pt,MLoading:At["a"],MFrameEditorTab:lt},props:{height:{type:String,default:"100%"},value:{type:String,required:!0}},computed:{src:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},idx:function(){return this.$store.state.current.frame.idx},cw:function(){return this.$store.state.current.frame.cw},ch:function(){return this.$store.state.current.frame.ch},ow:function(){return this.$store.state.current.frame.ow},oh:function(){return this.$store.state.current.frame.oh},points:function(){var t=this.$store.getters["current/frame/points"];return t.map((function(t){return t.size?t:Object(c["a"])(Object(c["a"])({},t),{},{size:5})}))},rects:function(){return this.$store.getters["current/frame/rects"]},polygons:function(){var t=this.$store.getters["current/frame/polygons"];return t},cpStartPoints:function(){var t=this.polygon.points.filter((function(t){return t.isFirstPoint}));return t},cpPoints:function(){var t=this.polygon.points.filter((function(t){return!t.isFirstPoint}));return t},mode:{get:function(){return this.$store.state.current.frame.mode},set:function(t){this.$store.commit("current/frame/mode",t)}},filter:function(){var t=this.$store.state.current.frame.filter;return t?t.func:null},color:function(){return this.$store.state.current.frame.color},disabledStyle:function(){return{opacity:.5,color:"#757575"}},isPointReserved:function(){return this.$store.state.current.frameConf.points.length>0},isRectReserved:function(){return this.$store.state.current.frameConf.rects.length>0},cardHeight:function(){return this.$store.state.current.layout.mini?"100%":"80vh"}},data:function(){return{scale:0,background:{image:null},reservedPoints:[],reservedRects:[],syncPoints:[],syncPolygons:[],syncRects:[],syncing:!1,ruler:{editable:!1,active:null,conf:{size:3,color:"#607D8B",activeSize:5,activeColor:"#FFC107"},points:[],lines:[]},polygon:{active:!1,drawing:!1,conf:{size:5,color:"#607D8B",activeSize:7,activeColor:"#FFC107"},points:[],lines:[]},selectedShapeName:"",cursor:{x:null,y:null,show:!1,color:"#00B8D4"},tab:null}},methods:{focus:function(){this.$refs.context.focus()},blur:function(){this.$refs.context.blur()},loadImage:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e,!this.filter){t.next=5;break}return t.next=4,this.filter(e,{width:this.ow,height:this.oh});case 4:i=t.sent;case 5:return t.next=7,this.$vuewer.io.image.load(i);case 7:n=t.sent,this.onResize(),this.background.image=n,this.focus();case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),copyImage:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$refs.stage.getStage(),i=e.toDataURL(),n=this.$vuewer.io.file.toBlob(i),t.next=5,navigator.clipboard.write([new ClipboardItem({"image/png":n})]);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addEvent:function(){var t=this.$store.state.current.frameConf.text||"",e=this.$store.state.current.frame.time,i={tier:this.$store.state.current.frameConf.targetTier,record:{time:e,text:t}};this.$store.dispatch("current/addRecord",i)},addPoint:function(t,e,i){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o={x:t,y:e,color:i},n.isPointReserved?(a=n.reservedPoints.shift(),a&&-1==n.points.findIndex((function(t){return t.label==a.label}))&&(o.label=a.label,o.color=a.color)):o.label="points-".concat(n.points.length),r.next=4,n.$store.dispatch("current/frame/addPoint",o);case 4:case"end":return r.stop()}}),r)})))()},addRect:function(t,e,i,n,r,o){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function s(){var c,l,u;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(c={x:t,y:e,width:i,height:n,rotation:r,color:o},!a.isRectReserved){s.next=12;break}if(l=a.reservedRects.shift(),!l){s.next=10;break}if(-1!=a.rects.findIndex((function(t){return t.label==l.label}))){s.next=10;break}return c.name=l.label,c.label=l.label,c.color=l.color,s.next=10,a.$store.dispatch("current/frame/addRect",c);case 10:s.next=17;break;case 12:return u="rect-".concat(a.rects.length+1),c.name=u,c.label=u,s.next=17,a.$store.dispatch("current/frame/addRect",c);case 17:case"end":return s.stop()}}),s)})))()},addRulerPoint:function(t,e){var i=Object(l["a"])(),n="ruler-point-".concat(i);this.ruler.points.push({id:i,label:n,x:t,y:e}),this.ruler.points.length%2==0&&this.addRulerLine(i)},addRulerLine:function(t){var e=this.ruler.points.findIndex((function(e){return e.id==t})),i=this.ruler.points[e-1],n=this.ruler.points[e],r=(n.y-i.y)/(n.x-i.x),o=i.y-r*i.x,a={x:0,y:o},s={x:this.cw,y:this.cw*r+o},c=[a.x,a.y,s.x,s.y],u=Object(l["a"])();this.ruler.lines.push({id:u,points:c,t:r,i:o})},addPolygon:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i,n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=Object(l["a"])(),i="polygon-".concat(e),n=this.polygon.points,r=n.slice(1).map((function(t,e){var i=n[e],r=[i.x,i.y,t.x,t.y];return{id:"line-".concat(e),points:r}})),o={label:i,lines:r,id:i,color:this.color,points:n},t.next=7,this.$store.dispatch("current/frame/addPolygon",o);case 7:this.polygon.active=!1,this.polygon.points=[],this.polygon.lines=[];case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addPolygonPoint:function(t,e){var i=Object(l["a"])(),n="polygon-point-".concat(i),r=0===this.polygon.points.length;this.polygon.points.push({id:i,label:n,x:t,y:e,isFirstPoint:r}),i>1&&this.setPolygonLine()},setPolygonLine:function(){var t=this.polygon.points;this.polygon.lines=t.slice(1).map((function(e,i){var n=t[i],r=[n.x,n.y,e.x,e.y];return{id:"line-".concat(i),points:r}}))},addLinePoint:function(t,e){var i=this.polygon.points.length,n=this.polygon.points[i-1];if(n){var r=Math.abs(n.x-t),o=Math.abs(n.y-e),a=2*this.polygon.conf.size;r>a|o>a&&this.addPolygonPoint(t,e)}else this.addPolygonPoint(t,e)},convexDefects:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,n,r,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i="#3E2723",n="#BF360C",r=function(t,e,r){return t.color="concavos"==r?i:n,t.label="concavos"==r?"concavo-".concat(e):"convex-".concat(e),t},e.next=5,t.$vuewer.image.convexDefects(t.src,{width:t.ow,height:t.oh});case 5:return o=e.sent,a=o.map((function(t){var e=t.concavos.map((function(t,e){return r(t,e,"concavos")})),i=t.convexes.map((function(t,e){return r(t,e,"convexes")}));return e.concat(i)})).flat(),e.next=9,t.$store.dispatch("current/frame/addPoints",a);case 9:case"end":return e.stop()}}),e)})))()},colorFilter:function(t,e){var i=this;return-1!=[t,"eras"].findIndex((function(t){return t==i.mode}))?e.color:this.disabledStyle.color},opacityFilter:function(t){var e=this;return-1!=[t,"eras"].findIndex((function(t){return t==e.mode}))?1:this.disabledStyle.opacity},onMenuClick:function(t){"SKIP/NEXT"==t?this.onSkip("next"):"SKIP/PREV"==t?this.onSkip("prev"):"ZOOM/IN"==t?this.onZoom("in"):"ZOOM/OUT"==t?this.onZoom("out"):"COPY"==t?this.copyImage():"DOWNLOAD"==t?this.onDownload("image"):"FILTER/THRESHOLD"==t?this.$store.commit("current/frame/filter","$vuetify.iFilter.threshold"):"FILTER/ADAPTIVE"==t?this.$store.commit("current/frame/filter","$vuetify.iFilter.adaptiveThreshold"):"FILTER/CANNY"==t?this.$store.commit("current/frame/filter","$vuetify.iFilter.canny"):"FILTER/BILATERAL"==t?this.$store.commit("current/frame/filter","$vuetify.iFilter.bilateral"):"FILTER/LAPLACIAN"==t?this.$store.commit("current/frame/filter","$vuetify.iFilter.laplacian"):"FILTER/CONCAVECONVEX"==t?this.convexDefects():console.log("onMenuClick",t)},onSkip:function(t){"next"==t&&(this.$store.state.setting.syncPrevPoints?this.syncPoints=this.$vuewer.deepCopy(this.points):this.syncPoints=[],this.$store.state.setting.syncPrevRects?this.syncRects=this.$vuewer.deepCopy(this.rects):this.syncRects=[]),this.$emit("skip",t)},onZoom:function(t){if("out"==t){this.scale>0&&(this.scale=0);var e=this.$refs.layout.getWidth(),i=e+100*this.scale;i>300&&(this.scale=this.scale-.5,this.loadImage(this.src))}else{this.scale<0&&(this.scale=0);var n=this.$refs.layout.getWidth(),r=n+100*this.scale;r<1e3&&(this.scale=this.scale+.5,this.loadImage(this.src))}},onDownload:function(t){if("image"==t){var e=this.$store.state.current.video.filename.split(".")[0],i="".concat(e,"-f").concat(this.idx,".png"),n=this.$refs.stage.getStage(),r=n.toDataURL(),o=document.createElement("a");o.href=r,o.download=i,o.click()}},onResize:function(){var t=this.$refs.layout.getWidth(),e=this.oh*t/this.ow,i=t+100*this.scale,n=e+100*this.scale;this.$store.commit("current/frame/cw",i),this.$store.commit("current/frame/ch",n),this.background.height=i,this.background.width=n},onKeyup:function(t){var e=this,i=this.$vuewer.key.summary(t),n=i.key,r=i.xKey;if("tab"==n&&"default"==r){var o=this.$store.state.current.frame.modes,a=o.findIndex((function(t){return t.val==e.mode}));if(-1!==a){var s=a+1;this.mode=s==o.length?o[0].val:o[s].val}}else"c"==n&&"ctrl"==r?this.copyImage():"s"==n&&"ctrl"==r?this.onDownload("image"):"i"==n&&"default"==r?this.cursor.show=!0:"i"==n&&"ctrl"==r?this.$refs.actions&&this.$refs.actions.focus():"["==n&&"ctrl"==r||"Escape"==n&&"default"==r?this.cursor.show=!1:"h"==n&&"default"==r?this.cursor.show&&(this.cursor.x=this.cursor.x-this.cw/100):"l"==n&&"default"==r?this.cursor.show&&(this.cursor.x=this.cursor.x+this.cw/100):"j"==n&&"default"==r?this.cursor.show?this.cursor.y=this.cursor.y-this.ch/100:this.onSkip("prev"):"k"==n&&"default"==r?this.cursor.show?this.cursor.y=this.cursor.y+this.ch/100:this.onSkip("next"):" "==n&&"default"==r?this.cursor.show?this.onDblClick():this.addEvent():"h"==n&&"ctrl"==r||"j"==n&&"ctrl"==r?this.cursor.show&&this.onSkip("prev"):"k"==n&&"ctrl"==r||"l"==n&&"ctrl"==r?this.cursor.show&&this.onSkip("next"):this.$emit("keyup",t)},onDblClick:function(){if("circ"==this.mode)this.addPoint(this.cursor.x,this.cursor.y,this.color);else if("rect"==this.mode){var t=this.cw/5,e=this.ch/5,i=this.cursor.x-t/2,n=this.cursor.y-e/2;this.addRect(i,n,t,e,0,this.color)}else"ruler"==this.mode?this.addRulerPoint(this.cursor.x,this.cursor.y):"polygon"==this.mode&&this.addPolygonPoint(this.cursor.x,this.cursor.y)},onPolygonMouseEnter:function(){var t=this.polygon.points;this.polygon.active=t.length>2},onPolygonMouseLeave:function(){this.polygon.active=!1},onClickPolygonsPoint:function(){var t=this.polygon.points[0];this.addPolygonPoint(t.x,t.y),this.addPolygon()},onPolygonPointClick:function(t){if("eras"==this.mode){var e=t.target.attrs,i=e.polygon_id,n=e.point_id;i&&n&&this.$store.dispatch("current/frame/deletePolygon",{polygon_id:i})}},onPolygonPointMouseEnter:function(t){if("eras"==this.mode||"polygon"==this.mode){var e=t.target.attrs,i=e.polygon_id,n=e.point_id;i&&n&&this.$store.dispatch("current/frame/activePolygonPoint",{polygon_id:i,point_id:n,mode:this.mode})}},onPolygonPointMouseLeave:function(t){if("eras"==this.mode||"polygon"==this.mode){var e=t.target.attrs,i=e.polygon_id,n=e.point_id;i&&n&&this.$store.dispatch("current/frame/inactivePolygonPoint",{polygon_id:i,point_id:n,mode:this.mode})}},onPolygonLineDblClick:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,o,s,c,u,d,f,m,h,v,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.target.attrs,n=i.polygon_id,r=i.line_id,o=this.cursor,s=o.x,c=o.y,u=this.polygons.find((function(t){return t.id===n})),!u){t.next=15;break}if(d=u.lines,f=u.points,m=d.find((function(t){return t.id===r})),!m){t.next=15;break}return h=f.findIndex((function(t){return t.x===m.points[0]&&t.y===m.points[1]})),v=Object(a["a"])(f),v.splice(h,0,{x:s,y:c,id:Object(l["a"])()}),p={id:u.id,size:u.size,color:u.color,label:u.label,frameId:u.frameId,points:v},t.next=13,this.$store.dispatch("current/frame/addPolygon",p);case 13:return t.next=15,this.$store.dispatch("current/frame/deletePolygon",{polygon_id:n});case 15:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onRulerDblClick:function(t){var e=t.target.attrs.id,i=this.cursor,n=i.x,r=i.y,o=this.ruler.lines.findIndex((function(t){return t.id==e}));if(-1!=o){var a=this.ruler.lines[o];if("eras"==this.mode){var s=this.ruler.points.findIndex((function(t){return t.x==a.points[0]})),c=this.ruler.points.findIndex((function(t){return t.x==a.points[2]}));this.ruler.points.splice(s,1),this.ruler.points.splice(c,1),this.ruler.lines.splice(o,1)}else if("rect"==this.mode){var l=this.cw/5,u=this.ch/5,d=180*a.t/Math.PI;this.addRect(n,r,l,u,d,this.color)}else"circ"==this.mode?this.addPoint(n,r,this.color):"polygon"==this.mode?this.addPolygonPoint(n,r):"ruler"==this.mode&&this.ruler.points.length%2===1&&this.addRulerPoint(n,r)}},onRulerMouseEnter:function(t){var e=t.target.attrs.id;this.ruler.active=e},onRulerMouseLeave:function(){this.ruler.active=null},onPointClick:function(t){if("eras"==this.mode){var e=t.target.attrs.id;e&&this.$store.dispatch("current/frame/deletePoint",e)}},onPointMouseEnter:function(t){if("eras"==this.mode||"circ"==this.mode){var e=t.target.attrs.id;e&&this.$store.dispatch("current/frame/activePoint",e)}},onPointMouseLeave:function(t){if("eras"==this.mode||"circ"==this.mode){var e=t.target.attrs.id;e&&this.$store.dispatch("current/frame/inactivePoint",e)}},onPointDragStart:function(t){var e=t.target.attrs.id;e&&this.$store.dispatch("current/frame/inactivePoint",e)},onPointDragEnd:function(t){var e=t.target.attrs.id,i=this.points.findIndex((function(t){return t.id==e}));if(-1!==i){var n=this.points[i];n.x=t.target.x(),n.y=t.target.y(),this.$store.dispatch("current/frame/updatePoint",n)}},onRectClick:function(t){if("circ"==this.mode)this.addPoint(t.evt.offsetX,t.evt.offsetY,this.color);else if("eras"==this.mode){var e=t.target.attrs.id;e&&this.$store.dispatch("current/frame/deleteRect",e)}},onRectDragEnd:function(t){var e=t.target.attrs.id,i=this.rects.findIndex((function(t){return t.id==e}));if(-1!==i){var n=this.rects[i];n.x=t.target.x(),n.y=t.target.y(),this.$store.dispatch("current/frame/updateRect",n)}},onStageMouseMove:function(){var t=this.$refs.stage.getNode().getPointerPosition();this.cursor.x=t.x,this.cursor.y=t.y,"pen"==this.mode&&this.polygon.drawing&&this.addLinePoint(this.cursor.x,this.cursor.y)},onStageMouseDown:function(t){if("pen"==this.mode)this.polygon.drawing=!0,this.addLinePoint(this.cursor.x,this.cursor.y);else{if(t.target===t.target.getStage())return this.selectedShapeName="",void this.updateTransformer();var e="Transformer"===t.target.getParent().className;if(e)return;var i=t.target.name(),n=this.rects.find((function(t){return t.name===i}));this.selectedShapeName=n?i:"",this.updateTransformer()}},onStageMouseUp:function(){"pen"==this.mode&&(this.polygon.drawing=!1)},onStageTouchStart:function(t){console.log("onStageTouchStart",t)},onTransformEnd:function(t){var e=this,i=this.rects.findIndex((function(t){return t.name==e.selectedShapeName}));if(-1!==i){var n=this.rects[i];n.rotation=t.target.rotation(),n.width=t.target.width(),n.scaleX=t.target.scaleX(),n.height=t.target.height(),n.scaleY=t.target.scaleY(),this.$store.dispatch("current/frame/updateRect",n)}},updateTransformer:function(){if("rect"==this.mode){var t=this.$refs.transformer.getNode(),e=t.getStage(),i=this.selectedShapeName,n=e.findOne("."+i);if(n===t.node())return;n?t.nodes([n]):t.nodes([]),t.getLayer().batchDraw()}},close:function(){this.scale=0}},watch:{"$store.state.current.frame.id":function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,n,r,a,s,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=47;break}if(this.scale=0,this.reservedPoints=this.$vuewer.deepCopy(this.$store.state.current.frameConf.points),this.reservedRects=this.$vuewer.deepCopy(this.$store.state.current.frameConf.rects),!this.syncPoints.length||0!=this.points.length){t.next=25;break}this.syncing=!0,i=Object(o["a"])(this.syncPoints),t.prev=7,i.s();case 9:if((n=i.n()).done){t.next=16;break}return r=n.value,a={label:r.label,color:r.color,x:r.x,y:r.y},t.next=14,this.$store.dispatch("current/frame/addPoint",a);case 14:t.next=9;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](7),i.e(t.t0);case 21:return t.prev=21,i.f(),t.finish(21);case 24:this.syncing=!1;case 25:if(!this.syncRects.length||0!=this.rects.length){t.next=46;break}this.syncing=!0,s=Object(o["a"])(this.syncRects),t.prev=28,s.s();case 30:if((c=s.n()).done){t.next=37;break}return l=c.value,u={label:l.label,color:l.color,x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY,width:l.width,height:l.height,rotation:l.rotation},t.next=35,this.$store.dispatch("current/frame/addRect",u);case 35:t.next=30;break;case 37:t.next=42;break;case 39:t.prev=39,t.t1=t["catch"](28),s.e(t.t1);case 42:return t.prev=42,s.f(),t.finish(42);case 45:this.syncing=!1;case 46:this.loadImage(this.src);case 47:case"end":return t.stop()}}),t,this,[[7,18,21,24],[28,39,42,45]])})));function e(e){return t.apply(this,arguments)}return e}(),"$store.state.current.frameConf.points":function(t){this.reservedPoints=JSON.parse(JSON.stringify(t))},"$store.state.current.frameConf.rects":function(t){this.reservedRects=JSON.parse(JSON.stringify(t))},filter:function(t,e){t!=e&&this.loadImage(this.src)}},mounted:function(){this.scale=0,this.reservedPoints=JSON.parse(JSON.stringify(this.$store.state.current.frameConf.points)),this.reservedRects=JSON.parse(JSON.stringify(this.$store.state.current.frameConf.rects)),this.loadImage(this.src)}},Nt=zt,Bt=Object(x["a"])(Nt,n,r,!1,null,"799b0c0c",null);e["a"]=Bt.exports},c437:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-video-array-layout",{scopedSlots:t._u([{key:"prev",fn:function(){return[i("m-video",{ref:"prev",style:t.videoStyle,attrs:{muted:"",flat:"",src:t.src,frames:t.$frames,"origin-size":t.$originSize},on:{"frame-updated":t.onPrevFrameUpdated,keyup:function(e){return t.onKeyup("prev",e)},mouseover:function(e){return t.$emit("mouseover")}}})]},proxy:!0},{key:"next",fn:function(){return[i("m-video",{ref:"next",style:t.videoStyle,attrs:{flat:"",muted:"",src:t.src,"origin-size":t.$originSize,frames:t.$frames},on:{"frame-updated":t.onNextFrameUpdated,keyup:function(e){return t.onKeyup("prev",e)},mouseover:function(e){return t.$emit("mouseover")}}})]},proxy:!0}])},[i("m-video",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],ref:"video",style:t.videoStyle,attrs:{flat:"","origin-size":t.$originSize,src:t.src,frames:t.$frames},on:{loadeddata:t.onLoadeddata,timeupdate:t.onTimeupdate,"frame-updated":t.onFrameUpdated,keyup:function(e){return t.onKeyup("prev",e)},mouseover:function(e){return t.$emit("mouseover")}}})],1)},r=[],o=(i("a9e3"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"py-0 transparent",attrs:{fluid:""}},[i("v-row",[i("v-col",{staticClass:"pa-0"},[i("v-card",{staticClass:"mb-0",attrs:{tile:"",flat:"",color:"transparent"}},[t._t("prev")],2)],1),i("v-col",{staticClass:"pa-0"},[i("v-card",{attrs:{tile:"",flat:"",color:"transparent"}},[t._t("default")],2)],1),i("v-col",{staticClass:"pa-0"},[i("v-card",{attrs:{tile:"",flat:"",color:"transparent"}},[t._t("next")],2)],1)],1)],1)}),a=[],s={name:"m-video-array-layout"},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("b0af"),m=i("62ad"),h=i("a523"),v=i("0fd9"),p=Object(l["a"])(c,o,a,!1,null,"551b88be",null),g=p.exports;d()(p,{VCard:f["a"],VCol:m["a"],VContainer:h["a"],VRow:v["a"]});var x=i("89a7"),y={name:"WVideo",components:{MVideoArrayLayout:g,MVideo:x["a"]},props:{src:{type:String,required:!0},frameOffset:{type:Number,default:1}},data:function(){return{el:null,systemBarClass:"caption text-truncate",videoStyle:{width:"100%",height:"auto"}}},computed:{$originSize:function(){return this.$store.state.current.originSize},$frameRate:function(){return this.$store.state.current.frameRate},$frames:function(){return this.$store.state.current.frames},duration:function(){return this.$store.state.current.duration}},methods:{t:function(t){return this.$vuetify.lang.t("$vuetify.wVideo.".concat(t))},focus:function(){this.$refs.video.focus()},setPlaybackRate:function(t){this.$refs.video.setPlaybackRate(t)},syncVideos:function(t){if(this.$refs.video){var e=this.frameOffset*this.$frameRate;if(t-e<0)this.$refs.prev.setCurrentTime(0);else{var i=t-e;this.$refs.prev.setCurrentTime(i)}if(e+t>this.duration)this.$refs.next.setCurrentTime(t);else{var n=t+e;this.$refs.next.setCurrentTime(n)}}},onPrevFrameUpdated:function(t){if(t){var e=this.$refs.prev,i=e.getVideoDataURL();this.$store.commit("current/frame/prev",i),this.$store.commit("current/frame/isChangePrev",!1)}},onNextFrameUpdated:function(t){if(t){var e=this.$refs.next,i=e.getVideoDataURL();this.$store.commit("current/frame/next",i),this.$store.commit("current/frame/isChangeNext",!1)}},onFrameUpdated:function(t){var e=this.$refs.video;if(e){var i=e.getVideoDataURL();t&&(t.src=i,this.$store.dispatch("current/frame/frame",t),this.$emit("frame-updated",t))}},getDuration:function(){if(this.$refs.video)return this.$refs.video.getDuration()},getCurrentTime:function(){if(this.$refs.video)return this.$refs.video.getCurrentTime()},onKeyup:function(t,e){var i={ref:t,event:e};this.$emit("keyup",i)},onLoadeddata:function(t){this.$refs.video.setCurrentTime(0),this.$emit("loadeddata",t)},onTimeupdate:function(t){this.$emit("timeupdate",t),this.syncVideos(t)},onResize:function(){this.$emit("resize")},downloadImage:function(){this.$refs.video.downloadImage()}}},b=y,w=i("269a"),$=i.n(w),k=i("dc22"),_=Object(l["a"])(b,n,r,!1,null,null,null);e["a"]=_.exports;$()(_,{Resize:k["a"]})},d1eb:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{titleColor:"error",title:t.$vuetify.lang.t(t.title),fullscreen:t.$store.state.current.layout.mini},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-card-text",[t.dialog?i("m-tier-delete-form",{ref:"form",attrs:{tiers:t.tiers,current:t.current},on:{validated:t.onValidated}}):t._e()],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"error"},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"primary"},on:{click:t.validate}},[t._v("ok")])],1)],1)],1)},r=[],o=i("0402"),a=i("9621"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-autocomplete",{attrs:{rules:t.nameRule,items:t.tiers||[],label:""+t.$vuetify.lang.t("$vuetify.textgrid.tier.option.name"),multiple:""},model:{value:t.names,callback:function(e){t.names=e},expression:"names"}})],1)},c=[],l=(i("c740"),i("c975"),{name:"WTierDeleteFrom",data:function(){return{valid:!1,names:[]}},props:{tiers:{type:Array},current:{type:String}},computed:{nameRule:function(){var t=this,e=[function(e){return!!e||t.$vuetify.lang.t("$vuetify.validations.required")},function(e){return t.checkName(e)}];return e}},methods:{checkName:function(t){if(t){var e,i=Object(o["a"])(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(-1==this.tiers.indexOf(n))return this.$vuetify.lang.t("$vuetify.validations.notExist")}}catch(r){i.e(r)}finally{i.f()}return!0}return this.$vuetify.lang.t("$vuetify.validations.required")},validate:function(){if(this.$refs.form.validate(),this.valid){var t={names:this.names};this.$emit("validated",t)}},reset:function(){this.resetValidation()},resetValidation:function(){this.$refs.form.resetValidation()}},watch:{current:function(t,e){t!=e&&t&&-1==this.names.findIndex((function(e){return e==t}))&&this.names.push(t)}},mounted:function(){this.current&&this.names.push(this.current)}}),u=l,d=i("2877"),f=i("6544"),m=i.n(f),h=i("c6a6"),v=i("4bd4"),p=Object(d["a"])(u,s,c,!1,null,"5bfa8494",null),g=p.exports;m()(p,{VAutocomplete:h["a"],VForm:v["a"]});var x=i("27a3"),y={name:"m-tier-delete-dialog",components:{MCardDialog:a["a"],MTierDeleteForm:g},mixins:[x["a"]],data:function(){return{title:"$vuetify.forms.tierDelete.title"}},props:{value:{type:Boolean},current:{type:String},tiers:{type:Array}},watch:{dialog:function(t){0==t&&this.$refs.form.reset()}},computed:{dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{close:function(){this.dialog=!1},validate:function(){this.$refs.form.validate()},onValidated:function(t){var e,i=t.names,n=Object(o["a"])(i);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.deleteTier(r)}}catch(a){n.e(a)}finally{n.f()}this.close()}}},b=y,w=i("8336"),$=i("b0af"),k=i("99d9"),_=i("2fa4"),S=Object(d["a"])(b,n,r,!1,null,"74ae6452",null);e["a"]=S.exports;m()(S,{VBtn:w["a"],VCard:$["a"],VCardActions:k["a"],VCardText:k["b"],VSpacer:_["a"]})},d623:function(t,e,i){"use strict";i("99af");for(var n="mri-vuewer",r=["wavesurfer","snackbar","metadata","dropbox"],o=function(t,e){var i="".concat(n,"-").concat(t,"-").concat(e),r=localStorage.getItem(i);return"true"==r||"false"!=r&&r},a=function(t,e,i){var r="".concat(n,"-").concat(t,"-").concat(e);localStorage.setItem(r,i)},s={},c=function(){var t=u[l];s[t]={get:function(e){var i=t;return o(i,e)},set:function(e,i){var n=t;a(n,e,i)}}},l=0,u=r;l<u.length;l++)c();e["a"]=s},da38:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{ref:"dialog",attrs:{persistent:"",titleColor:"warning darken-1",fullscreen:t.$store.state.current.layout.mini,title:t.$vuetify.lang.t(t.title),"max-width":t.maxWidth},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[t._t("activator",null,{on:i,attrs:n})]}},{key:"toolbar-actions",fn:function(){return[i("span",[t._v(" "+t._s(t.header)+" ")]),i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.close}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.dialog&&t.src?i("m-frame-editor",{ref:"editor",attrs:{height:t.contentHeight},on:{skip:t.onSkip},model:{value:t.src,callback:function(e){t.src=e},expression:"src"}}):t._e()],1)},r=[],o=(i("99af"),i("4de4"),i("a15b"),i("d3b7"),i("ddb0"),i("9621")),a=i("b874"),s={name:"m-image-edit-dialog",components:{MCardDialog:o["a"],MFrameEditor:a["a"]},props:{value:{type:Boolean,required:!0}},data:function(){return{maxWidth:"700"}},methods:{onSkip:function(t){"next"==t?this.$store.dispatch("current/skipForward"):this.$store.dispatch("current/skipBackward"),this.maxWidth="700"},close:function(){this.$refs.editor&&this.$refs.editor.close(),this.maxWidth="700",this.dialog=!1}},computed:{src:{get:function(){return this.$store.state.current.frame.src},set:function(t){this.$store.commit("current/frame/src",t)}},contentHeight:function(){return this.$store.state.current.layout.mini?"90vh":"80vh"},refKey:function(){return this.$store.state.current.frameConf.refTier},refValues:function(){var t=this.refKey;return t?this.$store.state.current.textgrid[t].values:[]},refText:function(){var t=this.$store.state.current.frame.time,e=this.refValues.filter((function(e){return e.time>=t}))[0];return e?e.text:null},targetKey:function(){return this.$store.state.current.frameConf.targetTier},targetValues:function(){var t=this.targetKey;return t?this.$store.state.current.textgrid[t].values:[]},targetText:function(){var t=this.$store.state.current.frame.time,e=this.targetValues.filter((function(e){return e.time==t}))[0];return e?e.text:null},title:function(){return"$vuetify.forms.imageEdit.title"},header:function(){var t=this.$store.state.current.frame.time,e=this.$store.state.current.frame.id,i=this.$vuewer.math.round(t,3),n="".concat(i," sec");if(e){if(n=["FRAME: ".concat(e),n].join(": "),this.targetKey){var r="".concat(this.targetKey,": ").concat(this.targetText||"null");n=[r,n].join(": ")}if(this.refKey){var o="".concat(this.refKey,": ").concat(this.refText||"null");n=[o,n].join(": ")}}return n},dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},c=s,l=i("2877"),u=i("6544"),d=i.n(u),f=i("8336"),m=i("132d"),h=Object(l["a"])(c,n,r,!1,null,"6ff7f61f",null);e["a"]=h.exports;d()(h,{VBtn:f["a"],VIcon:m["a"]})},de69:function(t,e,i){"use strict";(function(t){i("99af"),i("4de4"),i("7db0"),i("c740"),i("4160"),i("c975"),i("a15b"),i("d81d"),i("fb6a"),i("b0c0"),i("a9e3"),i("b64b"),i("d3b7"),i("ac1f"),i("5319"),i("1276"),i("498a"),i("159b"),i("ddb0");var n=i("81a8"),r=i("b192"),o=(i("96cf"),i("7580")),a=i("90a6"),s=i("1037"),c=i.n(s),l=i("612b"),u=i("c437"),d=i("3aaa"),f=i("edbd"),m=i("4a48"),h=i("99cd"),v=i("548c"),p=i("a009"),g=i("2a04"),x=i("d1eb"),y=i("da38"),b=i("209a"),w=i("7bfa"),$=i("3377"),k=i("70f3"),_=i("3591"),S=i("7a0e");e["a"]={name:"WVuwer",components:{MLoading:_["a"],MVuwerLayout:l["a"],MVideoArray:u["a"],MTextGrid:d["a"],WaveSurfer:c.a,MWContextMenu:h["a"],MSpeedDial:k["a"],MComplatesDialog:$["a"],MDetailDialog:v["a"],MImageEditDialog:y["a"],MSettingDialog:b["a"],MTextgridDialog:w["a"],MTierDeleteDialog:x["a"],MTierDialog:p["a"],MTierEditDialog:g["a"],MRecordTextField:m["a"],MDiffCard:S["a"],MVuwerActions:f["a"]},props:{id:{type:Number,required:!0},frameOffset:{type:Number,default:1}},data:function(){return{tag:"WVuwer",videoElm:null,videoHeight:null,isLoading:!1,isSyncing:!1,lazyRular:!1,lazyImageEdit:!1,lazyFocusTextField:!1,drawingContextAttributes:{desynchronized:!1},fab:!1,where:null,dialog:{detail:{show:!1},textgrid:{show:!1},tier:{show:!1},tierEdit:{show:!1},tierDelete:{show:!1},ruler:{show:!1},imageEdit:{show:!1},setting:{show:!1},complates:{show:!1}},keybuffer:{time:null,keycode:null,key:null,xKey:null,from:null},current:{tier:{key:null,values:[],record:{idx:0,text:"",time:0}},frame:{idx:null,time:null,src:null,points:[],rects:[],texts:[]}},tiers:[]}},computed:{wavesurfer:{get:function(){return this.$store.state.current.wavesurfer},set:function(t){this.$store.commit("current/waveSurfer",t)}},$minPxPerSec:{get:function(){return this.$store.state.setting.minPxPerSec},set:function(t){var e=Object(a["a"])(t),i="number"==e?t:Number(t);i&&this.$store.commit("setting/setMinPxPerSec",i)}},$textgrid:{get:function(){return this.$store.state.current.textgrid},set:function(t){var e=this;this.$store.dispatch("current/textgrid",t).then((function(i){var n="update the textgrid of a file (id=".concat(i,")");e.$vuewer.db.log("textgrid","PUT",n),e.$store.dispatch("current/cache/setTextgrid",t)})).catch((function(t){e.$vuewer.console.error("vuewer:textgrid:put",t)}))}},$frames:{get:function(){return this.$store.state.current.frames},set:function(t){this.$store.commit("current/frames",t)}},$duration:{get:function(){return Number(this.$store.state.current.duration)},set:function(t){this.$store.commit("current/duration",Number(t))}},$source:function(){return this.$store.state.current.source},$fps:function(){return this.$store.state.current.fps},$frameRate:function(){return this.$store.state.current.frameRate},$frameIdx:function(){return this.$store.state.current.frame.idx},skipLength:function(){return this.frameOffset*this.$frameRate},showTextField:function(){return!(!this.videoElm||!this.$textgrid||this.isLoading)&&Object.keys(this.$textgrid).length>0}},watch:{id:function(t,e){t!=e&&this.$store.dispatch("current/init",t)},$textgrid:{handler:function(t,e){if(t&&t!=e)for(var i in this.tiers=[],t)this.tiers.push(i)},deep:!0},"dialog.imageEdit.show":function(t){0==t&&this.$refs.videoArray.focus()}},methods:{rebaseTextgrid:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.$store.getters["current/cache/textgrids"](t);null!==e&&this.$store.dispatch("current/setTextGrid",e)},playPause:function(){var t=this.current.tier.key||null,e=this.current.tier.record.idx||null,i=this.current.tier.record.time||null,n=this.wavesurfer.getCurrentTime();t&&e&&i>n?this.playRecord(t,e):this.wavesurfer.playPause()},addRecord:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n={time:e,text:i};this.wavesurfer.addTierValue(t,n),this.isSyncing||this.$vuewer.console.log(this.tag,"add a record (key: ".concat(t,", time: ").concat(e,")"))},deleteRecord:function(t,e){if(e>-1){var i=this.$textgrid[t].type,n=this.$textgrid[t].values.length;("interval"!=i||n>1)&&(this.wavesurfer.deleteTierValue(t,e),this.isSyncing||this.$vuewer.console.log(this.tag,"delete a record (key: ".concat(t," idx: ").concat(e,")")))}},updateRecordText:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=this.$textgrid[t].values[e].time,r={time:n,text:i};this.wavesurfer.setTierValue(t,e,r)},deleteRecordText:function(t,e){var i=this.$textgrid[t].values[e];i.text?(this.copyRecord(t,e),i.text="",this.wavesurfer.setTierValue(t,e,i),this.current.tier.record.text=null):this.deleteRecord(t,e)},playRecord:function(t,e){if(this.wavesurfer.isPlaying())this.wavesurfer.pause();else{var i=this.$textgrid[t].values[e];if("interval"==this.$textgrid[t].type)if(e>0){var n=this.$textgrid[t].values[e-1];i.time&&n.time&&this.wavesurfer.play(n.time,i.time)}else this.wavesurfer.play(0,i.time);else{var r=this.$duration,o=this.$playOffset*this.$frameRate,a=i.time-o>0?i.time-o:0,s=i.time+o<r?i.time+o:r;this.wavesurfer.play(a,s)}}},copyRecord:function(t,e){var i=this.$textgrid[t].values[e];navigator.clipboard?navigator.clipboard.writeText(i.text):this.showBrowserError()},copyRecords:function(t){if(navigator.clipboard){var e=this.$textgrid[t],i=e.values,n={"x-special":"vuewer:tier",type:e.type,parent:null,key:t,values:i},r=JSON.stringify(n);navigator.clipboard.writeText(r)}else this.showBrowserError()},paste:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!navigator.clipboard){e.next=5;break}return e.next=3,navigator.clipboard.readText();case 3:i=e.sent;try{n=JSON.parse(i),"vuewer:tier"==n["x-special"]&&(r=t.$textgrid,r["".concat(n.key,"-copy")]={type:n.type,parent:n.parent,values:n.values},t.$store.dispatch("current/setTextGrid",r),o=Object.keys(t.$textgrid),t.focusRecord(o[o.length-1]))}catch(a){t.pasteRecord(t.current.key,t.current.tier.record.idx)}case 5:case"end":return e.stop()}}),e)})))()},pasteRecord:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,o,a,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=i.$textgrid[t].values[e],o=r.time,n.next=4,navigator.clipboard.readText();case 4:a=n.sent,s={time:o,text:a},i.wavesurfer.setTierValue(t,e,s),i.current.tier.record.text=a,i.isSyncing||(c="update text a record (key: ".concat(t," idx: ").concat(e,")"),i.$vuewer.console.log(i.tag,c));case 9:case"end":return n.stop()}}),n)})))()},focusRecord:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.wavesurfer.wavesurfer.textgrid,i=this.wavesurfer.getCurrentTime(),n=null!==t?t:this.current.key||Object.keys(this.$textgrid)[0];if(n){var r=this.$textgrid[n].values;if(r){var o=r.sort((function(t,e){return t.time>e.time})).find((function(t){return t.time>i}));e.setCurrent(t,o),e.tiers[t].canvas.focus()}}},nextRecord:function(t,e,i){if(t)if(e+1<this.$textgrid[t].values.length){var n=this.$textgrid[t].values[e+1];if(n){i&&(this.lazyFocusTextField=!0);var r=this.wavesurfer.wavesurfer.textgrid;r.setCurrent(t,n),this.$store.dispatch("current/seekTo",{time:n.time,center:!0})}}else{var o=this.$textgrid[t].values[0];if(o){i&&(this.lazyFocusTextField=!0);var a=this.wavesurfer.wavesurfer.textgrid;a.setCurrent(t,o),this.$store.dispatch("current/seekTo",{time:o.time,center:!0})}}},prevRecord:function(t,e,i){if(t)if(e-1>-1){var n=this.$textgrid[t].values[e-1];if(n){i&&(this.lazyFocusTextField=!0);var r=this.wavesurfer.wavesurfer.textgrid;r.setCurrent(t,n),this.$store.dispatch("current/seekTo",{time:n.time,center:!0})}}else{var o=this.$textgrid[t].values,a=this.$textgrid[t].values[o.length-1];if(a){i&&(this.lazyFocusTextField=!0);var s=this.wavesurfer.wavesurfer.textgrid;s.setCurrent(t,a),this.$store.dispatch("current/seekTo",{time:a.time,center:!0})}}},toStartRecord:function(t,e){if("interval"==this.$textgrid[t].type){if(e-1>-1){var i=this.$textgrid[t].values[e-1];this.$store.dispatch("current/seekTo",{time:i.time,center:!0})}}else{var n=this.$textgrid[t].values[e];this.$store.dispatch("current/seekTo",{time:n.time,center:!0})}this.focusTier(t)},toEndRecord:function(t,e){var i=this.$textgrid[t].values[e];this.$store.dispatch("current/seekTo",{time:i.time,center:!0}),this.focusTier(t)},extendRecord:function(t,e){var i=this.$textgrid[t].values,n=i[e],r=this.$duration-this.$frameRate,o=Number(n.time)+this.$frameRate,a=e+1==i.length?r:i[e+1].time-this.$frameRate;if(o<a){var s={text:n.text,time:o};this.wavesurfer.setTierValue(t,e,s),this.isSyncing||this.$vuewer.console.log(this.tag,"update time a record (key: ".concat(t," idx: ").concat(e,")")),this.$store.dispatch("current/seekTo",{time:o,center:!1})}},shrinkRecord:function(t,e){var i=this.$textgrid[t].values[e],n=0==e?0:this.$textgrid[t].values[e-1].time,r=this.$textgrid[t].type,o=i.time-this.$frameRate;if(o>n){var a={text:i.text,time:o};if("interval"==r&&e==this.$textgrid[t].values.length-1)return;this.wavesurfer.setTierValue(t,e,a),this.isSyncing||this.$vuewer.console.log(this.tag,"update time a record (key: ".concat(t," idx: ").concat(e,")")),this.$store.dispatch("current/seekTo",{time:o,center:!1})}},splitRecord:function(t,e,i){"frames"==i?this.wavesurfer.splitTierValue(t,e,this.$frameRate):"chars"==i?this.wavesurfer.splitTierValue(t,e):this.wavesurfer.splitTierValue(t,e,i)},tokenizeRecord:function(t,e,i){var n=this,r=this.$textgrid[t].values[e],o=this.$vuewer.text[i];o&&r.text&&o(r.text).then((function(i){if(i){var o={text:i.join("/"),time:r.time};n.wavesurfer.setTierValue(t,e,o)}}))},nextTier:function(){var t=this.current.tier.key,e=Object.keys(this.$textgrid),i=e.findIndex((function(e){return e==t}));-1!=i&&i+1<e.length&&this.focusTier(e[i+1])},prevTier:function(){var t=this.current.tier.key,e=Object.keys(this.$textgrid),i=e.findIndex((function(e){return e==t}));-1!=i&&i-1>-1&&this.focusTier(e[i-1])},focusTier:function(t){var e=this;setTimeout((function(){var i=e.wavesurfer.wavesurfer.textgrid;if(t!=e.current.tier.key){var n=e.$vuewer.math.nearest(e.$textgrid[t].values,"time",e.wavesurfer.getCurrentTime());i.setCurrent(t,n)}i.tiers[t].canvas.focus()}))},deleteTier:function(t){this.copyRecords(t),this.wavesurfer.deleteTier(t)},tokenizeTier:function(t,e){var i=this,n=this.$textgrid[t].values,r=this.$vuewer.text[e],o=n.map((function(t){return t.text})).join("&");r&&o&&r(o).then((function(e){if(e){var r=e.join("/").split("&"),o=r.map((function(t,e){return{time:n[e].time,text:r[e].replace(/(?:^\/)|(?:\/$)/g,"")}})),a=i.$textgrid;a[t].values=o,i.$store.dispatch("current/setTextGrid",a)}}))},fireUpdateData:function(){var t={textgrid:this.$textgrid,frames:this.$frames};this.$emit("data-updated",t)},onResize:function(t){this.$vuewer.console.log(this.tag,"on resize"),this.videoHeight=t},onDownloadClick:function(e){var i=this.$store.state.current.video.filename.split(".")[0];if("XLSX"==e){var n={records:this.$store.getters["current/tgTable"],frames:this.$store.getters["current/frameTable"],points:this.$store.getters["current/pointTable"],rects:this.$store.getters["current/rectTable"]},r=this.$vuewer.io.xlsx.dump(n);this.$vuewer.io.file.download(r,"".concat(i,".xlsx"))}else if("JSON"==e)this.$emit("download-json");else if("PNG"==e)this.$refs.videoArray&&this.$refs.videoArray.downloadImage();else if("MP4"==e){var o=this.current.tier.key||Object.keys(this.$textgrid)[0];if(o){var a=this.$textgrid[o],s=this.current.tier.record.idx||0,c=a.values[s],l=this.$duration,u=0,d=l;if("interval"==a.type)u=0==s?0:a.values[s-1].time,d=c.time;else{var f=c.time-this.playOffset,m=c.time+this.playOffset;u=f<0?0:f,d=m>l?l:m}var h=this.$store.state.current.video.filename.split(".")[0],v="".concat(h,".mp4"),p=this.$vuewer.io.file.toBuff(this.$source),g=this.$vuewer.io.video.trim(p,u,d),x=g.MEMFS[0],y=this.$vuewer.io.video.toBlob(t(x.data));this.$vuewer.io.file.download(y,v)}}else if("TEXTGRID/JSON"==e){var b=new Blob([JSON.stringify(this.$textgrid,null,"  ")],{type:"application/json"});this.$vuewer.io.file.download(b,"".concat(i,"-records.json"))}else if("TEXTGRID/TEXTGRID"==e){var w=this.wavesurfer.getDuration(),$=this.$vuewer.io.tg.dump(w,this.$textgrid),k=new Blob([$],{type:"text/plain"});this.$vuewer.io.file.download(k,"".concat(i,"-records.TextGrid"))}else if("TEXTGRID/XLSX"==e){var _={records:this.$store.getters["current/tgTable"]},S=this.$vuewer.io.xlsx.dump(_);this.$vuewer.io.file.download(S,"".concat(i,"-records.xlsx"))}else if("FRAME/JSON"==e){var C=new Blob([JSON.stringify(this.$frames,null,"  ")],{type:"application/json"});this.$vuewer.io.file.download(C,"".concat(i,"-frame.json"))}else if("FRAME/XLSX"==e){var T={frames:this.$store.getters["current/frameTable"],points:this.$store.getters["current/pointTable"],rects:this.$store.getters["current/rectTable"]},R=this.$vuewer.io.xlsx.dump(T);this.$vuewer.io.file.download(R,"".concat(i,".xlsx"))}else this.$vuewer.snackbar.warning("$vuetify.yet")},onWindowClick:function(t){if("FRAMEDIFF"==t){var e=this.$refs.diffCard;e&&e.open()}else this.$vuewer.snackbar.error("$vuetify.yet")},onUploadClick:function(t){var e=this;this.$vuewer.console.log(this.tag,"on upload: ".concat(t.click));var i=t.click,o=t.files,a="$vuetify.notAcceptable";if(1===o.length){var s=o[0];if("TEXTGRID/JSON"==i)this.$vuewer.io.json.read(s).then((function(t){var i=e.$vuewer.io.obj.ver2.loadTextGrid(t);e.$store.dispatch("current/setTextGrid",i),e.$vuewer.snackbar.success("$vuetify.loaded")}));else if("TEXTGRID/JSON/VER1"==i)this.$vuewer.io.json.read(s).then((function(t){var i=e.$vuewer.io.obj.ver1.loadTextGrid(t,"both");e.$store.dispatch("current/setTextGrid",i),e.$vuewer.snackbar.success("$vuetify.loaded")}));else if("TEXTGRID/JSON/VER1/LEFT"==i)this.$vuewer.io.json.read(s).then((function(t){var i=e.$vuewer.io.obj.ver1.loadTextGrid(t,"left");e.$store.dispatch("current/setTextGrid",i),e.$vuewer.snackbar.success("$vuetify.loaded")}));else if("TEXTGRID/JSON/VER1/RIGHT"==i)this.$vuewer.io.json.read(s).then((function(t){var i=e.$vuewer.io.obj.ver1.loadTextGrid(t,"right");e.$store.dispatch("current/setTextGrid",i),e.$vuewer.snackbar.success("$vuetify.loaded")}));else if("TEXTGRID/JSON/VER1/UP-DOWN"==i)this.$vuewer.io.json.read(s).then((function(t){var i=e.$vuewer.io.obj.ver1.loadTextGrid(t,"up-down");e.$store.dispatch("current/setTextGrid",i),e.$vuewer.snackbar.success("$vuetify.loaded")}));else if("TEXTGRID/TEXTGRID"==i)this.wavesurfer.loadTextGrid(s),this.$vuewer.snackbar.success("$vuetify.loaded");else if("POINTS/XY"==i){var c=this;this.$vuewer.io.xy.read(s).then((function(t){var e=c.$frames.map((function(e,i){var n=t[i],o=[];for(var a in n){var s=n[a];for(var l in s){var u=s[l];o.push({id:"points-".concat(e.id,"-").concat(a,"-").concat(l),x:u.x,y:u.y,color:c.$vuewer.io.xy.getColor(a),label:a,size:5,frameId:e.id})}}return Object(r["a"])(Object(r["a"])({},e),{},{points:o})}));c.$frames=e})).catch((function(t){"XYError"===t.name&&e.$vuewer.snackbar.warning("$vuetify.io.xy.parse.".concat(t.reason))}))}else if("POINTS/XLSX"==i){var l=this,u="points";this.$vuewer.io.xlsx.load(s,u).then((function(t){var i=Object(n["a"])(t),r=i[0],o=i.slice(1),a=o.map((function(t){var e={};return r.forEach((function(i,n){e[i]=t[n]})),e}));e.$vuewer.loading.start("$vuetify.loading"),l.$store.dispatch("current/addPoints",a).then((function(){l.$vuewer.loading.end()})).catch((function(t){l.$vuewer.loading.end(),console.error(t)}))})).catch((function(t){console.error(t)}))}else this.$vuewer.snackbar.warning(a)}},onLoadeddata:function(t){var e=this;t&&(this.$vuewer.console.log(this.tag,"on loaded"),this.videoElm=t,this.$nextTick((function(){e.wavesurfer=e.$refs.wavesurfer,e.$refs.layout.onResize()})))},onFrameUpdated:function(t){this.$vuewer.console.log(this.tag,"on frame updated"),this.current.frame=t,this.lazyRular&&(this.dialog.ruler.show=!0,this.lazyRular=!1),this.lazyImageEdit&&(this.dialog.imageEdit.show=!0,this.lazyImageEdit=!1)},onSpectrogramRenderStart:function(){this.$vuewer.console.log(this.tag,"on spectrogram render start"),this.isLoading=!0},onSpectrogramRenderEnd:function(){if(this.$vuewer.console.log(this.tag,"on spectrogram render end"),this.$textgrid){if(this.isSyncing=!0,this.$store.dispatch("current/setTextGrid",this.$textgrid),this.$route.query.start){var t=Number(this.$route.query.start);this.$store.dispatch("current/seekTo",{time:t,center:!1})}this.current.tier.key=null,this.current.tier.values=[],this.current.tier.record.idx=0,this.current.tier.record.text="",this.current.tier.record.time=0,this.$duration=this.wavesurfer?this.wavesurfer.getDuration():0,this.isSyncing=!1}this.isLoading=!1},onTextGridClick:function(t){this.wavesurfer.isPlaying()&&this.wavesurfer.pause(),this.current.key=t.key,this.current.time=t.time,"ctrl"==this.$store.state.setting.addRecordKey&&t.ctrl&&1==t.detail&&this.addRecord(t.key,t.time),"alt"==this.$store.state.setting.addRecordKey&&t.alt&&1==t.detail&&this.addRecord(t.key,t.time),t.item&&(this.current.text=t.item.text,this.current.time=t.item.time)},onTextGridDblClick:function(t){"dbl"==this.$store.state.setting.addRecordKey&&this.addRecord(t.key,t.time)},onTextGridKeydown:function(t){var e=Number(Date.now()-this.keybuffer.time),i="textgrid"==this.keybuffer.from&e<150,n=i?this.keybuffer.keycode:null,r=this.$vuewer.key.summary(t),o=r.key,a=r.xKey,s=t.current;if(~[8,46].indexOf(o)){var c=this.$store.state.setting.deleteRecordKey;"delete"==c&&"default"==a&&this.deleteRecord(s.key,s.index),c==a&&this.deleteRecord(s.key,s.index),c+"+shift"==a&&this.onClickTierDelete()}else 68==o&&(null==n&&"default"==a?this.deleteRecordText(s.key,s.index):68==n&&"default"==a&&this.deleteTier(s.key));(32==o&&"ctrl"==a||32==o&&"default"==a)&&this.addRecord(s.key,this.wavesurfer.getCurrentTime(),""),13==o&&this.addRecord(s.key,this.wavesurfer.getCurrentTime(),""),9==o&&"default"==a&&this.playRecord(s.key,s.index),187==o&&"ctrl+shift"==a&&(this.$minPxPerSec=this.$minPxPerSec+50),189==o&&"ctrl"==a&&this.$minPxPerSec>100&&(this.$minPxPerSec=this.$minPxPerSec-50),~[37,74].indexOf(o)?"default"==a?this.wavesurfer.skipBackward():"ctrl"==a?this.prevRecord(s.key,s.index,!1):"ctrl+shift"==a?this.shrinkRecord(s.key,s.index):"ctrl+alt"==a&&this.toStartRecord(s.key,s.index):~[38,72].indexOf(o)&&"default"==a?this.prevTier():~[39,75].indexOf(o)?"default"==a?this.wavesurfer.skipForward():"ctrl"==a?this.nextRecord(s.key,s.index,!1):"ctrl+shift"==a?this.extendRecord(s.key,s.index):"ctrl+alt"==a&&this.toEndRecord(s.key,s.index):~[40,76].indexOf(o)&&"default"==a&&this.nextTier(),54==o&&"shift"==a?this.toStartRecord(s.key,s.index):52==o&&"shift"==a&&this.toEndRecord(s.key,s.index),67==o&&"ctrl"==a?this.copyRecord(s.key,s.index):67==o&&"ctrl+shift"==a&&this.onClickTierAdd(),86==o&&"ctrl"==a&&this.pasteRecord(s.key,s.index),89==o&&"default"==a?null==n?this.copyRecord(s.key,s.index):89==n&&this.copyRecords(s.key):80==o&&"default"==a&&this.paste(),83==o&&"ctrl"==a&&this.fireUpdateData(),(90==o&&"ctrl"==a||85==o&&"default"==a)&&this.rebaseTextgrid(),82==o&&"ctrl"==a&&this.onClickLoadDropbox(),73==o&&"default"==a?this.$refs.input.focus():73==o&&"ctrl"==a&&this.onClickImageEdit(),79==n&&68==o&&"default"==a&&this.onClickComplate(),this.keybuffer.time=Date.now(),this.keybuffer.from="textgrid",this.keybuffer.keycode=t.keycode,this.keybuffer.xKey=a},onWaveSurferKeyup:function(t){var e=this,i=this.$vuewer.key.summary(t),n=i.key,r=i.xKey,o={key:this.current.tier.key,idx:this.current.tier.record.idx||0};"tab"==n&&"default"==r?this.playPause():"+"!=n||"ctrl"!=r&&"ctrl+shift"!=r?"-"!=n||"ctrl"!=r&&"ctrl+shift"!=r?"i"==n&&"ctrl"==r?this.onClickImageEdit():"j"==n&&"default"==r?this.wavesurfer.skipBackward():"j"==n&&"ctrl"==r?this.prevRecord(o.key,o.idx,!1):"j"==n&&"ctrl+shift"==r?this.shrinkRecord(o.key,o.idx):"j"==n&&"ctrl+alt"==r?this.toStartRecord(o.key,o.idx):"k"==n&&"default"==r?this.wavesurfer.skipForward():"k"==n&&"ctrl"==r?this.nextRecord(o.key,o.idx,!1):"k"==n&&"ctrl+shift"==r?this.extendRecord(o.key,o.idx):"k"==n&&"ctrl+alt"==r?this.toEndRecord(o.key,o.idx):"s"==n&&"ctrl"==r?this.fireUpdateData():"z"==n&&"ctrl"==r||"u"==n&&"default"==r?this.rebaseTextgrid():"r"==n&&"ctrl"==r?this.onClickLoadDropbox():"i"==n&&"default"==r?(this.focusRecord(),setTimeout((function(){e.$refs.input.focus()}))):"i"==n&&"ctrl+shift"==r?this.onClickImageEdit():"c"==n&&"ctrl+shift"==r?this.onClickTierAdd():console.log("onWaveSurferKeyup",n,r,t):this.$minPxPerSec=this.$minPxPerSec-50:this.$minPxPerSec=this.$minPxPerSec+50},onTableKeyup:function(t){var e=this.$vuewer.key.summary(t),i=e.key,n=e.xKey;"s"==i&&"ctrl"==n?this.fireUpdateData():"r"==i&&"ctrl"==n?this.onClickLoadDropbox():"i"==i&&"ctrl+shift"==n?this.onClickImageEdit():console.log("onTableKeyup",i,n,t)},onVideoArrayKeyup:function(t){var e=t.event,i=this.$vuewer.key.summary(e),n=i.key,r=i.xKey,o={key:this.current.tier.key,idx:this.current.tier.record.idx};"tab"==n&&"default"==r?this.playPause():"i"==n&&"ctrl"==r?this.onClickImageEdit():"j"==n&&"default"==r?this.wavesurfer.skipBackward():"j"==n&&"ctrl"==r?this.prevRecord(o.key,o.idx,!1):"j"==n&&"ctrl+shift"==r?this.shrinkRecord(o.key,o.idx):"j"==n&&"ctrl+alt"==r?this.toStartRecord(o.key,o.idx):"k"==n&&"default"==r?this.wavesurfer.skipForward():"k"==n&&"ctrl + shift"==r?this.extendRecord(o.key,o.idx):"k"==n&&"ctrl + alt"==r?this.toEndRecord(o.key,o.idx):"k"==n&&"ctrl"==r?this.nextRecord(o.key,o.idx,!1):"s"==n&&"ctrl"==r?this.fireUpdateData():"r"==n&&"ctrl"==r?this.onClickLoadDropbox():"i"==n&&"ctrl+shift"==r?this.onClickImageEdit():console.log("onVideoArrayKeyup",t.ref,n,r,e)},onUpdateRecordText:function(t){var e=this.current.tier,i=e.key,n=e.record.idx,r=this.$textgrid[i].values[n];if(i){var o={time:r.time,text:e.record.text};this.wavesurfer.setTierValue(i,n,o),this.isSyncing||this.$vuewer.console.log(this.tag,"update text a record (key: ".concat(i," idx: ").concat(n,")")),"next"==t?this.nextRecord(i,n,!0):this.onEscTextField()}},onEscTextField:function(){var t=this,e=this.current.tier.key;setTimeout((function(){t.$refs.input.blur(),e&&t.focusTier(e)}))},onTextGridUpdate:function(t){if(t){var e=this.$textgrid?Object.keys(this.$textgrid).length:0,i=Object.keys(this.$textgrid).length;this.isSyncing||(this.$textgrid=Object.assign({},t),e!==i&&this.$store.commit("current/tab",i))}},onRecordUpdated:function(t){var e=this;this.current.tier.key=t.key,this.current.tier.values=this.$textgrid[t.key].values,this.current.tier.record.idx=t.index,t.item?(this.current.tier.record.time=t.item.time,this.current.tier.record.text=t.item.text):(this.current.tier.record.time=0,this.current.tier.record.text=""),this.lazyFocusTextField&&(setTimeout((function(){e.$refs.input.focus()})),this.lazyFocusTextField=!1)},onClickNoiseReduction:function(t){var e=this;setTimeout((function(){e.$emit("run-noise-reduction",t)}),100)},onClickDetail:function(){this.$vuewer.console.log(this.tag,"on click detail"),this.$store.state.current.layout.mini?this.dialog.textgrid.show=!0:this.dialog.detail.show=!0},onClickSetting:function(){this.$vuewer.console.log(this.tag,"on click setting"),this.dialog.setting.show=!0},onClickRuler:function(t){this.$vuewer.console.log(this.tag,"on click ruler"),t?(this.lazyRular=!0,this.$store.dispatch("current/seekTo",{time:t,center:!1})):this.dialog.ruler.show=!0},onClickImageEdit:function(t){this.$vuewer.console.log(this.tag,"on click image edit"),t?(this.lazyImageEdit=!0,this.$store.dispatch("current/seekTo",{time:t,center:!1})):this.dialog.imageEdit.show=!0},onClickTierAdd:function(){this.$vuewer.console.log(this.tag,"on click tier add"),this.dialog.tier.show=!0},onClickTierEdit:function(){this.$vuewer.console.log(this.tag,"on click tier edit"),this.dialog.tierEdit.show=!0},onClickTierDelete:function(){this.$vuewer.console.log(this.tag,"on click tier delete"),this.dialog.tierDelete.show=!0},onClickComplate:function(){this.$vuewer.console.log(this.tag,"on click complate"),this.dialog.complates.show=!0},onClickLoadDropbox:function(){var t=this,e=this.$store.getters["current/video/dropboxPath"];null!==e&&this.$vuewer.dropbox.hasToken()?(this.$vuewer.loading.start("$vuetify.loading"),this.$vuewer.dropbox.read(e).then((function(e){var i=JSON.parse(e);t.$store.dispatch("current/loadObj",i),t.$vuewer.snackbar.success("$vuetify.loaded")})).catch((function(e){var i="DROPBOX ERROR: ".concat(e.status," :").concat(e.error.error_summary);409==e.status&&(i="$vuetify.notFound"),t.$vuewer.snackbar.error(i)})).finally((function(){return t.$vuewer.loading.end()}))):this.$vuewer.dropbox.auth()},onClickRecordContextMenu:function(t){if(this.current.tier.key){var e=this.current.tier.record,i=this.current.tier.key;"play"==t?this.playRecord(i,e.idx):"copy"==t?this.copyRecord(i,e.idx):"paste"==t?this.pasteRecord(i,e.idx):"next"==t?this.nextRecord(i,e.idx,!1):"prev"==t?this.prevRecord(i,e.idx,!1):"to-start"==t?this.toStartRecord(i,e.idx):"to-end"==t?this.toEndRecord(i,e.idx):"extend"==t?this.extendRecord(i,e.idx):"shrink"==t?this.shrinkRecord(i,e.idx):"split-by-frames"==t?this.splitRecord(i,e.idx,"frames"):"split-by-chars"==t?this.splitRecord(i,e.idx,"chars"):"split-by-slash"==t?this.splitRecord(i,e.idx,"/"):("owakati"==t||"oyomi"==t||"opronunciation"==t||"obasic"==t||"opos"==t)&&this.tokenizeRecord(i,e.idx,t)}else this.$vuewer.snackbar.warning("$vuetify.textgrid.tier.record.no")},onClickIntervalContextMenu:function(t){var e=this,i=this.current.tier.key;if(i){if("owakati"==t)this.tokenizeTier(i,t);else if("oyomi"==t)this.tokenizeTier(i,t);else if("opronunciation"==t)this.tokenizeTier(i,t);else if("time2frame"==t){var n=this.$textgrid[this.current.key].values,r=this.$textgrid[this.current.key].type,o=n;"interval"==r?n.map((function(t,i){var r=Math.round(t.time*e.$fps)*e.$frameRate;return i==n.length-1?{text:t.text,time:t.time}:{text:t.text,time:r}})):o=n.map((function(t){return{text:t.text,time:Math.round(t.time*e.$fps)*e.$frameRate}}));var a=this.$textgrid;a[i].values=o,this.$store.dispatch("current/setTextGrid",a)}else if("split-by-frames"==t){var s=this.$frames.filter((function(t){return t.time>0&&t.time<e.$duration})).map((function(t){return t.time})),c=s.map((function(t){return{text:"",time:t}})),l=this.$textgrid;l[i].values=c,this.$store.dispatch("current/setTextGrid",l)}else if("split-by-chars"==t){var u=this.$textgrid[i],d=this.$textgrid;for(var f in u.values){var m=this.$textgrid[i].values[f],h=f-1==0?u.values[0]:u.values[f-1];if(m.text)for(var v=m.text.split(""),p=v.length,g=m.time-h.time,x=g/p,y=1;y<p+1;y++){var b=h.time+x*y,w=v[y-1];1==y?(d[i].values[f].text=w,d[i].values[f].time=b):d[i].values.push({text:w,time:b})}}this.$store.dispatch("current/setTextGrid",d)}else if("split-by-slash"==t){var $=this.$textgrid[i],k=this.$textgrid;for(var _ in $.values){var S=this.$textgrid[i].values[_],C=_-1==0?$.values[0]:$.values[_-1];if(S.text)for(var T=S.time-C.time,R=S.text.split("/"),V=R.length,P=T/V,I=1;I<V+1;I++){var O=C.time+P*I,j=R[I-1];1==I?(k[i].values[_].text=j,k[i].values[_].time=O):k[i].values.push({text:j,time:O})}}this.$store.dispatch("current/setTextGrid",k)}}else this.$vuewer.snackbar.warning("$vuetify.textgrid.tier.record.no")},onMouseover:function(t){this.where=t},onForwardBtnUp:function(t){if(t.ctrl)this.$minPxPerSec=this.$minPxPerSec+50;else if("wave-surfer"==this.where){var e=this.current.tier.key;if(e){var i=this.current.tier.record;this.nextRecord(e,i.idx,!1)}else this.wavesurfer.skipForward()}else this.wavesurfer.skipForward()},onBackBtnUp:function(t){if(t.ctrl)this.$minPxPerSec>100&&(this.$minPxPerSec=this.$minPxPerSec-50);else if("wave-surfer"==this.where){var e=this.current.tier.key;if(e){var i=this.current.tier.record;this.prevRecord(e,i.idx,!1)}else this.wavesurfer.skipBackward()}else this.wavesurfer.skipBackward()},onLayoutMouseUp:function(t){var e=this;if(1==t.button)t.preventDefault(),t.ctrlKey?this.$store.commit("drawer",!0):t.altKey?this.$store.commit("logging/show",!0):this.fab=!this.fab;else if(3==t.button){t.preventDefault(),t.stopPropagation();var i={ctrl:t.ctrlKey,meta:t.metaKey,alt:t.altKey,shift:t.shift};e.onBackBtnUp(i)}else if(4==t.button){t.preventDefault(),t.stopPropagation();var n={ctrl:t.ctrlKey,meta:t.metaKey,alt:t.altKey,shift:t.shift};e.onForwardBtnUp(n)}}},mounted:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.dispatch("search/show"),t.next=3,this.$store.dispatch("current/init",this.id);case 3:e=this.$refs.layout,e&&(i=e.$el,i&&i.addEventListener("mouseup",this.onLayoutMouseUp,{passive:!1}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),beforeDestroy:function(){this.$store.dispatch("current/init"),this.$store.dispatch("search/init");var t=this.$refs.layout,e=t.$el;e&&e.removeEventListener("mouseup",this.onLayoutMouseUp)}}}).call(this,i("1c35").Buffer)},ea1e:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("m-card-dialog",{attrs:{titleColor:"warning darken-1",title:t.$vuetify.lang.t(t.title),"max-width":"700"},scopedSlots:t._u([{key:"toolbar-actions",fn:function(){return[i("v-btn",{attrs:{icon:"",color:"white"},on:{click:t.onClose}},[i("v-icon",[t._v("mdi-close")])],1)]},proxy:!0}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{on:{click:t.playPause}},[i("video",{ref:"video",style:t.videoStyle,attrs:{src:t.$src,controls:""},on:{pause:t.onPause,play:t.onPlay}})])],1)},r=[],o=(i("99af"),i("a9e3"),i("9621")),a={name:"m-video-dialog",components:{MCardDialog:o["a"]},data:function(){return{isPlaying:!1,title:"Video Dialog",videoStyle:{width:"100%",height:"auto"}}},props:{value:{type:Boolean,required:!0},src:{type:String,required:!0},start:{type:Number,default:0},end:{type:Number,default:0}},computed:{$src:function(){return 0!==this.end?"".concat(this.src,"#t=").concat(this.start,",").concat(this.end):this.src},dialog:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{playPause:function(){this.$refs.video&&(this.isPlaying?this.$refs.video.pause():this.$refs.video.play())},onPlay:function(){if(this.isPlaying=!0,0!==this.end){var t=this.end-this.start,e=this.$refs.video;setTimeout((function(){e.pause()}),1e3*t)}},onPause:function(){this.isPlaying=!1,this.$refs.video.currentTime=this.start},onClose:function(){this.isPlaying&&this.$refs.video.pause(),this.$refs.video.currentTime=this.start,this.dialog=!1}}},s=a,c=i("2877"),l=i("6544"),u=i.n(l),d=i("8336"),f=i("b0af"),m=i("132d"),h=Object(c["a"])(s,n,r,!1,null,"7ac304af",null);e["a"]=h.exports;u()(h,{VBtn:d["a"],VCard:f["a"],VIcon:m["a"]})},ed08:function(t,e,i){"use strict";var n=i("edc0"),r=(i("c975"),i("b64b"),i("ac1f"),i("5319"),i("1276"),i("fcf4")),o=function(t,e){if(~t.indexOf("#"))return t;var i=e.theme.themes.light,n=Object.keys(i);if(-1!==n.indexOf(t))return i[t];var o=t.split(" "),a=r["a"][o[0]];if(a){if(2==o.length){var s=o[1].replace(/-/g,"");return r["a"][o[0]][s]}return r["a"][o[0]].base}return i.primary},a={toCss:o},s=i("2db4"),c=i("2d5d"),l=(i("d3b7"),function(t,e,i){return new Promise((function(n,r){var o=document.createElement("video");o.id="tmp-video",o.onloadeddata=function(){return o.currentTime=i},o.onseeked=function(){try{var t=document.createElement("canvas"),i=e.width,a=e.height;t.id="tmp-canvas",t.width=i,t.height=a,t.getContext("2d").drawImage(o,0,0,i,a);var s=t.toDataURL("image/png");n(s),o.remove(),t.remove()}catch(c){r(c)}},o.src=t}))}),u={toPng:l},d=i("3b4d");e["a"]={deepCopy:function(t){return JSON.parse(JSON.stringify(t))},color:a,image:c["a"],video:u,text:s["a"],math:n["a"],dropbox:d["a"]}},edbd:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[i("v-card-actions",{class:"elevation-"+(n?6:4)+" blue-grey darken-4",on:{mouseover:function(e){return t.$emit("mouseover")}}},[i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:function(e){return t.skip(-t.longSkip/t.fps)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-skip-backward")])],1),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:t.skipBackward}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-skip-previous")])],1),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:t.decPxPerSec}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-magnify-minus")])],1),i("m-video-upload-menu",{on:{click:t.onUploadClick}}),i("v-spacer"),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:t.playPause}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-play-pause")])],1),i("v-spacer"),i("m-video-download-menu",{on:{click:function(e){return t.$emit("download-click",e)}}}),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:t.incPxPerSec}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-magnify-plus")])],1),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:t.skipForward}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-skip-next")])],1),i("v-btn",{class:"elevation-"+(n?4:0),attrs:{dark:"",icon:""},on:{click:function(e){return t.skip(t.longSkip/t.fps)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-skip-forward")])],1)],1)]}}])})},r=[],o=(i("a9e3"),i("90a6")),a=i("27a3"),s=i("5c65"),c=i("41e7"),l={name:"WVuewerActions",mixins:[a["a"]],components:{MVideoDownloadMenu:s["a"],MVideoUploadMenu:c["a"]},props:{fps:{type:Number,required:!0},longSkip:{type:Number,default:5}},computed:{$minPxPerSec:{get:function(){return this.$store.state.setting.minPxPerSec},set:function(t){var e=Object(o["a"])(t),i=null;"number"==e?i=t:"string"==e&&(i=Number(t)),i&&this.$store.commit("setting/setMinPxPerSec",i)}}},methods:{onUploadClick:function(t){this.$emit("upload-click",t)},incPxPerSec:function(){this.$minPxPerSec<700&&(this.$minPxPerSec=this.$minPxPerSec+50)},decPxPerSec:function(){this.$minPxPerSec>100&&(this.$minPxPerSec=this.$minPxPerSec-50)}}},u=l,d=i("2877"),f=i("6544"),m=i.n(f),h=i("8336"),v=i("99d9"),p=i("ce87"),g=i("132d"),x=i("2fa4"),y=Object(d["a"])(u,n,r,!1,null,null,null);e["a"]=y.exports;m()(y,{VBtn:h["a"],VCardActions:v["a"],VHover:p["a"],VIcon:g["a"],VSpacer:x["a"]})},edc0:function(t,e,i){"use strict";i("a630"),i("a15b"),i("d81d"),i("fb6a"),i("d3b7"),i("6062"),i("3ca3"),i("ddb0");var n=function(t,e,i){var n=t.map((function(t){return{val:i<t[e]?1e5:Math.abs(i-t[e]),obj:t}})).sort((function(t,e){return t.val<e.val?1:t.val>e.val?-1:0}))[0];return n.obj};function r(t){return Array.from(new Set(t))}var o=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},a=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};function s(t,e){return(Array(e).join("0")+t).slice(-e)}e["a"]={nearest:n,distance:a,round:o,padding:s,uniq:r}},ee5b:function(t,e,i){"use strict";i("a9e3");var n=i("90a6");e["a"]={computed:{$filesOrderKey:{get:function(){return this.$store.state.setting.filesOrderKey},set:function(t){this.$store.commit("setting/filesOrderKey",t)}},$syncPrevPoints:{get:function(){return this.$store.state.setting.syncPrevPoints},set:function(t){this.$store.commit("setting/syncPrevPoints",t)}},$syncPrevRects:{get:function(){return this.$store.state.setting.syncPrevRects},set:function(t){this.$store.commit("setting/syncPrevRects",t)}},$showFrameInVideo:{get:function(){return this.$store.state.setting.showFrameInVideo},set:function(t){this.$store.commit("setting/showFrameInVideo",t)}},$showPointsInVideo:{get:function(){return this.$store.state.setting.showPointsInVideo},set:function(t){this.$store.commit("setting/showPointsInVideo",t)}},$showRectsInVideo:{get:function(){return this.$store.state.setting.showRectsInVideo},set:function(t){this.$store.commit("setting/showRectsInVideo",t)}},$syncDropbox:{get:function(){return this.$store.state.setting.syncDropbox},set:function(t){this.$store.commit("setting/syncDropbox",t)}},$showDev:{get:function(){return this.$store.state.setting.showDev},set:function(t){this.$store.commit("setting/showDev",t)}},$maxVideoSize:{get:function(){return this.$store.state.setting.maxVideoSize},set:function(t){var e=Object(n["a"])(t);"number"==e?this.$store.commit("setting/setMaxVideoSize",t):"string"==e&&Number(t)&&this.$store.commit("setting/setMaxVideoSize",Number(t))}},$shouldMovePageAferAddingFile:{get:function(){return this.$store.state.setting.shouldMovePageAferAddingFile},set:function(t){this.$store.commit("setting/shouldMovePageAferAddingFile",t)}},$shouldGetVideoInfo:{get:function(){return this.$store.state.setting.shouldGetVideoInfo},set:function(t){this.$store.commit("setting/setShouldGetVideoInfo",t)}},$shouldGetFrameInfo:{get:function(){return this.$store.state.setting.shouldGetFrameInfo},set:function(t){this.$store.commit("setting/setShouldGetFrameInfo",t)}},$minPxPerSec:{get:function(){return this.$store.state.setting.minPxPerSec},set:function(t){var e=Object(n["a"])(t),i=null;"number"==e?i=t:"string"==e&&(i=Number(t)),i&&this.$store.commit("setting/setMinPxPerSec",i)}},$freqRate:{get:function(){return this.$store.state.setting.freqRate},set:function(t){var e=Object(n["a"])(t);"number"==e?this.$store.commit("setting/setFreqRate",t):"string"==e&&Number(t)&&this.$store.commit("setting/setFreqRate",Number(t))}},$targetChannel:{get:function(){return this.$store.state.setting.targetChannel},set:function(t){this.$store.commit("setting/setTargetChannel",t)}},$spectrogramHeight:{get:function(){return this.$store.state.setting.spectrogramHeight},set:function(t){this.$store.commit("setting/setSpectrogramHeight",t)}},$showTimeLine:{get:function(){return this.$store.state.setting.showTimeLine},set:function(t){this.$store.commit("setting/setShowTimeLine",t)}},$showSpectrogram:{get:function(){return this.$store.state.setting.showSpectrogram},set:function(t){this.$store.commit("setting/setShowSpectrogram",t)}},$showFreqLabel:{get:function(){return this.$store.state.setting.showFreqLabel},set:function(t){this.$store.commit("setting/setShowFreqLabel",t)}},$cursorColor:{get:function(){return this.$store.state.setting.cursorColor},set:function(t){this.$store.commit("setting/setCursorColor",t)}},$waveColor:{get:function(){return this.$store.state.setting.waveColor},set:function(t){this.$store.commit("setting/setWaveColor",t)}},$progressColor:{get:function(){return this.$store.state.setting.progressColor},set:function(t){this.$store.commit("setting/setProgressColor",t)}},$addRecordKey:{get:function(){return this.$store.state.setting.addRecordKey},set:function(t){this.$store.commit("setting/setAddRecordKey",t)}},$deleteRecordKey:{get:function(){return this.$store.state.setting.deleteRecordKey},set:function(t){this.$store.commit("setting/setDeleteRecordKey",t)}},$playOffset:{get:function(){return this.$store.state.setting.playOffset},set:function(t){var e=Object(n["a"])(t);"number"==e?this.$store.commit("setting/setPlayOffset",t):"string"==e&&Number(t)&&this.$store.commit("setting/setPlayOffset",Number(t))}},$nameSep:{get:function(){return this.$store.state.setting.nameSep},set:function(t){this.$store.commit("setting/nameSep",t)}},$nameFormat:{get:function(){return this.$store.state.setting.nameFormat},set:function(t){this.$store.commit("setting/nameFormat",t)}}},methods:{setDefaultSetting:function(){this.$store.dispatch("setting/setDefault")}}}},fc99:function(t,e,i){}});
//# sourceMappingURL=app.41657cad.js.map